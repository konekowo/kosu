!function(){"use strict";var e,t={65918:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.MapAudio=t.Audio=void 0;const n=i(3179),s=i(15041);class a{audio;source;mediaSource;mediaAudioElement;id;get isPaused(){return!!this._useMediaSource&&this.mediaAudioElement.paused}get isPlaying(){return!this._useMediaSource||!this.mediaAudioElement.paused}nodes=[];tempArrayMain=new Float32Array(256);tempArrayL=new Float32Array(64);tempArrayR=new Float32Array(64);LeftChannel=0;RightChannel=0;FrequencyAmplitudes=new Float32Array(256);_connectedToContext=!1;_useMediaSource=!1;_onEndCallback;timeStarted=0;paused=!1;beatmap;GetMaximumAudioLevel(){return Math.max(this.LeftChannel,this.RightChannel)}GetAverageAudioLevel(){return(this.LeftChannel+this.RightChannel)/2}Create(e,t){if(this._useMediaSource=t||!1,t){if(!this.mediaAudioElement)throw new Error("HTML Audio Element was not initialized!");this.mediaSource=e.createMediaElementSource(this.mediaAudioElement),this.mediaAudioElement.onpause=()=>{this.paused||this.mediaAudioElement.ended||this.Play()}}else this.source=e.createBufferSource(),this.source.buffer=this.audio}AddAudioNode(e){if(!(this._useMediaSource?this.mediaSource:this.source))throw new Error("Source not created yet!");this.nodes.push(e)}GetNode(e){let t=this.nodes.filter((t=>t instanceof e));return t.length>0?t:null}ConnectToContext(e,t){if(!(this._useMediaSource?this.mediaSource:this.source))throw new Error("Source not created yet!");this._connectedToContext||(this._connectedToContext=!0,this.nodes.length>0?t?t(this.nodes,this._useMediaSource?this.mediaSource:this.source):this.nodes.forEach(((t,i)=>{this.source.connect(t),t instanceof AnalyserNode||t.connect(e.destination)})):this._useMediaSource?this.mediaSource.connect(e.destination):this.source.connect(e.destination))}Play(){if(!(this._useMediaSource?this.mediaSource:this.source))throw new Error("Source not created yet!");if(!this._connectedToContext)throw new Error("Not connected to audio context yet!");if(this.paused=!1,this._useMediaSource){this.mediaAudioElement.play();let e=this.beatmap.Events.Events.find((e=>{if(e.eventType==s.EventTypes.VIDEO)return e}));e&&e.texture&&e.texture.source.resource.startPromise&&e.texture.source.resource.startPromise.then((()=>{e.texture.source.resource.play()}))}else this.source.start()}Pause(){if(!(this._useMediaSource?this.mediaSource:this.source))throw new Error("Source not created yet!");if(!this._connectedToContext)throw new Error("Not connected to audio context yet!");if(!this._useMediaSource)throw new Error("Pause is not supported on AudioSourceBuffer!");this.paused=!0,this.mediaAudioElement.pause();let e=this.beatmap.Events.Events.find((e=>{if(e.eventType==s.EventTypes.VIDEO)return e}));e&&e.texture&&e.texture.source.resource.startPromise&&e.texture.source.resource.startPromise.then((()=>{e.texture.source.resource.pause()}))}Stop(){if(!(this._useMediaSource?this.mediaSource:this.source))throw new Error("Source not created yet!");if(!this._connectedToContext)throw new Error("Not connected to audio context yet!");if(this.paused=!0,this._useMediaSource){this.mediaAudioElement.pause(),this._onEndCallback&&this._onEndCallback();let e=this.beatmap.Events.Events.find((e=>{if(e.eventType==s.EventTypes.VIDEO)return e}));e&&e.texture&&e.texture.source.resource.startPromise&&e.texture.source.resource.startPromise.then((()=>{e.texture.source.resource.pause()}))}else this.source.stop()}SetTime(e){if(!(this._useMediaSource?this.mediaSource:this.source))throw new Error("Source not created yet!");if(!this._connectedToContext)throw new Error("Not connected to audio context yet!");if(!this._useMediaSource)throw new Error("SetTime is not supported on AudioSourceBuffer!");this.mediaAudioElement.currentTime=e/1e3;let t=this.beatmap.Events.Events.find((e=>{if(e.eventType==s.EventTypes.VIDEO)return e}));t&&t.texture&&t.texture.source.resource.startPromise&&t.texture.source.resource.startPromise.then((()=>{let i=t.texture.source.resource,n=e/1e3;n+=t.startTime,n<0?(i.currentTime=0,i.pause(),t.texture.source.resource.startPromise=new Promise((e=>{setTimeout((()=>{i.play()}),Math.abs(n))}))):i.currentTime=n}))}GetDuration(){return this._useMediaSource?1e3*this.mediaAudioElement.duration:this.audio.duration}GetCurrentTime(){return this._useMediaSource?1e3*this.mediaAudioElement.currentTime:0!=this.timeStarted?Date.now()-this.timeStarted:0}RegisterEndCallBack(e){if(!(this._useMediaSource?this.mediaSource:this.source))throw new Error("Source not created yet!");this._onEndCallback=e,this._useMediaSource?this.mediaAudioElement.onended=()=>{this.paused=!0,e()}:this.source.onended=()=>{this.isPaused||(this.paused=!0,e())}}}t.Audio=a;t.MapAudio=class extends a{fadingOut=!1;fadeOutTimeout;playingCallback;FadeOut(){if(!(this._useMediaSource?this.mediaSource:this.source))throw new Error("Source not created yet!");if(!this._connectedToContext)throw new Error("Not connected to audio context yet!");if(!this._useMediaSource)throw new Error("FadeOut is not supported on AudioSourceBuffer!");if(this.fadingOut)return;this.fadingOut=!0,clearTimeout(this.fadeOutTimeout);let e=this.GetNode(GainNode);if(null==e)throw new Error("Gain Node doesn't exist on Audio Object!");e[0].gain.linearRampToValueAtTime(0,n.Main.AudioEngine.audioContext.currentTime+1),setTimeout((()=>{this.Stop()}),1e3)}}},85437:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.AudioEngine=void 0;const n=i(14981),s=i(65918),a=i(17898),o=i(3179),r=i(87816),l=i(22331);t.AudioEngine=class{audioContext;_playingAudios;_musicQueue=[];_audioIdTicker=0;_changeCallbacks=[];silentMusic=this.createSilentMusic();useSilentMusic=!0;constructor(){this.audioContext=new AudioContext,this._playingAudios=new n.PlayingAudios,o.Main.app.ticker.add((()=>{this.update()}))}UpdateMusicQueue(){this._musicQueue[0]&&(this._musicQueue[0].fadingOut||0!=this._musicQueue[0].GetCurrentTime()||(this._play(this._musicQueue[0]),this._changeCallbacks.forEach((e=>e(this._musicQueue[0])))),this._musicQueue[0].fadingOut&&this._musicQueue[1]&&this._musicQueue[1]&&(this._play(this._musicQueue[1]),this._changeCallbacks.forEach((e=>e(this._musicQueue[1]))))),this._musicQueue.length>=1?this.useSilentMusic=!1:(this.silentMusic=this.createSilentMusic(),this.useSilentMusic=!0)}createSilentMusic(){let e=new s.MapAudio;e.timeStarted=Date.now(),e.beatmap=new a.BeatmapData;let t=new r.UnInheritedTimingPoint;return t.time=0,t.beatLength=1e3,t.effects=l.Effect.None,e.beatmap.TimingPoints.TimingPoints.push(t),e}addMusicChangeEventListener(e){this._changeCallbacks.push(e)}removeMusicChangeEventListener(e){this._changeCallbacks=this._changeCallbacks.filter((t=>t!=e))}GetCurrentPlayingMusic(){return this.useSilentMusic?this.silentMusic:this._musicQueue[0]}GetCurrentPlayingMusicNoSilent(){return this._musicQueue[0]}PlayEffect(e,t){let i=new s.Audio;i.audio=e,i.id=this._audioIdTicker,this._play(i,t),this._audioIdTicker++}AddToMusicQueue(e,t,i){let n=new s.MapAudio;return n.mediaAudioElement=document.createElement("audio"),n.mediaAudioElement.src=e,n.beatmap=t,n.id=this._audioIdTicker,i&&(n.playingCallback=i),this._musicQueue.push(n),this._audioIdTicker++,this.UpdateMusicQueue(),n.id}PlayMusicImmediately(e,t,i){let n=this.GetCurrentPlayingMusicNoSilent();this._musicQueue=[],n&&n.FadeOut(),this.AddToMusicQueue(e,t,i)}update(){let e=this.GetCurrentPlayingMusic(),t=this.GetCurrentPlayingMusicNoSilent();if(t)if(t.isPaused)this.useSilentMusic=!0;else if(this.useSilentMusic&&(this.useSilentMusic=!1,e=this.GetCurrentPlayingMusic()),!this.useSilentMusic){e.fadingOut||e.GetDuration()-e.GetCurrentTime()<=1e3&&e.FadeOut();let t=e.GetNode(AnalyserNode)[0],i=e.GetNode(AnalyserNode)[1],n=e.GetNode(AnalyserNode)[2];t.getFloatFrequencyData(e.tempArrayMain);for(let t=0;t<e.FrequencyAmplitudes.length;t++)e.tempArrayMain[t]==1/0||e.tempArrayMain[t]==-1/0?e.FrequencyAmplitudes[t]=0:e.FrequencyAmplitudes[t]=8*Math.pow(10,e.tempArrayMain[t]/20);i.getFloatTimeDomainData(e.tempArrayL),n.getFloatTimeDomainData(e.tempArrayR);let s=0,a=0;e.tempArrayL.forEach((e=>{s=Math.max(Math.abs(e)/1.7,s)})),e.tempArrayR.forEach((e=>{a=Math.max(Math.abs(e)/1.7,a)})),e.LeftChannel=s,e.RightChannel=a}}_play(e,t){if(e instanceof s.MapAudio){e.Create(this.audioContext,!0);let t=this.audioContext.createGain();t.gain.value=0;let i=this.audioContext.createAnalyser();i.fftSize=512,i.smoothingTimeConstant=0;let n=this.audioContext.createChannelSplitter(2),s=this.audioContext.createAnalyser();s.smoothingTimeConstant=0,s.fftSize=128;let a=this.audioContext.createAnalyser();a.smoothingTimeConstant=0,a.fftSize=128,e.AddAudioNode(t),e.AddAudioNode(i),e.AddAudioNode(s),e.AddAudioNode(a),e.ConnectToContext(this.audioContext,((e,o)=>{o.connect(t),t.connect(this.audioContext.destination),o.connect(i),o.connect(n),n.connect(s,0),n.connect(a,1)})),e.Play(),this._playingAudios.audios.push(e),e.playingCallback&&e.playingCallback(),t.gain.linearRampToValueAtTime(1,this.audioContext.currentTime+.5)}else e.Create(this.audioContext,!1),e.ConnectToContext(this.audioContext),t&&e.source&&(e.source.playbackRate.value=t),e.Play(),this._playingAudios.audios.push(e);e.RegisterEndCallBack((()=>{e instanceof s.MapAudio&&(this._musicQueue[0]==e&&this._musicQueue.splice(0,1),this.UpdateMusicQueue()),this._playingAudios.audios.forEach(((t,i)=>{t!==e||this._playingAudios.audios.splice(i,1)}))}))}}},14981:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.PlayingAudios=void 0;t.PlayingAudios=class{audios=[]}},9611:function(e,t,i){var n=this&&this.__createBinding||(Object.create?function(e,t,i,n){void 0===n&&(n=i);var s=Object.getOwnPropertyDescriptor(t,i);s&&!("get"in s?!t.__esModule:s.writable||s.configurable)||(s={enumerable:!0,get:function(){return t[i]}}),Object.defineProperty(e,n,s)}:function(e,t,i,n){void 0===n&&(n=i),e[n]=t[i]}),s=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),a=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)"default"!==i&&Object.prototype.hasOwnProperty.call(e,i)&&n(t,e,i);return s(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.LogoVisualizer=void 0;const o=i(3179),r=a(i(58687)),l=i(5825),u=i(22331);class c extends r.Container{static size=900;frequencyAmplitudes=new Float32Array(256);audio;temporalAmplitudes=new Float32Array(256);graphics=new r.Graphics;index_change=5;bar_length=600;bars_per_visualiser=200;visualiser_rounds=5;decay_per_millisecond=.0024;time_between_updates=50;amplitude_dead_zone=1/this.bar_length;indexOffset=0;firstDraw=!0;set alpha(e){super.alpha=.2*e}get alpha(){return 5*super.alpha}constructor(){super(),this.alpha=1}start(){this.graphics.blendMode="add",this.addChild(this.graphics),this.graphics.eventMode="none",this.eventMode="none",setInterval((()=>{this.updateAmplitudes()}),this.time_between_updates)}draw(e){if(this.firstDraw)for(let e=0;e<this.frequencyAmplitudes.length;e++)this.frequencyAmplitudes[e]=0;this.graphics.clear();let t=e.deltaMS*this.decay_per_millisecond;for(let e=0;e<this.bars_per_visualiser;e++)this.frequencyAmplitudes[e]-=t*(this.frequencyAmplitudes[e]+.03),this.frequencyAmplitudes[e]<0&&(this.frequencyAmplitudes[e]=0);for(let e=0;e<this.visualiser_rounds;e++)for(let t=0;t<this.bars_per_visualiser;t++){if(this.frequencyAmplitudes[t]<this.amplitude_dead_zone)continue;let i=l.MathUtil.DegreesToRadians(t/this.bars_per_visualiser*360+360*e/this.visualiser_rounds),n=Math.cos(i),s=Math.sin(i),a={x:(n/2+.5)*c.size,y:(s/2+.5)*c.size},o={x:c.size*Math.sqrt(2*(1-Math.cos(l.MathUtil.DegreesToRadians(360/this.bars_per_visualiser))))/2,y:this.bar_length*this.frequencyAmplitudes[t]},r={x:n*o.y,y:s*o.y};this.graphics.moveTo(a.x,a.y),this.graphics.lineTo(a.x+r.x,a.y+r.y),this.graphics.stroke({color:"rgb(255, 255, 255)",width:14})}this.firstDraw=!1}updateAmplitudes(){this.audio=o.Main.AudioEngine.GetCurrentPlayingMusic();for(let e=0;e<this.audio.FrequencyAmplitudes.length;e++)this.temporalAmplitudes[e]=this.audio.FrequencyAmplitudes[e];let e=this.audio.GetCurrentTime(),t=this.audio.beatmap.TimingPoints.GetCurrentTimingPoints(e)[0];for(let e=0;e<this.bars_per_visualiser;e++){let i=this.temporalAmplitudes[(e+this.indexOffset)%this.bars_per_visualiser]*(t.effects==u.Effect.KiaiTime?1:.5);i>this.frequencyAmplitudes[e]&&(this.frequencyAmplitudes[e]=i)}this.indexOffset=(this.indexOffset+this.index_change)%this.bars_per_visualiser}}t.LogoVisualizer=c},8211:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.MenuLogoVisualizer=void 0;const n=i(9611);class s extends n.LogoVisualizer{draw(e){super.draw(e)}}t.MenuLogoVisualizer=s},49323:function(e,t,i){var n=this&&this.__createBinding||(Object.create?function(e,t,i,n){void 0===n&&(n=i);var s=Object.getOwnPropertyDescriptor(t,i);s&&!("get"in s?!t.__esModule:s.writable||s.configurable)||(s={enumerable:!0,get:function(){return t[i]}}),Object.defineProperty(e,n,s)}:function(e,t,i,n){void 0===n&&(n=i),e[n]=t[i]}),s=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),a=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)"default"!==i&&Object.prototype.hasOwnProperty.call(e,i)&&n(t,e,i);return s(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.LoadAnim=void 0;const o=a(i(58687)),r=a(i(29172)),l=i(92915);class u extends o.Container{bg;arc;arcContainer;animInterval;container;bgContainer;bgRotation=0;constructor(e,t){super(),this.pivot.set(.5,.5),this.container=new o.Container,this.container.alpha=0,this.rotation=2.5*Math.PI,this.bgContainer=new o.Container,this.bg=new o.Graphics,this.bg.roundRect(-50,-50,100,100,25),this.bg.fill(e),this.arcContainer=new o.Container,this.arc=new o.Graphics,this.arc.arc(0,0,27,Math.PI+.26,2.92*Math.PI),this.arc.stroke({width:8,color:t,cap:"round"}),this.arc.scale.set(-1,1),this.container.scale.set(.5,.5),this.bgContainer.addChild(this.bg),this.arcContainer.addChild(this.arc),this.bgContainer.addChild(this.arcContainer),this.container.addChild(this.bgContainer),this.addChild(this.container),l.Ease.getEase(this.container).ScaleTo(1,400,r.Easing.Quadratic.InOut).FadeIn(400,r.Easing.Quadratic.InOut),this.doAnims(),this.animInterval=setInterval((()=>{this.doAnims()}),800)}doAnims(){this.bgRotation+=90,l.Ease.getEase(this.bgContainer).createTween({value:this.bgContainer.angle},{value:this.bgRotation},!0,"angle",600,r.Easing.Quadratic.InOut)}getWidth(){return 100*this.scale.x}getHeight(){return 100*this.scale.y}draw(e){this.arcContainer.angle+=3*e.deltaTime}destroy(e){l.Ease.getEase(this.container).FadeOut(400,r.Easing.Quadratic.InOut).ScaleTo(.5,400,r.Easing.Quadratic.InOut),setTimeout((()=>{clearInterval(this.animInterval),super.destroy(e)}),400)}}t.LoadAnim=u},70723:function(e,t,i){var n=this&&this.__createBinding||(Object.create?function(e,t,i,n){void 0===n&&(n=i);var s=Object.getOwnPropertyDescriptor(t,i);s&&!("get"in s?!t.__esModule:s.writable||s.configurable)||(s={enumerable:!0,get:function(){return t[i]}}),Object.defineProperty(e,n,s)}:function(e,t,i,n){void 0===n&&(n=i),e[n]=t[i]}),s=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),a=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)"default"!==i&&Object.prototype.hasOwnProperty.call(e,i)&&n(t,e,i);return s(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.ButtonSystem=void 0;const o=a(i(58687)),r=a(i(29172)),l=i(92915),u=i(84283),c=i(57853);class d extends o.Container{menuBG=new o.Graphics;isOpened=!1;logo;state=h.Initial;logoTrackingContainer=new c.LogoTrackingContainer;menuHeight=150;get State(){return this.state}set State(e){if(this.state==e)return;const t=this.state;this.state=e,this.updateLogoState(t),console.log(`${this.constructor.name}'s state changed from ${t} to ${e}`)}updateLogoState(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:h.Initial;switch(this.state){case h.Exit:case h.Initial:this.Close();break;case h.TopLevel:case h.Play:switch(e){case h.TopLevel:break;case h.Initial:this.Open(),l.Ease.getEase(this.logo).ClearEasings().ScaleTo(.5*u.Screen.getScaleBasedOffScreenSize(),200,r.Easing.Linear.In);break;default:this.Open(),l.Ease.getEase(this.logo).ClearEasings().ScaleTo(.5*u.Screen.getScaleBasedOffScreenSize(),200,r.Easing.Quintic.Out)}}}constructor(e){super(),this.logo=e,this.drawMenuBG(),this.scale.y=0,this.alpha=0,this.addChild(this.menuBG),this.addChild(this.logoTrackingContainer),this.logo.Action=()=>this.onOsuLogo()}drawMenuBG(){this.menuBG.rect(0,u.Screen.getScaleBasedOffScreenSize()*(-this.menuHeight/2),1,u.Screen.getScaleBasedOffScreenSize()*this.menuHeight),this.menuBG.fill({color:"rgb(50,50,50)"})}onOsuLogo(){switch(this.state){default:return!1;case h.Initial:return this.State=h.TopLevel,!0;case h.TopLevel:case h.Play:case h.Edit:return!1}}Open(){setTimeout((()=>{this.isOpened=!0,l.Ease.getEase(this).ScaleTo(1,400,r.Easing.Quintic.Out).FadeIn(400,r.Easing.Quintic.Out)}),150)}Close(){this.isOpened=!1,l.Ease.getEase(this).ClearEasings().ScaleTo({x:1,y:0},300,r.Easing.Sinusoidal.In).FadeOut(300,r.Easing.Sinusoidal.In)}isOpen(){return this.isOpened}onResize(){this.menuBG.clear(),this.drawMenuBG(),this.position.set(0,window.innerHeight/2),this.menuBG.width=window.innerWidth}}var h;t.ButtonSystem=d,function(e){e.Exit="Exit",e.Initial="Initial",e.TopLevel="TopLevel",e.Play="Play",e.Edit="Edit",e.EnteringMode="EnteringMode"}(h||(h={}))},57853:function(e,t,i){var n=this&&this.__createBinding||(Object.create?function(e,t,i,n){void 0===n&&(n=i);var s=Object.getOwnPropertyDescriptor(t,i);s&&!("get"in s?!t.__esModule:s.writable||s.configurable)||(s={enumerable:!0,get:function(){return t[i]}}),Object.defineProperty(e,n,s)}:function(e,t,i,n){void 0===n&&(n=i),e[n]=t[i]}),s=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),a=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)"default"!==i&&Object.prototype.hasOwnProperty.call(e,i)&&n(t,e,i);return s(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.LogoTrackingContainer=void 0;const o=a(i(58687)),r=a(i(29172));class l extends o.Container{Logo=null;easing;startPosition=null;startTime=null;duration;visual_box_size=72;StartTracking(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:r.Easing.Linear.None;if(e.IsTracking&&null==this.Logo)throw new Error("Cannot track an instance of OsuLogo to multiple LogoTrackingContainers");this.Logo!=e&&null!=this.Logo&&(this.Logo.IsTracking=!1),this.Logo=e,this.Logo.IsTracking=!0,this.duration=t,this.easing=i,this.startTime=null,this.startPosition=null}StopTracking(){null!=this.Logo&&(this.Logo.IsTracking=!1,this.Logo=null)}ComputeLogoTrackingPosition(){let e=this.Logo.position;return e.x=window.innerWidth/3,e}Update(){this.Logo}}t.LogoTrackingContainer=l},73703:function(e,t,i){var n=this&&this.__createBinding||(Object.create?function(e,t,i,n){void 0===n&&(n=i);var s=Object.getOwnPropertyDescriptor(t,i);s&&!("get"in s?!t.__esModule:s.writable||s.configurable)||(s={enumerable:!0,get:function(){return t[i]}}),Object.defineProperty(e,n,s)}:function(e,t,i,n){void 0===n&&(n=i),e[n]=t[i]}),s=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),a=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)"default"!==i&&Object.prototype.hasOwnProperty.call(e,i)&&n(t,e,i);return s(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.OsuLogo=void 0;const o=a(i(58687)),r=i(44961),l=a(i(29172)),u=i(92915),c=i(3179),d=i(12235),h=i(8211),f=i(9611),g=i(22331),p=i(5825);class m extends o.Container{outline;visualizer=new h.MenuLogoVisualizer;triangles=new r.Triangles;flash;logoContainer=new o.Container;logoBounceContainer=new o.Container;logoBeatContainer=new o.Container;logoAmplitudeContainer=new o.Container;logoHoverContainer=new o.Container;rippleContainer=new o.Container;ripple;defaultVisualizerAlpha=.5;early_activation=60;timeElapsedSinceLastBeat=0;timeUntilNextBeat=0;lastTimeElapasedSinceLastBeat=0;selectSample=d.Loader.GetAudio("mainMenu.osuLogo.select");backToLogoSample=d.Loader.GetAudio("mainMenu.osuLogo.backToLogo");isMouseDown=!1;mouseDownPosition={x:0,y:0};Action=null;IsTracking=!1;get SizeForFlow(){return this.outline.width*this.logoBounceContainer.scale.x*this.logoHoverContainer.scale.x}constructor(){super(),this.visualizer.start(),this.outline=o.Sprite.from("mainMenu.logoOutline"),this.outline.anchor.set(.5,.5);let e=.7;this.visualizer.scale.set(.75),this.visualizer.pivot.set(f.LogoVisualizer.size/2,f.LogoVisualizer.size/2),this.visualizer.alpha=this.defaultVisualizerAlpha;let t=new o.Graphics;t.circle(0,0,450),t.fill({color:"white"}),t.scale=e,this.flash=o.Sprite.from("mainMenu.logoMask"),this.flash.anchor.set(.5,.5),this.flash.scale=e,this.flash.blendMode="add",this.flash.alpha=0,this.triangles.flash.anchor.set(.5,.5),this.triangles.flash.scale=e,this.outline.scale.set(e),this.triangles.scale.set(e),this.triangles.position.set(-this.outline.width/2,-this.outline.height/2),this.triangles.mask=t,this.ripple=o.Sprite.from("mainMenu.logoMask"),this.ripple.anchor.set(.5,.5),this.ripple.scale=e,this.ripple.alpha=0,this.ripple.blendMode="add",this.rippleContainer.addChild(this.ripple),this.logoContainer.addChild(this.visualizer),this.logoContainer.addChild(this.triangles),this.logoContainer.addChild(this.triangles.flash),this.logoContainer.addChild(t),this.logoContainer.addChild(this.flash),this.logoContainer.addChild(this.outline),this.logoContainer.hitArea=new o.Circle(0,0,336),this.logoContainer.eventMode="static",this.logoContainer.onmouseenter=this._onmouseenter,this.logoContainer.onmouseleave=this._onmouseleave,this.logoContainer.onmousedown=this._onmousedown,this.logoContainer.onclick=this._onclick,this.logoBeatContainer.addChild(this.logoContainer),this.logoAmplitudeContainer.addChild(this.logoBeatContainer),this.logoBounceContainer.addChild(this.rippleContainer),this.logoBounceContainer.addChild(this.logoAmplitudeContainer),this.logoHoverContainer.addChild(this.logoBounceContainer),this.addChild(this.logoHoverContainer),c.Main.app.stage.addEventListener("mouseup",(e=>{this._onmouseup(e)}))}_onmouseenter=e=>{u.Ease.getEase(this.logoHoverContainer).ScaleTo(1.1,500,l.Easing.Elastic.Out)};_onmouseleave=e=>{u.Ease.getEase(this.logoHoverContainer).ScaleTo(1,500,l.Easing.Elastic.Out)};_onmousedown=e=>{this.isMouseDown=!0,u.Ease.getEase(this.logoBounceContainer).ClearEasings().ScaleTo(.9,1e3,l.Easing.Sinusoidal.Out),this.mouseDownPosition={x:c.Main.mousePos.x,y:c.Main.mousePos.y}};_onclick=e=>{this.flash.alpha=.4,u.Ease.getEase(this.flash).ClearEasings().FadeOut(1500,l.Easing.Exponential.Out),this.Action&&this.Action()&&c.Main.AudioEngine.PlayEffect(d.Loader.GetAudio("mainMenu.osuLogo.select"))};_onmouseup=e=>{this.isMouseDown=!1,u.Ease.getEase(this.logoBounceContainer).ClearEasings().ScaleTo(1,500,l.Easing.Elastic.Out).TransformTo({x:0,y:0},800,l.Easing.Elastic.Out)};draw(e){this.visualizer.draw(e),this.triangles.draw(e);let t=c.Main.AudioEngine.GetCurrentPlayingMusic(),i=t.GetCurrentTime(),n=t.beatmap.TimingPoints.GetCurrentUninheritedTimingPoint(i);if(this.timeUntilNextBeat=(n.time-i)%n.beatLength,this.timeUntilNextBeat<=0&&(this.timeUntilNextBeat+=n.beatLength),this.timeElapsedSinceLastBeat=n.beatLength-this.timeUntilNextBeat,c.Main.AudioEngine.useSilentMusic)this.logoAmplitudeContainer.scale=1,this.triangles.Velocity=p.MathUtil.Damp(this.triangles.Velocity,.5,.9,e.deltaMS);else{let i=t.GetMaximumAudioLevel();this.logoAmplitudeContainer.scale.set(p.MathUtil.Damp(this.logoAmplitudeContainer.scale.x,1-.04*Math.max(0,i-.4),.9,e.deltaMS)),this.triangles.Velocity=p.MathUtil.Damp(this.triangles.Velocity,.5*(n.effects==g.Effect.KiaiTime?4:2),.995,e.deltaMS)}if(this.lastTimeElapasedSinceLastBeat>this.timeElapsedSinceLastBeat&&this.onNewBeat(),this.lastTimeElapasedSinceLastBeat=this.timeElapsedSinceLastBeat,this.isMouseDown){let e={x:c.Main.mousePos.x-this.mouseDownPosition.x,y:c.Main.mousePos.y-this.mouseDownPosition.y},t=Math.sqrt(e.x*e.x+e.y*e.y);e.x*=t<=0?0:Math.pow(t,.6)/t,e.y*=t<=0?0:Math.pow(t,.6)/t,this.logoBounceContainer.x=e.x,this.logoBounceContainer.y=e.y}}onNewBeat(){let e=c.Main.AudioEngine.GetCurrentPlayingMusic(),t=e.GetCurrentTime(),i=e.beatmap.TimingPoints.GetCurrentUninheritedTimingPoint(t).beatLength,n=e.beatmap.TimingPoints.GetCurrentTimingPoints(t)[0],s=c.Main.AudioEngine.useSilentMusic?0:e.GetMaximumAudioLevel(),a=Math.min(1,.2+s);u.Ease.getEase(this.logoBeatContainer).ScaleTo(1-.02*a,this.early_activation,l.Easing.Linear.None).Then().ScaleTo(1,2*i,l.Easing.Quintic.Out),this.rippleContainer.scale=1.02,u.Ease.getEase(this.rippleContainer).ClearEasings().ScaleTo(1.02*(1+.04*a),i,l.Easing.Quintic.Out),this.ripple.alpha=.15*a,u.Ease.getEase(this.ripple).ClearEasings().FadeOut(i,l.Easing.Quintic.Out),n.effects==g.Effect.KiaiTime&&(u.Ease.getEase(this.triangles.flash).ClearEasings().FadeTo(.2*a,this.early_activation,l.Easing.Linear.None).Then().FadeTo(0,i,l.Easing.Linear.None),u.Ease.getEase(this.visualizer).ClearEasings().FadeTo(1.8*this.defaultVisualizerAlpha*a,this.early_activation,l.Easing.Linear.None).Then().FadeTo(this.defaultVisualizerAlpha,i,l.Easing.Linear.None)),setTimeout((()=>{this.triangles.Velocity+=a*(n.effects==g.Effect.KiaiTime?6:3)}),60)}}t.OsuLogo=m},44961:function(e,t,i){var n=this&&this.__createBinding||(Object.create?function(e,t,i,n){void 0===n&&(n=i);var s=Object.getOwnPropertyDescriptor(t,i);s&&!("get"in s?!t.__esModule:s.writable||s.configurable)||(s={enumerable:!0,get:function(){return t[i]}}),Object.defineProperty(e,n,s)}:function(e,t,i,n){void 0===n&&(n=i),e[n]=t[i]}),s=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),a=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)"default"!==i&&Object.prototype.hasOwnProperty.call(e,i)&&n(t,e,i);return s(t,e),t},o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.Triangles=void 0;const r=a(i(58687)),l=i(3179),u=o(i(46404)),c=o(i(58689)),d=o(i(61630));class h extends r.Container{flash;Velocity=1;bgGradient;triangles=[];graphics=new r.Graphics;timeSinceLastSpawn=0;instancePositionBuffer;totalTriangles=15;constructor(){super();let e=[16737963,13390473];this.bgGradient=new r.FillGradient(0,0,0,1024),e.forEach(((t,i)=>{const n=i/e.length;this.bgGradient.addColorStop(n,t)}));for(let e=0;e<this.totalTriangles;e++)this.triangles.push({x:this.random(0,1024),y:this.random(0,1024),velocity:this.randVelocity()});this.timeSinceLastSpawn=Date.now(),this.graphics.rect(0,0,1024,1024),this.graphics.fill(this.bgGradient),this.addChild(this.graphics),this.flash=r.Sprite.from("mainMenu.logoMask"),this.flash.alpha=0,this.flash.blendMode="add",this.instancePositionBuffer=new r.Buffer({data:new Float32Array(2*this.totalTriangles),usage:r.BufferUsage.VERTEX|r.BufferUsage.COPY_DST});const t=new r.Color("rgb(182, 52, 111)"),i=new r.Geometry({attributes:{aPosition:[-300,-300,300,-300,300,225,-300,225],aUV:[0,0,1,0,1,1,0,1],aColorTint:[t.red,t.green,t.blue,1,t.red,t.green,t.blue,1,t.red,t.green,t.blue,1,t.red,t.green,t.blue,1],aPositionOffset:{buffer:this.instancePositionBuffer,instance:!0}},indexBuffer:[0,1,2,0,2,3],instanceCount:this.totalTriangles}),n={vertex:u.default,fragment:c.default},s={vertex:{entryPoint:"mainVert",source:d.default},fragment:{entryPoint:"mainFrag",source:d.default}},a=new r.Graphics;a.moveTo(0,0),a.lineTo(-256,512),a.lineTo(256,512),a.lineTo(0,0),a.stroke({color:"white",width:4});const o=l.Main.app.renderer.generateTexture(a),h=r.Shader.from({gl:n,gpu:s,resources:{uTexture:o.source,uSampler:o.source.style,waveUniforms:{time:{value:1,type:"f32"}}}}),f=new r.Mesh({geometry:i,shader:h});this.addChild(f)}destroy(e){super.destroy(e)}draw(e){const t=this.instancePositionBuffer.data;let i=0;for(let n=0;n<this.totalTriangles;n++){const s=this.triangles[n];s.y-=e.deltaTime*this.Velocity*s.velocity*1.2,s.y+100<0&&(s.y=1274),t[i++]=s.x,t[i++]=s.y}this.instancePositionBuffer.update()}random(e,t){return Math.random()*(t-e)+e}randVelocity(){let e=1-this.random(0,1),t=1-this.random(0,1),i=Math.sqrt(-2*Math.log(e))*Math.sin(2*Math.PI*t);return Math.max(.5+.16*i,.1)}}t.Triangles=h},55686:function(e,t,i){var n=this&&this.__createBinding||(Object.create?function(e,t,i,n){void 0===n&&(n=i);var s=Object.getOwnPropertyDescriptor(t,i);s&&!("get"in s?!t.__esModule:s.writable||s.configurable)||(s={enumerable:!0,get:function(){return t[i]}}),Object.defineProperty(e,n,s)}:function(e,t,i,n){void 0===n&&(n=i),e[n]=t[i]}),s=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),a=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)"default"!==i&&Object.prototype.hasOwnProperty.call(e,i)&&n(t,e,i);return s(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.MenuCursor=void 0;const o=a(i(58687)),r=i(3179),l=i(12235),u=i(5825),c=i(84283),d=i(92915),h=a(i(29172));class f extends o.Container{mouseCursor=o.Sprite.from("menu.cursor");mouseCursorAdditive=o.Sprite.from("menu.cursor.additive");mouseContainer=new o.Container;animContainer=new o.Container;animRotationContainer=new o.Container;dragRotationState=g.NotDragging;lastDragRotationState=g.NotDragging;mouseHideContainer=new o.Container;elastic_const2=.075;elastic_const=20.943951023931955;elastic_offset_quarter=Math.pow(2,-10)*Math.sin((.25-this.elastic_const2)*this.elastic_const);posMouseDown={x:0,y:0};mouseIsDown=!1;cursorTapSample=l.Loader.GetAudio("menu.cursor.sample.tap");mouseButtonClicked=-9999;constructor(e){super(),this.updateMouse(),this.mouseContainer.scale.set(.07*c.Screen.getScaleBasedOffScreenSize()),this.mouseCursorAdditive.alpha=0,this.mouseCursorAdditive.blendMode="add",this.mouseCursorAdditive.tint="0xFF66AA",this.mouseContainer.addChild(this.mouseCursor),this.mouseContainer.addChild(this.mouseCursorAdditive),this.animContainer.addChild(this.mouseContainer),this.animRotationContainer.addChild(this.animContainer),this.mouseHideContainer.addChild(this.animRotationContainer),this.addChild(this.mouseHideContainer),e||(this.mouseHideContainer.scale.set(.6),this.mouseHideContainer.alpha=0,this.animRotationContainer.angle=0),this.zIndex=999999,this.eventMode="none",r.Main.app.stage.addChild(this),this.addEventListeners()}addEventListeners(){r.Main.app.stage.addEventListener("mousedown",(e=>{this.mouseButtonClicked=e.button,this.visible&&(this.posMouseDown={x:r.Main.mousePos.x,y:r.Main.mousePos.y},this.mouseIsDown=!0,this.dragRotationState=g.DragStarted,d.Ease.getEase(this.animContainer).ClearEasings().ScaleTo(.9,800,h.Easing.Quintic.Out),d.Ease.getEase(this.mouseCursorAdditive).ClearEasings().FadeIn(800,h.Easing.Quintic.Out),r.Main.AudioEngine.PlayEffect(this.cursorTapSample))})),r.Main.app.stage.addEventListener("mouseup",(e=>{this.visible&&e.button==this.mouseButtonClicked&&(this.mouseIsDown=!1,d.Ease.getEase(this.animContainer).ClearEasings().ScaleTo(1,500,h.Easing.Elastic.Out),d.Ease.getEase(this.mouseCursorAdditive).ClearEasings().FadeOut(500,h.Easing.Quintic.Out),this.dragRotationState!=g.NotDragging&&(this.dragRotationState==g.Rotating&&d.Ease.getEase(this.animRotationContainer).ClearEasings().createTween({value:this.animRotationContainer.angle},{value:0},!0,"angle",800*(.5+Math.abs(this.animRotationContainer.angle/960)),(e=>Math.pow(2,-10*e)*Math.sin((.25*e-this.elastic_const2)*this.elastic_const)+1-this.elastic_offset_quarter*e)),this.dragRotationState=g.NotDragging),r.Main.AudioEngine.PlayEffect(this.cursorTapSample,.8))}))}PopIn(){d.Ease.getEase(this.animRotationContainer).ClearEasings(),this.visible=!0,d.Ease.getEase(this.mouseHideContainer).ClearEasings().FadeIn(250,h.Easing.Quintic.Out).ScaleTo(1,400,h.Easing.Quintic.Out),this.dragRotationState=g.NotDragging}PopOut(){d.Ease.getEase(this.mouseHideContainer).ClearEasings().FadeOut(250,h.Easing.Quintic.Out).ScaleTo(.6,250,h.Easing.Quintic.Out),d.Ease.getEase(this.animRotationContainer).ClearEasings().createTween({value:this.animRotationContainer.angle},{value:0},!0,"angle",400,h.Easing.Quintic.Out),this.dragRotationState=g.NotDragging}updateMouse(){if(this.mouseContainer.scale.set(.07*c.Screen.getScaleBasedOffScreenSize()),this.position.set(r.Main.mousePos.x,r.Main.mousePos.y),this.dragRotationState!=g.NotDragging&&this.visible){let e=Math.sqrt((2^Math.abs(this.posMouseDown.x-r.Main.mousePos.x))+(2^Math.abs(this.posMouseDown.y-r.Main.mousePos.y)));if(this.dragRotationState==g.DragStarted&&e>15&&(this.dragRotationState=g.Rotating,this.lastDragRotationState!=this.dragRotationState&&(this.posMouseDown={x:r.Main.mousePos.x,y:r.Main.mousePos.y})),this.dragRotationState==g.Rotating&&e>0){let e=r.Main.mousePos.x-this.posMouseDown.x,t=r.Main.mousePos.y-this.posMouseDown.y,i=u.MathUtil.RadiansToDegrees(Math.atan2(-e,t))+24.3,n=(i-this.animRotationContainer.angle)%360;n<-180&&(n+=360),n>180&&(n-=360),i=this.animRotationContainer.angle+n,this.animRotationContainer.angle=i,d.Ease.getEase(this.animRotationContainer).createTween({value:this.animRotationContainer.angle},{value:i},!0,"angle",120,h.Easing.Quintic.Out)}}this.lastDragRotationState=this.dragRotationState}}var g;t.MenuCursor=f,function(e){e[e.NotDragging=0]="NotDragging",e[e.DragStarted=1]="DragStarted",e[e.Rotating=2]="Rotating"}(g||(g={}))},67991:function(e,t,i){var n=this&&this.__createBinding||(Object.create?function(e,t,i,n){void 0===n&&(n=i);var s=Object.getOwnPropertyDescriptor(t,i);s&&!("get"in s?!t.__esModule:s.writable||s.configurable)||(s={enumerable:!0,get:function(){return t[i]}}),Object.defineProperty(e,n,s)}:function(e,t,i,n){void 0===n&&(n=i),e[n]=t[i]}),s=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),a=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)"default"!==i&&Object.prototype.hasOwnProperty.call(e,i)&&n(t,e,i);return s(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.BackgroundContainer=t.Background=void 0;const o=a(i(58687)),r=i(92915),l=a(i(29172));class u extends o.Sprite{static fadeOutDuration=800;destroying=!1;constructor(e){super(),this.texture=e,this.visible=!1,this.anchor.set(.5,.5)}show(){this.visible=!0}destroy(e){this.destroying=!0,r.Ease.getEase(this).FadeOut(u.fadeOutDuration,l.Easing.Linear.None).Then((()=>{this.visible=!1,super.destroy(e),this.destroying=!1})),this.zIndex=1}}t.Background=u;class c extends o.Container{destroying=!1;constructor(){super(),this.visible=!1}show(){this.visible=!0;for(let e=0;e<this.children?.length;e++){let t=this.children[e];(t instanceof u||t instanceof c)&&t.show()}}destroy(e){this.destroying=!0;for(let t=0;t<this.children?.length;t++){let i=this.children[t];(i instanceof u||i instanceof c)&&(i.destroyed||i.destroying||i.destroy(e))}setTimeout((()=>{super.destroy(e),this.destroying=!1}),u.fadeOutDuration),this.zIndex=1}}t.BackgroundContainer=c},36721:function(e,t,i){var n=this&&this.__createBinding||(Object.create?function(e,t,i,n){void 0===n&&(n=i);var s=Object.getOwnPropertyDescriptor(t,i);s&&!("get"in s?!t.__esModule:s.writable||s.configurable)||(s={enumerable:!0,get:function(){return t[i]}}),Object.defineProperty(e,n,s)}:function(e,t,i,n){void 0===n&&(n=i),e[n]=t[i]}),s=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),a=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)"default"!==i&&Object.prototype.hasOwnProperty.call(e,i)&&n(t,e,i);return s(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.RandomBackground=void 0;const o=a(i(58687)),r=i(12235),l=i(84283),u=i(3179),c=i(67991),d=i(15041),h=i(5277);class f extends l.Screen{bgContainer=new o.Container;parallaxMultiplier=60;start(){this.bgContainer.pivot.set(.5,.5),this.bgContainer.position.set((u.Main.mousePos.x-this.getScreenWidth()/2)/this.parallaxMultiplier,(u.Main.mousePos.y-this.getScreenHeight()/2)/this.parallaxMultiplier),this.addChild(this.bgContainer),this.newRandomBG(),u.Main.AudioEngine.addMusicChangeEventListener((e=>{let t=e.beatmap.Events.Events.find((e=>{if(e.eventType==d.EventTypes.BACKGROUND)return e})),i=e.beatmap.Events.Events.find((e=>{if(e.eventType==d.EventTypes.VIDEO)return e})),n=new c.BackgroundContainer;if(t&&t.texture&&n.addChild(new c.Background(t.texture)),i&&i.texture){let e=i.texture.source.resource,t=new c.Background(i.texture);n.addChild(t),i.texture.source.resource.startPromise=new Promise((t=>{i.startTime>0?setTimeout((()=>{e.play(),t()}),i.startTime):(e.currentTime=Math.abs(i.startTime)/1e3,e.play(),t())})),e.onended=()=>{t.destroy()}}n.addChild(new h.StoryBoard(e.beatmap,e)),"circle the halls"==e.beatmap.Metadata.Title&&"nekodex"==e.beatmap.Metadata.Artist&&"laser show"==e.beatmap.Metadata.Version&&"pishifat"==e.beatmap.Metadata.Creator&&(t=void 0,i=void 0),(t||i)&&this.setBGContainer(n),t||i||this.newRandomBG()})),this.zIndex=-100}setBG(e){let t=new c.Background(e);if(this.bgContainer.addChild(t),t.show(),0==this.bgContainer.children?.length);else{this.bgContainer.children[0].destroy()}this.onResize()}setBGContainer(e){if(this.bgContainer.addChild(e),e.show(),0==this.bgContainer.children?.length);else{this.bgContainer.children[0].destroy()}this.onResize()}newRandomBG(){let e=r.Loader.seasonalBackgroundsNum>0,t=(i=1,n=e?r.Loader.seasonalBackgroundsNum:r.Loader.defaultBackgroundsNum,Math.round(Math.random()*(n-i)+i));var i,n;this.setBG(o.Texture.from((e?"seasonal_bg":"default_bg")+t))}draw(e){this.bgContainer.position.set((u.Main.mousePos.x-this.getScreenWidth()/2)/this.parallaxMultiplier,(u.Main.mousePos.y-this.getScreenHeight()/2)/this.parallaxMultiplier)}onClose(){return Promise.resolve(this)}onResize(){this.bgContainer.children.forEach((e=>{e instanceof c.BackgroundContainer&&e.children?.forEach((e=>{e instanceof c.Background&&this.resizeSprite(e)})),e instanceof c.Background&&this.resizeSprite(e)}))}resizeSprite(e){let t,i=e.texture.width,n=e.texture.height;t=window.innerWidth>window.innerHeight?window.innerWidth/i:window.innerHeight/n,n*t<window.innerHeight?t=window.innerHeight/n:window.innerWidth,e.scale.set(t+.05),e.position.set(this.getScreenWidth()/2-this.getScreenWidth()/(2*this.parallaxMultiplier),this.getScreenHeight()/2-this.getScreenHeight()/(2*this.parallaxMultiplier))}}t.RandomBackground=f},5277:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.StoryBoard=void 0;const n=i(67991),s=i(3179);class a extends n.BackgroundContainer{beatmap;audio;constructor(e,t){super(),this.interactiveChildren=!1,this.interactive=!1,this.beatmap=e,this.audio=t,s.Main.app.ticker.add(this.Update,this)}Update(){this.audio.GetCurrentTime()}destroy(e){s.Main.app.ticker.remove(this.Update,this),super.destroy(e)}}t.StoryBoard=a},29847:function(e,t,i){var n=this&&this.__createBinding||(Object.create?function(e,t,i,n){void 0===n&&(n=i);var s=Object.getOwnPropertyDescriptor(t,i);s&&!("get"in s?!t.__esModule:s.writable||s.configurable)||(s={enumerable:!0,get:function(){return t[i]}}),Object.defineProperty(e,n,s)}:function(e,t,i,n){void 0===n&&(n=i),e[n]=t[i]}),s=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),a=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)"default"!==i&&Object.prototype.hasOwnProperty.call(e,i)&&n(t,e,i);return s(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.SettingsPane=void 0;const o=a(i(58687)),r=i(92915),l=a(i(29172)),u=i(84283);class c extends o.Container{bg=new o.Graphics;isOpen=!1;constructor(){super(),this.bg.rect(0,0,1,1),this.bg.fill({color:"rgb(20,20,20)"}),this.addChild(this.bg),this.resize()}open(){r.Ease.getEase(this).TransformTo({x:0,y:0},400,l.Easing.Cubic.Out),this.isOpen=!0}toggle(){this.isOpen?this.close():this.open()}close(){r.Ease.getEase(this).TransformTo({x:-this.getWidth(),y:0},400,l.Easing.Cubic.Out),this.isOpen=!1}getWidth(){return 500*u.Screen.getScaleBasedOffScreenSize()}resize(){this.width=this.getWidth(),this.height=window.innerHeight,this.x=this.isOpen?0:-this.getWidth(),this.y=0}}t.SettingsPane=c},12235:function(e,t,i){var n=this&&this.__createBinding||(Object.create?function(e,t,i,n){void 0===n&&(n=i);var s=Object.getOwnPropertyDescriptor(t,i);s&&!("get"in s?!t.__esModule:s.writable||s.configurable)||(s={enumerable:!0,get:function(){return t[i]}}),Object.defineProperty(e,n,s)}:function(e,t,i,n){void 0===n&&(n=i),e[n]=t[i]}),s=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),a=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)"default"!==i&&Object.prototype.hasOwnProperty.call(e,i)&&n(t,e,i);return s(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.Loader=void 0;const o=a(i(58687));t.Loader=class{static loadList=[];static loadedList=[];static defaultBackgroundsNum=8;static seasonalBackgroundsNum=0;static addToLoadList(){this.loadList.push({id:"introTrianglesTrack",url:"assets/osu-assets/osu.Game.Resources/Tracks/triangles.osz"}),this.loadList.push({id:"sample_dialog_ok",url:"assets/osu-assets/osu.Game.Resources/Samples/UI/dialog-ok-select.wav",isAudio:!0}),this.loadList.push({id:"TorusRegular",url:"assets/fonts/TorusRegular.otf",pixiBundleName:"fonts"}),this.loadList.push({id:"TorusLight",url:"assets/fonts/TorusLight.otf",pixiBundleName:"fonts"}),this.loadList.push({id:"TorusThin",url:"assets/fonts/TorusThin.otf",pixiBundleName:"fonts"}),this.loadList.push({id:"icon_ruleset_std",url:"assets/icons/ruleset-standard.png",pixiBundleName:"textures"}),this.loadList.push({id:"icon_ruleset_mania",url:"assets/icons/ruleset-mania.png",pixiBundleName:"textures"}),this.loadList.push({id:"icon_ruleset_taiko",url:"assets/icons/ruleset-taiko.png",pixiBundleName:"textures"}),this.loadList.push({id:"icon_ruleset_ctb",url:"assets/icons/ruleset-ctb.png",pixiBundleName:"textures"}),this.loadList.push({id:"intro_triangles_osuLogo_anim_highlight",url:"assets/osu-assets/osu.Game.Resources/Textures/Intro/Triangles/logo-highlight.png",pixiBundleName:"textures"}),this.loadList.push({id:"intro_triangles_osuLogo_anim_background",url:"assets/osu-assets/osu.Game.Resources/Textures/Intro/Triangles/logo-background.png",pixiBundleName:"textures"}),this.loadList.push({id:"mainMenu.logoOutline",url:"assets/osu-assets/osu.Game.Resources/Textures/Menu/logo.png",pixiBundleName:"textures"}),this.loadList.push({id:"mainMenu.logoMask",url:"assets/menu/logo-mask.png",pixiBundleName:"textures"}),this.loadList.push({id:"mainMenu.osuLogo.select",url:"assets/osu-assets/osu.Game.Resources/Samples/Menu/osu-logo-select.wav",isAudio:!0}),this.loadList.push({id:"mainMenu.osuLogo.backToLogo",url:"assets/osu-assets/osu.Game.Resources/Samples/Menu/back-to-logo.wav",isAudio:!0}),this.loadList.push({id:"menu.cursor",url:"assets/osu-assets/osu.Game.Resources/Textures/Cursor/menu-cursor.png",pixiBundleName:"textures"}),this.loadList.push({id:"menu.cursor.additive",url:"assets/osu-assets/osu.Game.Resources/Textures/Cursor/menu-cursor-additive.png",pixiBundleName:"textures"}),this.loadList.push({id:"menu.cursor.sample.tap",url:"assets/osu-assets/osu.Game.Resources/Samples/UI/cursor-tap.wav",isAudio:!0}),this.loadList.push({id:"menu.kiaiFountains.star",url:"assets/osu-assets/osu.Game.Resources/Textures/Menu/fountain-star.png",pixiBundleName:"textures"}),this.loadList.push({id:"workers.ffmpeg",url:"assets/workers/814.ffmpeg.js"}),this.loadList.push({id:"ffmpeg.core",url:"https://unpkg.com/@ffmpeg/core-mt@0.12.6/dist/esm/ffmpeg-core.js"}),this.loadList.push({id:"ffmpeg.wasm",url:"https://unpkg.com/@ffmpeg/core-mt@0.12.6/dist/esm/ffmpeg-core.wasm"}),this.loadList.push({id:"ffmpeg.coreWorker",url:"https://unpkg.com/@ffmpeg/core-mt@0.12.6/dist/esm/ffmpeg-core.worker.js"})}static Get(e){let t;if(this.loadedList.forEach((i=>{i.id==e&&(t=i.data)})),!t)throw new Error("Asset not found!");return t}static GetString(e){let t;if(this.loadedList.forEach((i=>{i.id==e&&(t=i.dataString)})),!t)throw new Error("Asset not found or is not a string!");return t}static GetAudio(e){let t;if(this.loadedList.forEach((i=>{i.id==e&&(t=i.dataAudio)})),!t)throw new Error("Asset not found or was not marked as audio during loading!");return t}static addBackgrounds(){return new Promise((e=>{for(let e=1;e<this.defaultBackgroundsNum+1;e++)this.loadList.push({id:"default_bg"+e,url:"assets/osu-assets/osu.Game.Resources/Textures/Menu/menu-background-"+e+".jpg",pixiBundleName:"textures"});fetch("https://corsproxy.io/?url="+encodeURIComponent("https://osu.ppy.sh/api/v2/seasonal-backgrounds")).then((e=>e.json())).then((t=>{t.backgrounds.forEach(((e,t)=>{this.loadList.push({id:"seasonal_bg"+(t+1),url:"https://corsproxy.io/?url="+encodeURIComponent(e.url),pixiBundleName:"textures",loadParser:"loadTextures"}),this.seasonalBackgroundsNum=t+1})),e()})).catch((t=>{console.warn("Could not fetch seasonal backgrounds.",t),e()}))}))}static Load(e){return this.addToLoadList(),new Promise((t=>{this.addBackgrounds().then((()=>{let i=[],n=[],s=[],a=0,r=0;this.loadList.forEach((e=>{e.pixiBundleName?n.push(e):i.push(e)})),n.forEach((e=>{let t=!1;s.forEach((i=>{i.length>0&&i[0].pixiBundleName==e.pixiBundleName&&(i.push(e),t=!0)})),t||s.push([e])}));const l=e=>{e?r++:a++,r+a>=this.loadList.length&&t()};i.forEach((t=>{fetch(t.url).then((e=>e.blob())).then((i=>{t.isText||t.isAudio?t.isText?i.text().then((e=>{l(),this.loadedList.push({id:t.id,data:i,dataString:e})})):t.isAudio&&i.arrayBuffer().then((t=>e.decodeAudioData(t))).then((e=>{l(),this.loadedList.push({id:t.id,data:i,dataAudio:e})})):(l(),this.loadedList.push({id:t.id,data:i}))})).catch((e=>{l(!0),console.warn("Asset '"+t.id+"' failed to load: "+e)}))})),s.forEach((e=>{if(e.length>0){if(!e[0].pixiBundleName)throw new Error("wtf????");let t=[];e.forEach((e=>{e.loadParser?t.push({alias:e.id,src:e.url,loadParser:e.loadParser}):t.push({alias:e.id,src:e.url})})),o.Assets.addBundle(e[0].pixiBundleName,t),o.Assets.loadBundle(e[0].pixiBundleName).then((()=>{e.forEach((()=>{l()}))}))}}))}))}))}}},3179:function(e,t,i){var n=this&&this.__createBinding||(Object.create?function(e,t,i,n){void 0===n&&(n=i);var s=Object.getOwnPropertyDescriptor(t,i);s&&!("get"in s?!t.__esModule:s.writable||s.configurable)||(s={enumerable:!0,get:function(){return t[i]}}),Object.defineProperty(e,n,s)}:function(e,t,i,n){void 0===n&&(n=i),e[n]=t[i]}),s=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),a=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)"default"!==i&&Object.prototype.hasOwnProperty.call(e,i)&&n(t,e,i);return s(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.Main=void 0;const o=a(i(58687)),r=i(76969),l=i(25373),u=i(12235),c=i(55686),d=i(85437),h=a(i(29172)),f=i(29847),g=i(53931),p=i(9752),m=i(17898);class v{static app;static mousePos={x:0,y:0};static pointerLockExitTime;static cursor;static AudioEngine;static currentScreen;static allScreens=[];static clickArea=new o.Graphics;static doPointerLock=!1;static settingsPane;static processingOsuFile=!1;constructor(e){v.app=e,v.setDropEvents(),document.body.appendChild(v.app.canvas),v.settingsPane=new f.SettingsPane,v.settingsPane.zIndex=999998,v.app.stage.addChild(v.settingsPane),document.addEventListener("keydown",(e=>{e.ctrlKey&&"KeyO"==e.code&&v.settingsPane.toggle()})),this.doResize(),window.addEventListener("resize",this.doResize),v.app.ticker.add((()=>{h.update()})),v.app.stage.eventMode="static",v.AudioEngine=new d.AudioEngine,v.app.stage.addEventListener("mousemove",(e=>{v.mousePos.x=e.clientX,v.mousePos.y=e.clientY,v.cursor&&v.cursor.updateMouse()})),document.addEventListener("pointerlockchange",this.pointerLockChanged,!1),v.switchScreen(new r.LoadScreen),u.Loader.Load(v.AudioEngine.audioContext).then((()=>{v.cursor=new c.MenuCursor(!1);let e=u.Loader.GetAudio("sample_dialog_ok"),t=u.Loader.Get("introTrianglesTrack");v.switchScreen(new l.InteractScreen(t,e))}))}static setDropEvents(){Object.defineProperty(window,"onDropEvent",{value:e=>{if(e.preventDefault(),v.processingOsuFile)alert("Another BeatMap is still processing. (Most likely transcoding a .avi file, check the console for progress) Please wait for it to process and start playing before processing another one!");else if(v.processingOsuFile=!0,e.dataTransfer.items){let t=[...e.dataTransfer.items][0];if("file"==t.kind){const e=t.getAsFile();(0,g.unzip)(e).then((e=>{let{entries:t}=e;for(const[e,i]of Object.entries(t))if(e.endsWith(".osu")){i.text().then((async e=>{let i,n=new m.BeatmapData;await new Promise((e=>{for(const[i,s]of Object.entries(t))s.blob().then((s=>{n.files.set(i,s),n.files.size==Object.entries(t).length&&e()}))}));for(const[e,t]of n.files.entries())e.endsWith(".osb")&&(i=await t.text());p.BeatmapParser.Parse(e,n,i),await p.BeatmapParser.LoadFiles(n,v.AudioEngine);let s=n.General.audioFile;if(s){let e=URL.createObjectURL(s);v.AudioEngine.PlayMusicImmediately(e,n,(()=>{console.log("Now playing "+n.Metadata.TitleUnicode+" - "+n.Metadata.ArtistUnicode+" ("+n.Metadata.Title+" - "+n.Metadata.Artist+")")}))}v.processingOsuFile=!1,console.log(n)}));break}}))}}}}),Object.defineProperty(window,"onDragEvent",{value:e=>{e.preventDefault()}}),v.app.canvas.setAttribute("ondrop","window.onDropEvent(event);"),v.app.canvas.setAttribute("ondragover","window.onDragEvent(event);")}static lockKeyboard(){navigator.keyboard&&navigator.keyboard.lock([]).then((()=>{console.log("Locked keyboard!"),document.fullscreenElement||console.warn("Keyboard lock won't work unless the user is in fullscreen (as requested by the game, not if the user just presses F11)!")}))}static pointerLock(){try{this.doPointerLock=!0,v.app.canvas.requestPointerLock({unadjustedMovement:!0})}catch(e){console.warn("Failed to lock cursor, error:",e),this.doPointerLock=!1}}static exitPointerLock(){this.doPointerLock=!1,v.app.canvas.exitPointerLock()}static switchScreen(e){null!=this.currentScreen&&(this.currentScreen.zIndex=1,this.currentScreen.onClose().then((e=>{for(let t=0;t<this.allScreens.length;t++)this.allScreens[t]==e&&this.allScreens.splice(t,1);v.app.ticker.remove(e.draw),v.app.stage.removeChild(e),e.destroy()}))),v.app.stage.addChild(e),this.allScreens.push(e),this.currentScreen=e,e.start(),e.onResize(),v.app.ticker.add(e.draw,e)}doResize(){v.app.renderer.resize(window.innerWidth,window.innerHeight),v.app.stage.scale.x=1,v.app.stage.scale.y=1,v.clickArea.destroyed||(v.clickArea.width=window.innerWidth,v.clickArea.height=window.innerHeight,v.clickArea.position.set(0,0)),v.allScreens.forEach((e=>{e.onResize()})),v.settingsPane.resize()}pointerLockChanged(){!document.pointerLockElement&&v.doPointerLock?(o.EventSystem.isPointerLocked=!1,v.pointerLockExitTime=Date.now(),v.clickArea=new o.Graphics,v.clickArea.rect(0,0,1,1),v.clickArea.fill("rgba(0,0,0,0.1)"),v.clickArea.width=window.innerWidth,v.clickArea.height=window.innerHeight,v.clickArea.position.set(0,0),v.app.stage.addChild(v.clickArea),v.clickArea.eventMode="static",v.clickArea.cursor="pointer",v.cursor.PopOut(),v.clickArea.zIndex=9999999,v.clickArea.onclick=()=>{Date.now()-v.pointerLockExitTime<1500||(v.clickArea.removeFromParent(),v.clickArea.destroy(),v.pointerLock(),v.cursor.PopIn())}):o.EventSystem.isPointerLocked=!0}}t.Main=v},25373:function(e,t,i){var n=this&&this.__createBinding||(Object.create?function(e,t,i,n){void 0===n&&(n=i);var s=Object.getOwnPropertyDescriptor(t,i);s&&!("get"in s?!t.__esModule:s.writable||s.configurable)||(s={enumerable:!0,get:function(){return t[i]}}),Object.defineProperty(e,n,s)}:function(e,t,i,n){void 0===n&&(n=i),e[n]=t[i]}),s=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),a=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)"default"!==i&&Object.prototype.hasOwnProperty.call(e,i)&&n(t,e,i);return s(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.InteractScreen=void 0;const o=i(84283),r=a(i(58687)),l=i(3179),u=i(94433),c=a(i(29172)),d=i(92915);class h extends o.Screen{text;text2;textContainer=new r.Container;textContainerContainer=new r.Container;introTrack;clickSound;clickArea=new r.Graphics;constructor(e,t){super(),this.introTrack=e,this.clickSound=t,this.text=new r.Text({text:"Click anywhere to play!",style:{fontFamily:"TorusRegular",fontSize:36,fill:"white"}}),this.text2=new r.Text({text:"(this is for enabling audio because it's required by web-browsers\n to have interaction on this webpage before playing audio.)",style:{fontFamily:"TorusRegular",fontSize:26,fill:"gray",align:"center"}})}start(){this.text.anchor.set(.5,.5),this.text2.anchor.set(.5,.5),this.text2.position.set(0,this.text.height+15),this.textContainer.addChild(this.text),this.textContainer.addChild(this.text2),this.textContainer.scale.set(.5),this.textContainer.alpha=0,this.textContainerContainer.addChild(this.textContainer),this.textContainerContainer.scale=o.Screen.getScaleBasedOffScreenSize(),this.textContainerContainer.position.set(this.getScreenWidth()/2,this.getScreenHeight()/2),this.addChild(this.textContainerContainer),this.clickArea.rect(0,0,1,1),this.clickArea.fill("rgba(0,0,0,0)"),this.clickArea.width=this.getScreenWidth(),this.clickArea.height=this.getScreenHeight(),this.clickArea.position.set(0,0),this.addChild(this.clickArea),this.clickArea.eventMode="static",this.clickArea.cursor="pointer";const e=()=>{this.clickArea.eventMode="none",l.Main.AudioEngine.PlayEffect(this.clickSound),l.Main.switchScreen(new u.IntroScreen(this.introTrack)),document.body.style.cursor="none",l.Main.pointerLock(),l.Main.lockKeyboard()};this.clickArea.onclick=()=>{e()},this.clickArea.ontap=()=>{e()},d.Ease.getEase(this.textContainer).FadeIn(400,c.Easing.Quadratic.Out).ScaleTo(1,400,c.Easing.Quadratic.Out)}onClose(){return new Promise((e=>{d.Ease.getEase(this.textContainer).FadeOut(200,c.Easing.Quadratic.Out).ScaleTo(.5,200,c.Easing.Quadratic.InOut),setTimeout((()=>{e(this)}),200)}))}draw(e){}onResize(){this.textContainerContainer.position.set(this.getScreenWidth()/2,this.getScreenHeight()/2),this.clickArea.width=this.getScreenWidth(),this.clickArea.height=this.getScreenHeight(),this.clickArea.position.set(0,0),this.textContainerContainer.scale=o.Screen.getScaleBasedOffScreenSize()}}t.InteractScreen=h},88662:function(e,t,i){var n=this&&this.__createBinding||(Object.create?function(e,t,i,n){void 0===n&&(n=i);var s=Object.getOwnPropertyDescriptor(t,i);s&&!("get"in s?!t.__esModule:s.writable||s.configurable)||(s={enumerable:!0,get:function(){return t[i]}}),Object.defineProperty(e,n,s)}:function(e,t,i,n){void 0===n&&(n=i),e[n]=t[i]}),s=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),a=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)"default"!==i&&Object.prototype.hasOwnProperty.call(e,i)&&n(t,e,i);return s(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.GlitchingTriangles=void 0;const o=a(i(58687)),r=i(92915),l=a(i(29172));class u extends o.Container{constructor(e){super();let t=new o.Graphics,i=n(.2,1.2);function n(e,t){return Math.random()*(t-e)+e}t.moveTo(0,0),t.lineTo(-50*i,100*i),t.lineTo(50*i,100*i),t.lineTo(0,0),Math.random()<.5?t.fill("white"):t.stroke({color:"white",width:1});let s=n(e.x1,e.x2),a=n(e.y1,e.y2);t.position.set(s,a),r.Ease.getEase(t,!0).FadeOut(200,l.Easing.Linear.None),setTimeout((()=>{this.destroy()}),200),this.addChild(t)}}t.GlitchingTriangles=u},94433:function(e,t,i){var n=this&&this.__createBinding||(Object.create?function(e,t,i,n){void 0===n&&(n=i);var s=Object.getOwnPropertyDescriptor(t,i);s&&!("get"in s?!t.__esModule:s.writable||s.configurable)||(s={enumerable:!0,get:function(){return t[i]}}),Object.defineProperty(e,n,s)}:function(e,t,i,n){void 0===n&&(n=i),e[n]=t[i]}),s=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),a=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)"default"!==i&&Object.prototype.hasOwnProperty.call(e,i)&&n(t,e,i);return s(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.IntroScreen=void 0;const o=i(84283),r=a(i(58687)),l=i(53931),u=i(3179),c=i(88662),d=i(58940),h=i(55402),f=i(9752),g=a(i(29172)),p=i(92915),m=i(5168),v=i(94461),b=i(17898);class y extends o.Screen{introTrackUrl;doTextSpacingAnim=!1;triangles=new r.Container;ruleSetContainer=new r.Container;ruleSetList=new v.CenteredList({});flash=new r.Graphics;logoContainerContainer=new r.Container;logoContainer=new r.Container;lazerLogo=new h.LazerLogo;flashed=!1;standard=r.Sprite.from("icon_ruleset_std");taiko=r.Sprite.from("icon_ruleset_taiko");ctb=r.Sprite.from("icon_ruleset_ctb");mania=r.Sprite.from("icon_ruleset_mania");bg=new r.Graphics;completionPromise;welcomeText=new r.Text({text:"",style:{fontFamily:"TorusThin",fontSize:42,fill:"white",letterSpacing:5}});constructor(e){super(),this.introTrackUrl=URL.createObjectURL(e),this.bg.rect(0,0,1,1),this.bg.fill("black")}start(){this.bg.width=window.innerWidth,this.bg.height=window.innerHeight,this.bg.x=0,this.bg.y=0,this.addChild(this.bg),this.lazerLogo.scale.set(o.Screen.getScaleBasedOffScreenSize()),this.logoContainer.addChild(this.lazerLogo),this.logoContainer.scale.set(1.2),this.logoContainerContainer.position.set(this.getScreenWidth()/2,this.getScreenHeight()/2),this.logoContainerContainer.pivot.set(.5,.5),this.logoContainerContainer.addChild(this.logoContainer),this.logoContainerContainer.alpha=0,this.addChild(this.logoContainerContainer),this.flash.rect(0,0,1,1),this.flash.fill("white"),this.flash.position.set(0,0),this.flash.width=this.getScreenWidth(),this.flash.height=this.getScreenHeight(),this.flash.blendMode="add",this.welcomeText.anchor.set(.5,.5),this.welcomeText.position.set(this.getScreenWidth()/2,this.getScreenHeight()/2),(async()=>{const{entries:e}=await(0,l.unzip)(this.introTrackUrl);for(const[t,i]of Object.entries(e))if(t.endsWith(".osu")){i.text().then((async t=>{let i,n=new b.BeatmapData;await new Promise((t=>{for(const[i,s]of Object.entries(e))s.blob().then((s=>{n.files.set(i,s),n.files.size==Object.entries(e).length&&t()}))}));for(const[e,t]of n.files.entries())e.endsWith(".osb")&&(i=await t.text());f.BeatmapParser.Parse(t,n,i),await f.BeatmapParser.LoadFiles(n,u.Main.AudioEngine);let s=n.General.audioFile;if(s){let e=URL.createObjectURL(s);setTimeout((()=>{u.Main.AudioEngine.PlayMusicImmediately(e,n,(()=>{this.afterAudioPlay()}))}),200)}console.log(n)}));break}})()}afterAudioPlay(){this.completionPromise=new Promise((e=>{let t;this.welcomeText.scale.set(o.Screen.getScaleBasedOffScreenSize()),this.addChild(this.welcomeText),setTimeout((()=>{this.welcomeText.text="wel",this.onResize()}),200),setTimeout((()=>{this.welcomeText.text="welcome",this.onResize()}),400),setTimeout((()=>{this.welcomeText.text="welcome to",this.onResize()}),700),this.triangles.position.set(this.getScreenWidth()/2,this.getScreenHeight()/2),this.triangles.scale.set(o.Screen.getScaleBasedOffScreenSize()),this.addChild(this.triangles),setTimeout((()=>{this.welcomeText.text="welcome to kosu!",this.doTextSpacingAnim=!0,t=setInterval((()=>{let e=new c.GlitchingTriangles({x1:-this.welcomeText.width/2-100,x2:this.welcomeText.width/2+100,y1:-this.welcomeText.height/2-150,y2:this.welcomeText.height/2+100});this.triangles.addChild(e)}),30),this.onResize()}),900),this.standard.scale=.5*o.Screen.getScaleBasedOffScreenSize(),this.ctb.scale=.5*o.Screen.getScaleBasedOffScreenSize(),this.mania.scale=.5*o.Screen.getScaleBasedOffScreenSize(),this.taiko.scale=.5*o.Screen.getScaleBasedOffScreenSize(),this.ruleSetList.addChild(this.standard),this.ruleSetList.addChild(this.taiko),this.ruleSetList.addChild(this.ctb),this.ruleSetList.addChild(this.mania),this.ruleSetList.padding=0,this.ruleSetList.elementsMargin=200*o.Screen.getScaleBasedOffScreenSize(),this.ruleSetList.type="horizontal",this.ruleSetList.scale=1,this.ruleSetContainer.addChild(this.ruleSetList),setTimeout((()=>{this.doTextSpacingAnim=!1,this.onResize(),clearInterval(t),this.welcomeText.destroy(),this.triangles.destroy(),this.ruleSetContainer.position.set(this.getScreenWidth()/2,this.getScreenHeight()/2),this.addChild(this.ruleSetContainer),this.ruleSetList.elementsMargin=200*o.Screen.getScaleBasedOffScreenSize(),p.Ease.getEase(this.ruleSetContainer).ScaleTo(.8,1e3,g.Easing.Linear.None)}),1450),setTimeout((()=>{this.ruleSetList.elementsMargin=30*o.Screen.getScaleBasedOffScreenSize(),this.ruleSetList.scale=2,m.UIUtils.centerPivotOfList(this.ruleSetList)}),1650),setTimeout((()=>{this.ruleSetList.elementsMargin=10*o.Screen.getScaleBasedOffScreenSize(),this.ruleSetList.scale=4,p.Ease.getEase(this.ruleSetContainer).ScaleTo(1.3,1e3,g.Easing.Linear.None)}),1850),setTimeout((()=>{this.ruleSetContainer.destroy(),this.lazerLogo.start(),this.logoContainerContainer.alpha=1,this.logoContainerContainer.scale.set(1.2),p.Ease.getEase(this.logoContainerContainer).ScaleTo(1,920,g.Easing.Quadratic.In),setTimeout((()=>{p.Ease.getEase(this.logoContainer).ScaleTo(1.2-.8,276,g.Easing.Quintic.In)}),644)}),2080),setTimeout((()=>{this.addChild(this.flash),this.bg.destroy(),this.flash.eventMode="none",this.flashed=!0,this.logoContainerContainer.visible=!1,p.Ease.getEase(this.flash).FadeOut(1e3,g.Easing.Quadratic.Out).Then((()=>{e()})),u.Main.cursor.PopIn()}),3e3)})),u.Main.switchScreen(new d.MainMenu)}draw(e){this.doTextSpacingAnim&&(this.welcomeText.style.letterSpacing+=.15*e.deltaTime,this.onResize())}onClose(){return new Promise((e=>{this.completionPromise.then((()=>{e(this)}))}))}onResize(){this.bg.destroyed||(this.bg.width=window.innerWidth,this.bg.height=window.innerHeight,this.bg.x=0,this.bg.y=0),this.welcomeText.destroyed||this.welcomeText.position.set(this.getScreenWidth()/2,this.getScreenHeight()/2),this.triangles.destroyed||(this.triangles.position.set(this.getScreenWidth()/2,this.getScreenHeight()/2),this.triangles.scale.set(o.Screen.getScaleBasedOffScreenSize())),this.ruleSetContainer.destroyed||this.ruleSetContainer.position.set(this.getScreenWidth()/2,this.getScreenHeight()/2),this.flash.destroyed||(this.flash.position.set(0,0),this.flash.width=this.getScreenWidth(),this.flash.height=this.getScreenHeight()),this.logoContainerContainer.destroyed||this.logoContainerContainer.position.set(this.getScreenWidth()/2,this.getScreenHeight()/2),this.lazerLogo.destroyed||this.lazerLogo.scale.set(o.Screen.getScaleBasedOffScreenSize()),this.welcomeText.destroyed||this.welcomeText.scale.set(o.Screen.getScaleBasedOffScreenSize()),this.standard.destroyed||this.standard.scale.set(.5*o.Screen.getScaleBasedOffScreenSize()),this.mania.destroyed||this.mania.scale.set(.5*o.Screen.getScaleBasedOffScreenSize()),this.ctb.destroyed||this.ctb.scale.set(.5*o.Screen.getScaleBasedOffScreenSize()),this.taiko.destroyed||this.taiko.scale.set(.5*o.Screen.getScaleBasedOffScreenSize()),this.ruleSetList.destroyed||this.ruleSetList.ReCenter()}}t.IntroScreen=y},55402:function(e,t,i){var n=this&&this.__createBinding||(Object.create?function(e,t,i,n){void 0===n&&(n=i);var s=Object.getOwnPropertyDescriptor(t,i);s&&!("get"in s?!t.__esModule:s.writable||s.configurable)||(s={enumerable:!0,get:function(){return t[i]}}),Object.defineProperty(e,n,s)}:function(e,t,i,n){void 0===n&&(n=i),e[n]=t[i]}),s=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),a=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)"default"!==i&&Object.prototype.hasOwnProperty.call(e,i)&&n(t,e,i);return s(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.LazerLogo=void 0;const o=a(i(58687)),r=i(87525),l=a(i(29172)),u=i(92915);class c extends o.Container{highlight;background;textureHighlight=o.Texture.from("intro_triangles_osuLogo_anim_highlight");textureBackground=o.Texture.from("intro_triangles_osuLogo_anim_background");constructor(){super(),this.highlight=new r.LogoAnimation(this.textureHighlight,new o.Color("white")),this.background=new r.LogoAnimation(this.textureBackground,new o.Color("rgb(128, 128, 128)")),this.addChild(this.highlight),this.addChild(this.background)}start(){let e=new o.Container;e.scale.set(0,0),u.Ease.getEase(e).ScaleTo(1,920,l.Easing.Linear.None).OnEach((()=>{this.highlight.setProgress(e.scale.x),this.background.setProgress(e.scale.x)}))}}t.LazerLogo=c},87525:function(e,t,i){var n=this&&this.__createBinding||(Object.create?function(e,t,i,n){void 0===n&&(n=i);var s=Object.getOwnPropertyDescriptor(t,i);s&&!("get"in s?!t.__esModule:s.writable||s.configurable)||(s={enumerable:!0,get:function(){return t[i]}}),Object.defineProperty(e,n,s)}:function(e,t,i,n){void 0===n&&(n=i),e[n]=t[i]}),s=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),a=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)"default"!==i&&Object.prototype.hasOwnProperty.call(e,i)&&n(t,e,i);return s(t,e),t},o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.LogoAnimation=void 0;const r=a(i(58687)),l=o(i(26045)),u=o(i(44160)),c=o(i(46110));class d extends r.Container{shader;texture;constructor(e,t){super(),this.texture=e,this.shader=r.Shader.from({gl:{vertex:l.default,fragment:u.default},gpu:{vertex:{entryPoint:"mainVert",source:c.default},fragment:{entryPoint:"mainFrag",source:c.default}},resources:{uTexture:this.texture.source,uSampler:this.texture.source.style,uProgress:{progress:{value:0,type:"f32"}}}});const i=new r.Geometry({attributes:{aPosition:[-this.texture.width/2,-this.texture.height/2,this.texture.width/2,-this.texture.height/2,this.texture.width/2,this.texture.width/2,-this.texture.width/2,this.texture.width/2],aUV:[0,0,1,0,1,1,0,1],aColor:[t.red,t.green,t.blue,t.alpha,t.red,t.green,t.blue,t.alpha,t.red,t.green,t.blue,t.alpha,t.red,t.green,t.blue,t.alpha]},indexBuffer:[0,1,2,0,2,3]}),n=new r.Mesh({geometry:i,shader:this.shader});this.addChild(n)}setProgress(e){this.shader.resources.uProgress.uniforms.progress=e}}t.LogoAnimation=d},76969:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.LoadScreen=void 0;const n=i(84283),s=i(49323);class a extends n.Screen{loadAnim=new s.LoadAnim("rgba(255,255,255,0.7)","black");start(){this.loadAnim.scale.set(.8*n.Screen.getScaleBasedOffScreenSize()),this.loadAnim.position.set(this.getScreenWidth()-this.loadAnim.getWidth()-15,this.getScreenHeight()-this.loadAnim.getHeight()-15),this.addChild(this.loadAnim)}draw(e){this.loadAnim?.draw(e)}onClose(){return new Promise((e=>{null!=this.loadAnim&&this.loadAnim.destroy(),setTimeout((()=>{e(this)}),400)}))}onResize(){this.loadAnim.position.set(this.getScreenWidth()-this.loadAnim.getWidth()-20,this.getScreenHeight()-this.loadAnim.getHeight()-20),this.loadAnim.scale.set(.8*n.Screen.getScaleBasedOffScreenSize())}}t.LoadScreen=a},58940:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.MainMenu=void 0;const n=i(84283),s=i(36721),a=i(73703),o=i(70723);class r extends n.Screen{bg=new s.RandomBackground;osuCircle=new a.OsuLogo;menu=new o.ButtonSystem(this.osuCircle);start(){this.bg.start(),this.addChild(this.bg),this.osuCircle.scale=n.Screen.getScaleBasedOffScreenSize(),this.addChild(this.menu),this.menu.onResize(),this.addChild(this.osuCircle)}draw(e){this.bg.draw(e),this.osuCircle.draw(e)}onClose(){return new Promise((e=>{this.bg.onClose().then((()=>{e(this)}))}))}onResize(){this.osuCircle.position.set(this.getScreenWidth()/2,this.getScreenHeight()/2),this.bg.onResize(),this.menu.onResize(),this.osuCircle.scale=this.menu.isOpen()?.5*n.Screen.getScaleBasedOffScreenSize():n.Screen.getScaleBasedOffScreenSize()}}t.MainMenu=r},84283:function(e,t,i){var n=this&&this.__createBinding||(Object.create?function(e,t,i,n){void 0===n&&(n=i);var s=Object.getOwnPropertyDescriptor(t,i);s&&!("get"in s?!t.__esModule:s.writable||s.configurable)||(s={enumerable:!0,get:function(){return t[i]}}),Object.defineProperty(e,n,s)}:function(e,t,i,n){void 0===n&&(n=i),e[n]=t[i]}),s=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),a=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)"default"!==i&&Object.prototype.hasOwnProperty.call(e,i)&&n(t,e,i);return s(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.Screen=void 0;const o=a(i(58687)),r=i(58293),l=i(64681);class u extends o.Container{constructor(){super()}static getScaleBasedOffScreenSize(){const e=r.Settings.getSetting(l.UIScale).getValue();return(window.innerWidth/1920+window.innerHeight/1080)/2*e}getScreenWidth(){return window.innerWidth}getScreenHeight(){return window.innerHeight}}t.Screen=u},75341:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.SettingsCategory=t.Setting=void 0;const n=i(58293);var s;t.Setting=class{info;constructor(e){this.info=e,n.Settings.register({setting:this,info:e})}onValueChanged(){}},function(e){e.General="General",e.Skin="Skin",e.Input="Input",e.UserInterface="User Interface",e.Gameplay="Gameplay",e.Rulesets="Rulesets",e.Audio="Audio",e.Graphics="Graphics",e.Online="Online",e.Maintenance="Maintenance",e.Debug="Debug"}(s||(t.SettingsCategory=s={}))},74975:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.DropdownSetting=void 0;const n=i(75341),s=i(58293);class a extends n.Setting{value;getValue(){if(!this.value)throw new Error("Value is undefined!");return this.value}getDefaultValue(){return this.defaultValue}setValue(e){this.list.find((t=>t.value==e.value&&t.displayName==e.displayName))?(this.value=e,s.Settings.save(),this.onValueChanged()):console.warn("The value provided to this DropDownSetting does not exist in the option list! Ignoring value provided.")}loadFromSaveValue(e){this.list.find((t=>t.value==e.value&&t.displayName==e.displayName))?(this.value=e,this.onValueChanged()):console.warn("The value provided to this DropDownSetting does not exist in the option list! Ignoring value provided.")}}t.DropdownSetting=a},78642:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.RangeSetting=void 0;const n=i(75341),s=i(58293),a=i(5825);class o extends n.Setting{value=0;getValue(){return this.value}getDefaultValue(){return this.defaultValue}setValue(e){this.value=a.MathUtil.clamp(this.minValue,this.maxValue,e),s.Settings.save(),this.onValueChanged()}loadFromSaveValue(e){this.value=a.MathUtil.clamp(this.minValue,this.maxValue,e),this.onValueChanged()}}t.RangeSetting=o},58293:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.Settings=void 0;const n=i(64681),s=i(44256),a=i(59029);t.Settings=class{static settingsList=[];static registerAll(){new n.UIScale,new s.Renderer,new a.MouseSensitivity}static load(){let e=window.localStorage.getItem("settings");if(null==e)return;let t=this.getList();try{JSON.parse(e).forEach((e=>{let i=!1;try{e.value||(console.warn("Setting '"+JSON.stringify(e)+"' may be corrupted, skipping!"),i=!0),e.info?(e.info.name||(console.warn("Setting '"+JSON.stringify(e)+"' may be corrupted, skipping!"),i=!0),e.info.category||(console.warn("Setting '"+JSON.stringify(e)+"' may be corrupted, skipping!"),i=!0)):(console.warn("Setting '"+JSON.stringify(e)+"' may be corrupted, skipping!"),i=!0)}catch(e){console.warn("Something went wrong when validating saved settings!",e),console.warn("The setting may be REALLY corrupted, skipping!"),i=!0}if(!i){let i=t.filter((t=>t.info.name==e.info.name&&t.info.category==e.info.category))[0];i?i.setting.loadFromSaveValue(e.value):console.warn("Could not find setting object '"+e.info.name+"', maybe it has been removed in this version of kosu?, skipping setting")}}))}catch(e){console.warn("Failed to load settings! Resetting Settings due to corrupted save!",e),this.reset()}}static save(){let e=this.getList(),t=[];e.forEach((e=>{e.setting.getValue()!=e.setting.getDefaultValue()&&t.push({info:e.info,value:e.setting.getValue()})})),window.localStorage.setItem("settings",JSON.stringify(t))}static reset(){console.warn("Resetting Settings!"),window.localStorage.removeItem("settings")}static register(e){this.settingsList.push(e)}static getSetting(e){return this.settingsList.filter((t=>t.setting instanceof e))[0].setting}static getSettingData(e){return this.settingsList.filter((t=>t.setting instanceof e))[0]}static getList(){return this.settingsList}}},44256:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.Renderer=void 0;const n=i(75341),s=i(74975);class a extends s.DropdownSetting{list=[];webglOption={displayName:"WebGL",value:"webgl"};webGpuOption={displayName:"WebGPU",value:"webgpu"};defaultValue=this.webglOption;constructor(){super({name:"Renderer",category:n.SettingsCategory.Graphics}),this.list.push(this.webglOption,this.webGpuOption),this.value=this.defaultValue}}t.Renderer=a},64681:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.UIScale=void 0;const n=i(78642),s=i(75341);class a extends n.RangeSetting{maxValue=1.6;minValue=.8;increment=.1;defaultValue=1;constructor(){super({name:"UI scaling",category:s.SettingsCategory.Graphics}),this.value=this.defaultValue}}t.UIScale=a},59029:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.MouseSensitivity=void 0;const n=i(78642),s=i(75341),a=i(58687);class o extends n.RangeSetting{defaultValue=1;increment=.01;maxValue=10;minValue=.1;constructor(){super({name:"Sensitivity",category:s.SettingsCategory.Input}),this.value=this.defaultValue,this.onValueChanged()}onValueChanged(){a.EventSystem.cursorSensitivity=this.getValue()}}t.MouseSensitivity=o},17898:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.BeatmapData=void 0;const n=i(85932),s=i(20352),a=i(32007),o=i(78878),r=i(54611),l=i(6386),u=i(43354);t.BeatmapData=class{files=new Map;formatVersion=-1;General=new n.GeneralData;Editor=new s.EditorData;Metadata=new a.Metadata;Difficulty=new o.DifficultyData;Events=new r.EventsData;TimingPoints=new l.TimingPointsData;Colors=new u.ColorsData}},43354:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.ColorsData=void 0;t.ColorsData=class{Colors=[]}},78878:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.DifficultyData=void 0;t.DifficultyData=class{HPDrainRate;CircleSize;OverallDifficulty;ApproachRate;SliderMultiplier;SliderTickRate}},20352:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.EditorData=void 0;t.EditorData=class{Bookmarks=[];DistanceSpacing;BeatDivisor;GridSize;TimelineZoom}},90361:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.Event=void 0;t.Event=class{eventType;startTime=0}},64432:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.EventBackground=void 0;const n=i(90361),s=i(15041);class a extends n.Event{eventType=s.EventTypes.BACKGROUND;startTime=0;filename;xOffset;yOffset;texture}t.EventBackground=a},21191:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.EventBreak=void 0;const n=i(90361),s=i(15041);class a extends n.Event{eventType=s.EventTypes.BREAK;endTime=0}t.EventBreak=a},15041:function(e,t){var i;Object.defineProperty(t,"__esModule",{value:!0}),t.EventTypes=void 0,function(e){e.BACKGROUND="Background",e.VIDEO="Video",e.BREAK="Break",e.COLOR="Colour",e.SPRITE="Sprite",e.SAMPLE="Sample",e.ANIMATION="Animation"}(i||(t.EventTypes=i={}))},19437:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.EventVideo=void 0;const n=i(90361),s=i(15041);class a extends n.Event{eventType=s.EventTypes.VIDEO;filename;xOffset;yOffset;texture}t.EventVideo=a},54611:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.EventsData=void 0;t.EventsData=class{Events=[]}},43659:function(e,t){var i;Object.defineProperty(t,"__esModule",{value:!0}),t.CommandType=void 0,function(e){e.Fade="F",e.Move="M",e.MoveX="MX",e.MoveY="MY",e.Scale="S",e.VectorScale="V",e.Rotate="R",e.Color="C",e.Parameter="P",e.Loop="L",e.Trigger="T"}(i||(t.CommandType=i={}))},96325:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.StoryboardCommand=void 0;const n=i(48949),s=i(90361);class a extends s.Event{easing=n.EasingFunction.None;endTime=0;timesLooped=0;executed=!1}t.StoryboardCommand=a},30150:function(e,t,i){var n=this&&this.__createBinding||(Object.create?function(e,t,i,n){void 0===n&&(n=i);var s=Object.getOwnPropertyDescriptor(t,i);s&&!("get"in s?!t.__esModule:s.writable||s.configurable)||(s={enumerable:!0,get:function(){return t[i]}}),Object.defineProperty(e,n,s)}:function(e,t,i,n){void 0===n&&(n=i),e[n]=t[i]}),s=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),a=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)"default"!==i&&Object.prototype.hasOwnProperty.call(e,i)&&n(t,e,i);return s(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.ColorCommand=void 0;const o=i(96325),r=i(43659),l=a(i(58687));class u extends o.StoryboardCommand{commandType=r.CommandType.Color;startColor=new l.Color("white");endColor=new l.Color("white")}t.ColorCommand=u},19873:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.FadeCommand=void 0;const n=i(96325),s=i(43659);class a extends n.StoryboardCommand{commandType=s.CommandType.Fade;startOpacity=1;endOpacity=1}t.FadeCommand=a},7918:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.LoopCommand=void 0;const n=i(96325),s=i(43659);class a extends n.StoryboardCommand{commandType=s.CommandType.Loop;endTime=-1;loopCount=1;childCommands=[]}t.LoopCommand=a},36550:function(e,t,i){var n=this&&this.__createBinding||(Object.create?function(e,t,i,n){void 0===n&&(n=i);var s=Object.getOwnPropertyDescriptor(t,i);s&&!("get"in s?!t.__esModule:s.writable||s.configurable)||(s={enumerable:!0,get:function(){return t[i]}}),Object.defineProperty(e,n,s)}:function(e,t,i,n){void 0===n&&(n=i),e[n]=t[i]}),s=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),a=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)"default"!==i&&Object.prototype.hasOwnProperty.call(e,i)&&n(t,e,i);return s(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.MoveCommand=void 0;const o=i(96325),r=i(43659),l=a(i(58687));class u extends o.StoryboardCommand{commandType=r.CommandType.Move;startPos=new l.Point(0,0);endPos=new l.Point(0,0)}t.MoveCommand=u},89797:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.MoveXCommand=void 0;const n=i(96325),s=i(43659);class a extends n.StoryboardCommand{commandType=s.CommandType.MoveX;startX=0;endX=0}t.MoveXCommand=a},80538:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.MoveYCommand=void 0;const n=i(96325),s=i(43659);class a extends n.StoryboardCommand{commandType=s.CommandType.MoveY;startY=0;endY=0}t.MoveYCommand=a},7428:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.ParameterCommandType=t.ParameterCommand=void 0;const n=i(96325),s=i(43659);class a extends n.StoryboardCommand{commandType=s.CommandType.Parameter;parameter}var o;t.ParameterCommand=a,function(e){e.HorizontalFlip="H",e.VerticalFlip="F",e.UseAdditiveBlending="A"}(o||(t.ParameterCommandType=o={}))},43176:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.RotateCommand=void 0;const n=i(96325),s=i(43659);class a extends n.StoryboardCommand{commandType=s.CommandType.Rotate;startRotation=0;endRotation=0}t.RotateCommand=a},21928:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.ScaleCommand=void 0;const n=i(96325),s=i(43659);class a extends n.StoryboardCommand{commandType=s.CommandType.Scale;startScale=1;endScale=1}t.ScaleCommand=a},80151:function(e,t,i){var n=this&&this.__createBinding||(Object.create?function(e,t,i,n){void 0===n&&(n=i);var s=Object.getOwnPropertyDescriptor(t,i);s&&!("get"in s?!t.__esModule:s.writable||s.configurable)||(s={enumerable:!0,get:function(){return t[i]}}),Object.defineProperty(e,n,s)}:function(e,t,i,n){void 0===n&&(n=i),e[n]=t[i]}),s=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),a=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)"default"!==i&&Object.prototype.hasOwnProperty.call(e,i)&&n(t,e,i);return s(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.VectorScaleCommand=void 0;const o=i(96325),r=i(43659),l=a(i(58687));class u extends o.StoryboardCommand{commandType=r.CommandType.VectorScale;startScale=new l.Point(1,1);endScale=new l.Point(1,1)}t.VectorScaleCommand=u},68403:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.EventAnimation=void 0;const n=i(59673),s=i(15041);class a extends n.EventStoryboard{eventType=s.EventTypes.ANIMATION;filepaths=[];frameCount;frameDelay;loopType;textures=[]}t.EventAnimation=a},68227:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.EventSample=void 0;const n=i(59673),s=i(15041);class a extends n.EventStoryboard{eventType=s.EventTypes.SAMPLE;volume=1;audioBuffer}t.EventSample=a},900:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.EventSprite=void 0;const n=i(59673),s=i(15041);class a extends n.EventStoryboard{eventType=s.EventTypes.SPRITE;sprite;texture}t.EventSprite=a},59673:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.EventStoryboard=void 0;const n=i(90361),s=i(7918);class a extends n.Event{_startTime;_endTime;get StartTime(){return this._startTime||(this._startTime=this.Commands.sort(((e,t)=>e.startTime-t.startTime))[0].startTime),this._startTime}get EndTime(){if(!this._endTime){let e=this.Commands.sort(((e,t)=>e.endTime-t.endTime))[this.Commands.length-1].endTime;for(let t=0;t<this.Commands.length;t++){let i=this.Commands[t];if(i instanceof s.LoopCommand){let t=i.childCommands.sort(((e,t)=>e.endTime-t.endTime))[i.childCommands.length-1].endTime;t*=i.loopCount,t+=i.startTime,t>e&&(e=t)}}this._endTime=e}return this._endTime}Commands=[];layer;origin;filepath;x=0;y=0}t.EventStoryboard=a},27187:function(e,t){var i;Object.defineProperty(t,"__esModule",{value:!0}),t.convertToLayer=t.Layer=void 0,function(e){e.Background="Background",e.Fail="Fail",e.Pass="Pass",e.Foreground="Foreground"}(i||(t.Layer=i={})),t.convertToLayer=function(e){let t=parseInt(e);if(isNaN(t))return e;switch(t){case 0:default:return i.Background;case 1:return i.Fail;case 2:return i.Pass;case 3:return i.Foreground}}},24155:function(e,t){var i;Object.defineProperty(t,"__esModule",{value:!0}),t.convertToLoopType=t.LoopType=void 0,function(e){e.LoopForever="LoopForever",e.LoopOnce="LoopOnce"}(i||(t.LoopType=i={})),t.convertToLoopType=function(e){let t=parseInt(e);if(isNaN(t))return e;switch(t){case 0:default:return i.LoopForever;case 1:return i.LoopOnce}}},93729:function(e,t){var i;Object.defineProperty(t,"__esModule",{value:!0}),t.convertToOrigin=t.Origin=void 0,function(e){e.TopLeft="TopLeft",e.Center="Centre",e.CenterLeft="CentreLeft",e.TopRight="TopRight",e.BottomCenter="BottomCentre",e.TopCenter="TopCentre",e.Custom="Custom",e.CenterRight="CentreRight",e.BottomLeft="BottomLeft",e.BottomRight="BottomRight"}(i||(t.Origin=i={})),t.convertToOrigin=function(e){let t=parseInt(e);if(isNaN(t))return e;switch(t){case 0:default:return i.TopLeft;case 1:return i.Center;case 2:return i.CenterLeft;case 3:return i.TopRight;case 4:return i.BottomCenter;case 5:return i.TopCenter;case 6:return i.Custom;case 7:return i.CenterRight;case 8:return i.BottomLeft;case 9:return i.BottomRight}}},37940:function(e,t){var i;Object.defineProperty(t,"__esModule",{value:!0}),t.Countdown=void 0,function(e){e[e.NoCountdown=0]="NoCountdown",e[e.Normal=1]="Normal",e[e.Half=2]="Half",e[e.Double=3]="Double"}(i||(t.Countdown=i={}))},85932:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.GeneralData=void 0;const n=i(37940),s=i(41080),a=i(90857),o=i(45274);t.GeneralData=class{audioFile;AudioFilename=null;AudioLeadIn=0;AudioHash=null;PreviewTime=-1;Countdown=n.Countdown.Normal;SampleSet=s.SampleSet.Normal;StackLeniency=.7;Mode=a.Mode.OSU;LetterboxInBreaks=!1;StoryFireInFront=!0;UseSkinSprites=!1;AlwaysShowPlayfield=!1;OverlayPosition=o.OverlayPosition.NoChange;SkinPreference=null;EpilepsyWarning=!1;CountdownOffset=0;SpecialStyle=!1;WidescreenStoryboard=!1;SamplesMatchPlaybackRate=!1}},90857:function(e,t){var i;Object.defineProperty(t,"__esModule",{value:!0}),t.Mode=void 0,function(e){e[e.OSU=0]="OSU",e[e.TAIKO=1]="TAIKO",e[e.CATCH=2]="CATCH",e[e.MANIA=3]="MANIA"}(i||(t.Mode=i={}))},45274:function(e,t){var i;Object.defineProperty(t,"__esModule",{value:!0}),t.OverlayPosition=void 0,function(e){e.NoChange="NoChange",e.Below="Below",e.Above="Above"}(i||(t.OverlayPosition=i={}))},41080:function(e,t){var i;Object.defineProperty(t,"__esModule",{value:!0}),t.SampleSet=void 0,function(e){e.Normal="Normal",e.Soft="Soft",e.Drum="Drum"}(i||(t.SampleSet=i={}))},32007:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.Metadata=void 0;t.Metadata=class{Title;TitleUnicode;Artist;ArtistUnicode;Creator;Version;Source;Tags;BeatmapID;BeatmapSetID}},22331:function(e,t){var i;Object.defineProperty(t,"__esModule",{value:!0}),t.Effect=void 0,function(e){e[e.KiaiTime=1]="KiaiTime",e[e.None=0]="None",e[e.FirstBarLineOmittedInOsuTaikoAndOsuMania=3]="FirstBarLineOmittedInOsuTaikoAndOsuMania"}(i||(t.Effect=i={}))},3143:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.InheritedTimingPoint=void 0;const n=i(52032);class s extends n.TimingPoint{sliderVelocityMultiplier}t.InheritedTimingPoint=s},52032:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.TimingPoint=void 0;t.TimingPoint=class{time;sampleSet;sampleIndex;volume;effects}},6386:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.TimingPointsData=void 0;const n=i(87816),s=i(3143);t.TimingPointsData=class{TimingPoints=[];GetCurrentTimingPoints(e){let t=[],i=this.TimingPoints.filter((t=>{if(t.time<=e)return t}));if(0==i.length&&i.push(this.TimingPoints[0]),t.push(i[i.length-1]),t[0]instanceof s.InheritedTimingPoint){let i=this.TimingPoints.filter((e=>e instanceof n.UnInheritedTimingPoint)).filter((t=>{if(t.time<=e)return t}));if(0==i.length)throw new Error("Could not find a parent timing point for the un-inherited timing point!");t.push(i[i.length-1])}if(0==t.length)throw new Error("Could not find any timing points!");return t}GetCurrentUninheritedTimingPoint(e){let t,i=this.GetCurrentTimingPoints(e);if(i[0]instanceof n.UnInheritedTimingPoint)t=i[0];else{if(!(i[1]instanceof n.UnInheritedTimingPoint))throw new Error("Could not find any UnInherited Timing Points!");t=i[1]}return t}}},87816:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.UnInheritedTimingPoint=void 0;const n=i(52032);class s extends n.TimingPoint{beatLength;meter}t.UnInheritedTimingPoint=s},9752:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.BeatmapParser=void 0;const n=i(17898),s=i(30444),a=i(81347),o=i(23114),r=i(98803),l=i(92880),u=i(25820);class c{static Parse(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new n.BeatmapData,i=arguments.length>2?arguments[2]:void 0,d=e.split(/\r?\n|\r|\n/g),h=i?.split(/\r?\n|\r|\n/g);for(let e=0;e<d.length;e++)if(d[e].startsWith("osu file format")){let i=d[e].split("v")[1];t.formatVersion=parseFloat(i)}return a.GeneralParser.ParseGeneral(t,c.GetSection("General",d)),o.EditorParser.ParseEditor(t,c.GetSection("Editor",d)),r.MetadataParser.ParseMetadata(t,c.GetSection("Metadata",d)),l.DifficultyParser.ParseDifficulty(t,c.GetSection("Difficulty",d)),u.EventsParser.ParseEvents(t,c.GetSection("Events",d,h)),s.TimingPointsParser.ParseTimingPoints(t,c.GetSection("TimingPoints",d)),t}static async LoadFiles(e,t){await new Promise((i=>{let n=0,s=()=>{2==n&&i()};a.GeneralParser.LoadFiles(e),n++,s(),u.EventsParser.LoadFiles(e,t).then((()=>{n++,s()}))}))}static GetSection(e,t,i){let n=[],s=0;t.forEach(((t,i)=>{t=="["+e+"]"&&(s=i)}));for(let e=s+1;e<t.length;e++)if(""!=t[e]&&!t[e].startsWith("//")){if(t[e].startsWith("["))break;n.push(t[e])}if(i)for(let t=0;t<i.length;t++)""!=i[t]&&(i[t].startsWith("//")||i[t].startsWith("["+e+"]")||n.push(i[t]));return n}static AutoParse(e,t,i){let n=t[0],s=!1;for(let e in i)e==n&&(s=!0);if(!s)return void console.warn(n.toString()+" does not exist on "+e.name+"!");let a,o=/^[0-9]+$|^[0-9]+\.+[0-9]+$|^-[0-9]+$|^-[0-9]+\.+[0-9]+$/.test(t[1]);a="boolean"==typeof i[n]?"1"==t[1]:o?parseFloat(t[1]):t[1],i[n]=a}}t.BeatmapParser=c},92880:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.DifficultyParser=void 0;const n=i(9752),s=i(78878);t.DifficultyParser=class{static ParseDifficulty(e,t){t.forEach((t=>{let i=t.split(":");i[1].startsWith(" ")&&(i[1]=i[1].substring(1,i[1].length)),n.BeatmapParser.AutoParse(s.DifficultyData,i,e.Difficulty)}))}}},23114:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.EditorParser=void 0;const n=i(9752),s=i(20352);t.EditorParser=class{static ParseEditor(e,t){t.forEach((t=>{let i=t.split(":");i[1].startsWith(" ")&&(i[1]=i[1].substring(1,i[1].length)),"Bookmarks"!=i[0]?n.BeatmapParser.AutoParse(s.EditorData,i,e.Editor):i[1].split(",").forEach((t=>{e.Editor.Bookmarks.push(parseFloat(t))}))}))}}},25820:function(e,t,i){var n=this&&this.__createBinding||(Object.create?function(e,t,i,n){void 0===n&&(n=i);var s=Object.getOwnPropertyDescriptor(t,i);s&&!("get"in s?!t.__esModule:s.writable||s.configurable)||(s={enumerable:!0,get:function(){return t[i]}}),Object.defineProperty(e,n,s)}:function(e,t,i,n){void 0===n&&(n=i),e[n]=t[i]}),s=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),a=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)"default"!==i&&Object.prototype.hasOwnProperty.call(e,i)&&n(t,e,i);return s(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.EventsParser=void 0;const o=i(15041),r=i(64432),l=i(19437),u=i(21191),c=i(81354),d=a(i(58687)),h=i(12235),f=i(900),g=i(27187),p=i(68403),m=i(93729),v=i(24155),b=i(68227),y=i(5825),_=i(43659),S=i(7918),C=i(48949),w=i(19873),O=i(21928),M=i(80151),P=i(43176),T=i(36550),E=i(89797),x=i(80538),L=i(30150),A=i(7428);t.EventsParser=class{static aviTranscodedVideoCache=[];static ParseEvents(e,t){let i,n;t.forEach((t=>{let s=0;(t.startsWith(" ")||t.startsWith("_"))&&(s=1),(t.startsWith("  ")||t.startsWith("__"))&&(s=2);let a,c=t.split(",");if(0==s)switch(c[0]){case o.EventTypes.BACKGROUND:case"0":a=new r.EventBackground,a.filename=c[2].replaceAll('"',"").replaceAll("\\","/"),a.xOffset=parseFloat(c[3]),a.yOffset=parseFloat(c[4]),isNaN(a.xOffset)&&(a.xOffset=0),isNaN(a.yOffset)&&(a.yOffset=0),i=void 0;break;case o.EventTypes.VIDEO:case"1":a=new l.EventVideo,a.startTime=parseInt(c[1]),a.filename=c[2].replaceAll('"',"").replaceAll("\\","/"),a.xOffset=parseFloat(c[3]),a.yOffset=parseFloat(c[4]),isNaN(a.xOffset)&&(a.xOffset=0),isNaN(a.yOffset)&&(a.yOffset=0),i=void 0;break;case o.EventTypes.BREAK:case"2":a=new u.EventBreak,a.startTime=parseInt(c[1]),a.endTime=parseInt(c[2]),i=void 0;break;case o.EventTypes.COLOR:case"3":i=void 0;break;case o.EventTypes.SPRITE:case"4":a=new f.EventSprite,a.layer=(0,g.convertToLayer)(c[1]),a.origin=(0,m.convertToOrigin)(c[2]),a.filepath=c[3].replaceAll('"',"").replaceAll("\\","/"),a.x=parseFloat(c[4]),a.y=parseFloat(c[5]),isNaN(a.x)&&(a.x=0),isNaN(a.y)&&(a.y=0),i=a;break;case o.EventTypes.SAMPLE:case"5":a=new b.EventSample,a.startTime=parseFloat(c[1]),a.layer=(0,g.convertToLayer)(c[2]),a.filepath=c[3].replaceAll('"',"").replaceAll("\\","/"),a.volume=c.length>4?y.MathUtil.clamp01(parseFloat(c[4])/100):1,i=a;break;case o.EventTypes.ANIMATION:case"6":a=new p.EventAnimation,a.layer=(0,g.convertToLayer)(c[1]),a.origin=(0,m.convertToOrigin)(c[2]),a.filepath=c[3].replaceAll('"',"").replaceAll("\\","/");let t=a.filepath.substring(0,a.filepath.lastIndexOf("."));for(let i of e.files.keys())i.startsWith(t)&&a.filepaths.push(i);a.filepaths.sort(((e,i)=>parseInt(e.substring(t.length,e.lastIndexOf(".")))-parseInt(i.substring(t.length,i.lastIndexOf("."))))),a.x=parseFloat(c[4]),a.y=parseFloat(c[5]),isNaN(a.x)&&(a.x=0),isNaN(a.y)&&(a.y=0),a.frameCount=parseInt(c[6]),a.frameDelay=parseFloat(c[7]),e.formatVersion<6&&(a.frameDelay=1.186*Math.round(.015*a.frameDelay)*(1e3/60)),a.loopType=c.length>8?(0,v.convertToLoopType)(c[8]):v.LoopType.LoopForever,i=a}else if(i)switch(c[0].substring(s,c[0].length)){case _.CommandType.Trigger:if(2==s)break;n=void 0;break;case _.CommandType.Loop:if(2==s)break;a=new S.LoopCommand,a.startTime=parseFloat(c[1]),a.loopCount=Math.max(0,parseInt(c[2])-1),n=a;break;default:""==c[3]&&(c[3]=c[2]);let e,t=C.EasingFunction.convertFromStoryBoardToEaseFunction(parseInt(c[1])),o=parseFloat(c[2]),r=parseFloat(c[3]);switch(c[0].substring(s,c[0].length)){case _.CommandType.Fade:e=new w.FadeCommand,e.startTime=o,e.endTime=r,e.easing=t,e.startOpacity=y.MathUtil.clamp01(parseFloat(c[4])),e.endOpacity=c.length>5?y.MathUtil.clamp01(parseFloat(c[5])):e.startOpacity;break;case _.CommandType.Scale:e=new O.ScaleCommand,e.startTime=o,e.endTime=r,e.easing=t,e.startScale=parseFloat(c[4]),e.endScale=c.length>5?parseFloat(c[5]):e.startScale;break;case _.CommandType.VectorScale:e=new M.VectorScaleCommand,e.startTime=o,e.endTime=r,e.easing=t,e.startScale=new d.Point(parseFloat(c[4]),parseFloat(c[5]));let i=c.length>6?parseFloat(c[6]):e.startScale.x,n=c.length>7?parseFloat(c[7]):e.startScale.y;e.endScale=new d.Point(i,n);break;case _.CommandType.Rotate:e=new P.RotateCommand,e.startTime=o,e.endTime=r,e.easing=t,e.startRotation=parseFloat(c[4]),e.endRotation=c.length>5?parseFloat(c[5]):e.startRotation;break;case _.CommandType.Move:e=new T.MoveCommand,e.startTime=o,e.endTime=r,e.easing=t,e.startPos=new d.Point(parseFloat(c[4]),parseFloat(c[5]));let s=c.length>6?parseFloat(c[6]):e.startPos.x,a=c.length>7?parseFloat(c[7]):e.startPos.y;e.endPos=new d.Point(s,a);break;case _.CommandType.MoveX:e=new E.MoveXCommand,e.startTime=o,e.endTime=r,e.easing=t,e.startX=parseFloat(c[4]),e.endX=c.length>5?parseFloat(c[5]):e.startX;break;case _.CommandType.MoveY:e=new x.MoveYCommand,e.startTime=o,e.endTime=r,e.easing=t,e.startY=parseFloat(c[4]),e.endY=c.length>5?parseFloat(c[5]):e.startY;break;case _.CommandType.Color:e=new L.ColorCommand,e.startTime=o,e.endTime=r,e.easing=t;let l=e=>{let t=parseInt(e);return isNaN(t)?parseInt(e,16):t},u=l(c[4])/255,h=l(c[5])/255,f=l(c[6])/255,g=c.length>7?l(c[7])/255:u/255,p=c.length>8?l(c[8])/255:h/255,m=c.length>9?l(c[9])/255:f/255;u=y.MathUtil.clamp01(u),h=y.MathUtil.clamp01(h),f=y.MathUtil.clamp01(f),g=y.MathUtil.clamp01(g),p=y.MathUtil.clamp01(p),m=y.MathUtil.clamp01(m),e.startColor=new d.Color([u,h,f]),e.endColor=new d.Color([g,p,m]);break;case _.CommandType.Parameter:e=new A.ParameterCommand,e.startTime=o,e.endTime=r,e.easing=t,e.parameter=c[4]}e&&(2==s?n&&"childCommands"in n&&n.childCommands&&n.childCommands.push(e):i.Commands.push(e))}a&&e.Events.Events.push(a)}))}static async LoadFiles(e,t){await new Promise((async i=>{let n=e.Events.Events.filter((e=>{if("filename"in e&&e.filename||"filepath"in e&&e.filepath)return e})),s=0,a=()=>{s!=n.length||i()};a();let o=new Map;for(const i of n)for(let n in i)if("filename"==n||"filepath"==n){let u=e.files.get(i[n]);if(i instanceof p.EventAnimation&&(u=new Blob),u){let g=URL.createObjectURL(u);if(i instanceof r.EventBackground&&d.Assets.load({src:g,loadParser:"loadTextures"}).then((e=>{i.texture=e,s++,a()})).catch((e=>{console.warn(e),s++,a()})),i instanceof l.EventVideo){let t=!1;if(i[n].endsWith(".avi")){let s=this.aviTranscodedVideoCache.find((t=>{if(t.beatmapSID==e.Metadata.BeatmapSetID&&t.filePath==i[n])return t}));try{if(s)e.files.delete(i[n]),i[n]=i[n].substring(0,i[n].length-4)+".mp4",e.files.set(i[n],s.blob),URL.revokeObjectURL(g),g=URL.createObjectURL(s.blob);else{console.warn("AVI video is not natively supported! Transcoding to .mp4, this may take a few minutes!");let t=new c.FFmpeg;t.on("progress",(e=>{let{progress:t,time:i}=e;console.log(`.avi to .mp4 transcoding: ${Math.round(1e3*t)/10}% (transcoded time: ${Math.round(i/1e5)/10}s)`)})),console.log("FFmpeg initialized");let s=h.Loader.Get("workers.ffmpeg"),a=h.Loader.Get("ffmpeg.core"),o=h.Loader.Get("ffmpeg.wasm"),r=h.Loader.Get("ffmpeg.coreWorker");await t.load({classWorkerURL:URL.createObjectURL(s),coreURL:URL.createObjectURL(a),wasmURL:URL.createObjectURL(o),workerURL:URL.createObjectURL(r)}),console.log("FFmpeg loaded"),await t.writeFile("input.avi",new Uint8Array(await u.arrayBuffer())),console.log("Written file to FFmpeg's vfs"),await t.exec(["-i","input.avi","-c:v","libx264","-preset","ultrafast","-an","-movflags","faststart","output.mp4"]),console.log("Transcoding done");const l=await t.readFile("output.mp4");t.terminate(),console.log("FFmpeg terminated");let d=new Blob([l],{type:"video/mp4"});this.aviTranscodedVideoCache.push({beatmapSID:e.Metadata.BeatmapSetID,filePath:i[n],blob:d}),e.files.delete(i[n]),i[n]=i[n].substring(0,i[n].length-4)+".mp4",e.files.set(i[n],d),URL.revokeObjectURL(g),g=URL.createObjectURL(d),console.log("Successfully transcoded from .avi to .mp4!")}}catch(e){console.warn(e),t=!0}}t?(s++,a()):d.Assets.load({src:g,loadParser:"loadVideo"}).then((e=>{i.texture=e,i.texture&&(i.texture.source.resource.volume=0,i.texture.source.resource.pause()),s++,a()})).catch((e=>{console.warn(e),s++,a()}))}if(i instanceof f.EventSprite)if(o.has(i[n]))URL.revokeObjectURL(g),i.texture=o.get(i[n]),s++,a();else try{let e=await d.Assets.load({src:g,loadParser:"loadTextures"});i.texture=e,o.set(i[n],e),s++,a()}catch(e){console.warn(e),s++,a()}if(i instanceof b.EventSample&&u.arrayBuffer().then((e=>{t.audioContext.decodeAudioData(e).then((e=>{i.audioBuffer=e,s++,a()})).catch((e=>{console.warn(e),s++,a()}))})),i instanceof p.EventAnimation){URL.revokeObjectURL(g);let t=0,r=i.filepaths.length,l=()=>{t==r&&(s++,a())};for(const s of i.filepaths){const a=i.filepaths.indexOf(s);if(o.has(s))i.textures[a]=o.get(s),t++,l();else{let r=e.files.get(s);if(r){let e=URL.createObjectURL(r);try{let s=await d.Assets.load({src:e,loadParser:"loadTextures"});i.textures[a]=s,o.set(i[n],s),t++,l()}catch(e){console.warn(e),t++,l()}}}}}}else console.warn("Could not find referenced file: "+i[n])}}))}}},81347:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.GeneralParser=void 0;const n=i(85932),s=i(9752);t.GeneralParser=class{static ParseGeneral(e,t){t.forEach((t=>{let i=t.split(":");i[1].startsWith(" ")&&(i[1]=i[1].substring(1,i[1].length)),"AudioFilename"!=i[0]?s.BeatmapParser.AutoParse(n.GeneralData,i,e.General):e.General.AudioFilename=i[1].replaceAll("\\","/")}))}static LoadFiles(e){e.General.AudioFilename&&(e.General.audioFile=e.files.get(e.General.AudioFilename))}}},98803:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.MetadataParser=void 0;const n=i(9752),s=i(32007);t.MetadataParser=class{static ParseMetadata(e,t){t.forEach((t=>{let i=t.split(":");i[1].startsWith(" ")&&(i[1]=i[1].substring(1,i[1].length)),n.BeatmapParser.AutoParse(s.Metadata,i,e.Metadata)}))}}},30444:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.TimingPointsParser=void 0;const n=i(87816),s=i(3143),a=i(22331);t.TimingPointsParser=class{static ParseTimingPoints(e,t){t.forEach((t=>{let i,o=t.split(",");"1"==o[6]?(i=new n.UnInheritedTimingPoint,i.beatLength=Number.parseFloat(o[1]),i.meter=Number.parseInt(o[2])):(i=new s.InheritedTimingPoint,i.sliderVelocityMultiplier=Number.parseFloat(o[1])),i.time=Number.parseInt(o[0]),i.sampleSet=Number.parseInt(o[3]),i.sampleIndex=Number.parseInt(o[4]),i.volume=Number.parseInt(o[5]),"1"==o[7]||"3"==o[7]?i.effects=Number.parseInt(o[7]):i.effects=a.Effect.None,e.TimingPoints.TimingPoints.push(i)}))}}},5825:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.MathUtil=void 0;class i{static RadiansToDegrees(e){return 180*e/Math.PI}static DegreesToRadians(e){return e*Math.PI/180}static clamp(e,t,i){return Math.min(Math.max(i,e),t)}static clamp01(e){return i.clamp(0,1,e)}static Damp(e,t,n,s){return i.Lerp(e,t,1-Math.pow(n,s))}static Lerp(e,t,i){return e+(t-e)*i}}t.MathUtil=i},92915:function(e,t,i){var n=this&&this.__createBinding||(Object.create?function(e,t,i,n){void 0===n&&(n=i);var s=Object.getOwnPropertyDescriptor(t,i);s&&!("get"in s?!t.__esModule:s.writable||s.configurable)||(s={enumerable:!0,get:function(){return t[i]}}),Object.defineProperty(e,n,s)}:function(e,t,i,n){void 0===n&&(n=i),e[n]=t[i]}),s=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),a=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)"default"!==i&&Object.prototype.hasOwnProperty.call(e,i)&&n(t,e,i);return s(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.Ease=void 0;const o=a(i(29172));class r{static previousEases=[];easings=[];obj;delay=null;constructor(e,t){this.obj=e,t||r.previousEases.push(this)}static getEase(e,t){null==t&&(t=!1);let i=r.previousEases.filter((t=>t.obj==e));return i.length>0?i[0]:new r(e,t)}createTween(e,t,i,n,s,a){const r={value:0},u=new o.Tween(i?r:e),c=new l(u);return u.to(i?{value:1}:t,s),u.easing(a),u.onUpdate((()=>{this.obj.destroyed||(this.obj[n]=i?r.value*(t.value-e.value)+e.value:e),c.onUpdate()})),u.onStart((()=>{i&&(e.value=this.obj[n])})),null==this.delay?u.start():(this.delay.chain(u),this.delay=null),this.easings.push(c),u.onStop((()=>{this.onDone(u)})),u.onComplete((()=>{this.onDone(u)})),this}TransformTo(e,t,i){return this.createTween(this.obj.position,e,!1,"position",t,i),this}onDone(e){this.easings=this.easings.filter((t=>t.tween!=e))}ScaleTo(e,t,i){let n={x:0,y:0};return"number"==typeof e&&(n.x=e,n.y=e),this.createTween(this.obj.scale,n,!1,"scale",t,i),this}FadeTo(e,t,i){return this.createTween({value:this.obj.alpha},{value:e},!0,"alpha",t,i),this}FadeOut(e,t){return this.FadeTo(0,e,t),this}FadeIn(e,t){return this.FadeTo(1,e,t),this}ClearEasings(){return this.easings.forEach((e=>{e.tween.stop()})),this.easings=[],this}Then(e){let t=this.easings.sort(((e,t)=>e.tween.getDuration()-t.tween.getDuration()));return t.length>0&&(this.delay=t[0].tween,null!=e&&(t[0].tween.onComplete((()=>{this.onDone(t[0].tween),e()})),t[0].tween.onStop((()=>{this.onDone(t[0].tween),e()})))),this}OnEach(e){let t=this.easings.sort(((e,t)=>e.tween.getDuration()-t.tween.getDuration()));t.length>0&&t[0].registerOnUpdate(e)}}t.Ease=r;class l{tween;updateEventListeners=[];constructor(e){this.tween=e}onUpdate(){this.updateEventListeners.forEach((e=>{e()}))}registerOnUpdate(e){this.updateEventListeners.push(e)}unRegisterOnUpdate(e){this.updateEventListeners=this.updateEventListeners.filter((t=>!(e===t)))}}},48949:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.EasingFunction=void 0;class i{static elastic_const=2*Math.PI/.3;static elastic_const2=.075;static back_const=1.70158;static back_const2=1.525*i.back_const;static bounce_const=1/2.75;static expo_offset=Math.pow(2,-10);static elastic_offset_full=Math.pow(2,-11);static elastic_offset_half=Math.pow(2,-10)*Math.sin((.5-i.elastic_const2)*i.elastic_const);static elastic_offset_quarter=Math.pow(2,-10)*Math.sin((.25-i.elastic_const2)*i.elastic_const);static in_out_elastic_offset=Math.pow(2,-10)*Math.sin((1-1.5*i.elastic_const2)*i.elastic_const/1.5);static None=e=>e;static In=e=>this.InQuad(e);static InQuad=e=>e*e;static Out=e=>this.OutQuad(e);static OutQuad=e=>e*(2-e);static InOutQuad=e=>e<.5?e*e*2:--e*e*-2+1;static InCubic=e=>e*e*e;static OutCubic=e=>--e*e*e+1;static InOutCubic=e=>e<.5?e*e*e*4:--e*e*e*4+1;static InQuart=e=>e*e*e*e;static OutQuart=e=>1- --e*e*e*e;static InOutQuart=e=>e<.5?e*e*e*e*8:--e*e*e*e*-8+1;static InQuint=e=>e*e*e*e*e;static OutQuint=e=>--e*e*e*e*e+1;static InOutQuint=e=>e<.5?e*e*e*e*e*16:--e*e*e*e*e*16+1;static InSine=e=>1-Math.cos(e*Math.PI*.5);static OutSine=e=>Math.sin(e*Math.PI*.5);static InOutSine=e=>.5-.5*Math.cos(Math.PI*e);static InExpo=e=>Math.pow(2,10*(e-1))+i.expo_offset*(e-1);static OutExpo=e=>1-Math.pow(2,-10*e)+i.expo_offset*e;static InOutExpo=e=>e<.5?.5*(Math.pow(2,20*e-10)+i.expo_offset*(2*e-1)):1-.5*(Math.pow(2,-20*e+10)+i.expo_offset*(-2*e+1));static InCirc=e=>1-Math.sqrt(1-e*e);static OutCirc=e=>Math.sqrt(1- --e*e);static InOutCirc=e=>(e*=2)<1?.5-.5*Math.sqrt(1-e*e):.5*Math.sqrt(1-(e-=2)*e)+.5;static InElastic=e=>-Math.pow(2,10*e-10)*Math.sin((1-i.elastic_const2-e)*i.elastic_const)+i.elastic_offset_full*(1-e);static OutElastic=e=>Math.pow(2,-10*e)*Math.sin((e-i.elastic_const2)*i.elastic_const)+1-i.elastic_offset_full*e;static OutElasticHalf=e=>Math.pow(2,-10*e)*Math.sin((.5*e-i.elastic_const2)*i.elastic_const)+1-i.elastic_offset_half*e;static OutElasticQuarter=e=>Math.pow(2,-10*e)*Math.sin((.25*e-i.elastic_const2)*i.elastic_const)+1-i.elastic_offset_quarter*e;static InOutElastic=e=>(e*=2)<1?-.5*(Math.pow(2,10*e-10)*Math.sin((1-1.5*i.elastic_const2-e)*i.elastic_const/1.5)-i.in_out_elastic_offset*(1-e)):.5*(Math.pow(2,-10*--e)*Math.sin((e-1.5*i.elastic_const2)*i.elastic_const/1.5)-i.in_out_elastic_offset*e)+1;static InBack=e=>e*e*((i.back_const+1)*e-i.back_const);static OutBack=e=>--e*e*((i.back_const+1)*e+i.back_const)+1;static InOutBack=e=>(e*=2)<1?.5*e*e*((i.back_const2+1)*e-i.back_const2):.5*((e-=2)*e*((i.back_const2+1)*e+i.back_const2)+2);static InBounce=e=>(e=1-e)<i.bounce_const?1-7.5625*e*e:e<2*i.bounce_const?1-(7.5625*(e-=1.5*i.bounce_const)*e+.75):e<2.5*i.bounce_const?1-(7.5625*(e-=2.25*i.bounce_const)*e+.9375):1-(7.5625*(e-=2.625*i.bounce_const)*e+.984375);static OutBounce=e=>e<i.bounce_const?7.5625*e*e:e<2*i.bounce_const?7.5625*(e-=1.5*i.bounce_const)*e+.75:e<2.5*i.bounce_const?7.5625*(e-=2.25*i.bounce_const)*e+.9375:7.5625*(e-=2.625*i.bounce_const)*e+.984375;static InOutBounce=e=>e<.5?.5-.5*this.OutBounce(1-2*e):.5*this.OutBounce(2*(e-.5))+.5;static OutPow10=e=>--e*Math.pow(e,10)+1;static convertFromStoryBoardToEaseFunction(e){switch(e){case 0:default:return this.None;case 1:return this.Out;case 2:return this.In;case 3:return this.InQuad;case 4:return this.OutQuad;case 5:return this.InOutQuad;case 6:return this.InCubic;case 7:return this.OutCubic;case 8:return this.InOutCubic;case 9:return this.InQuart;case 10:return this.OutQuart;case 11:return this.InOutQuart;case 12:return this.InQuint;case 13:return this.OutQuint;case 14:return this.InOutQuint;case 15:return this.InSine;case 16:return this.OutSine;case 17:return this.InOutSine;case 18:return this.InExpo;case 19:return this.OutExpo;case 20:return this.InOutExpo;case 21:return this.InCirc;case 22:return this.OutCirc;case 23:return this.InOutCirc;case 24:return this.InElastic;case 25:return this.OutElastic;case 26:return this.OutElasticHalf;case 27:return this.OutElasticQuarter;case 28:return this.InOutElastic;case 29:return this.InBack;case 30:return this.OutBack;case 31:return this.InOutBack;case 32:return this.InBounce;case 33:return this.OutBounce;case 34:return this.InOutBounce;case 35:return this.OutPow10}}}t.EasingFunction=i},94461:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.CenteredList=void 0;const n=i(70828),s=i(5168);class a extends n.List{get elementsMargin(){return super.elementsMargin}set elementsMargin(e){super.elementsMargin=e,s.UIUtils.centerPivotOfList(this)}ReCenter(){s.UIUtils.centerPivotOfList(this)}}t.CenteredList=a},5168:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.UIUtils=void 0;t.UIUtils=class{static centerPivotOfList(e){let t=e.leftPadding,i=e.topPadding;for(let n=0;n<e.children.length;n++){let s=n+1==e.children.length;switch(e.type){case"horizontal":t+=e.children[n].width+(s?0:e.elementsMargin),i+=e.children[n].height;break;case"vertical":t+=e.children[n].width,i+=e.children[n].height+(s?0:e.elementsMargin);break;default:t+=e.children[n].width+(s?0:e.elementsMargin),i+=e.children[n].height+(s?0:e.elementsMargin)}}switch(e.type){case"horizontal":i/=e.children.length;break;case"vertical":t/=e.children.length}t+=e.rightPadding,i+=e.bottomPadding,e.pivot.set(t/2,i/2)}}},29820:function(e,t,i){i(11307);const n=i(58687),s=i(3179),a=i(58293),o=i(44256),r=i(59029),l=i(64681);a.Settings.registerAll(),a.Settings.load();const u=window.innerWidth,c=window.innerHeight,d=new n.Application;globalThis.__PIXI_APP__=d,window.onload=async()=>{const e=a.Settings.getSetting(o.Renderer).getValue().value;d.init({backgroundColor:"black",width:u,height:c,antialias:!0,preference:e,resolution:window.devicePixelRatio,autoDensity:!0}).then((()=>{new s.Main(d)}))},navigator.mediaSession.setActionHandler("play",(()=>{s.Main.AudioEngine.GetCurrentPlayingMusicNoSilent()?.Play()})),navigator.mediaSession.setActionHandler("pause",(()=>{s.Main.AudioEngine.GetCurrentPlayingMusicNoSilent()?.Pause()})),navigator.mediaSession.setActionHandler("stop",(()=>{})),navigator.mediaSession.setActionHandler("seekbackward",(()=>{})),navigator.mediaSession.setActionHandler("seekforward",(()=>{})),navigator.mediaSession.setActionHandler("seekto",(()=>{})),navigator.mediaSession.setActionHandler("previoustrack",(()=>{})),navigator.mediaSession.setActionHandler("nexttrack",(()=>{})),Object.defineProperty(window,"setSensitivity",{value:e=>{a.Settings.getSetting(r.MouseSensitivity).setValue(e)}}),Object.defineProperty(window,"setRenderer",{value:e=>{let t=a.Settings.getSetting(o.Renderer);t.setValue("webgl"==e?t.webglOption:t.webGpuOption),window.location.reload()}}),Object.defineProperty(window,"setUIScale",{value:e=>{a.Settings.getSetting(l.UIScale).setValue(e),window.location.reload()}})},11307:function(e,t,i){i.r(t)},58689:function(e,t,i){i.r(t),t.default="in vec2 vUV;\nin vec2 vPositionOffset;\nin vec2 vPosition;\nin vec4 vColorTint;\nuniform sampler2D uTexture;\nuniform float time;\n\nvoid main() {\n    float a = ((vPositionOffset.y + vPosition.y)/1200.0) - 0.1;\n    vec4 color = texture(uTexture, vUV);\n    if (a > 1.0) {\n        a = 1.0;\n    }\n    gl_FragColor = (color*vColorTint)*a;\n}"},46404:function(e,t,i){i.r(t),t.default="in vec2 aPosition;\nin vec2 aUV;\nin vec2 aPositionOffset;\nin vec4 aColorTint;\n\nout vec2 vUV;\nout vec2 vPositionOffset;\nout vec2 vPosition;\nout vec4 vColorTint;\n\nuniform mat3 uProjectionMatrix;\nuniform mat3 uWorldTransformMatrix;\nuniform mat3 uTransformMatrix;\n\n\nvoid main() {\n\n    mat3 mvp = uProjectionMatrix * uWorldTransformMatrix * uTransformMatrix;\n    gl_Position = vec4((mvp * vec3(aPosition + aPositionOffset, 1.0)).xy, 0.0, 1.0);\n    vPositionOffset = aPositionOffset;\n    vUV = aUV;\n    vPosition = aPosition;\n    vColorTint = aColorTint;\n}"},61630:function(e,t,i){i.r(t),t.default="struct GlobalUniforms {\n    uProjectionMatrix:mat3x3<f32>,\n    uWorldTransformMatrix:mat3x3<f32>,\n    uWorldColorAlpha: vec4<f32>,\n    uResolution: vec2<f32>,\n}\n\nstruct LocalUniforms {\n    uTransformMatrix:mat3x3<f32>,\n    uColor:vec4<f32>,\n    uRound:f32,\n}\n\n\n@group(0) @binding(0) var<uniform> globalUniforms : GlobalUniforms;\n@group(1) @binding(0) var<uniform> localUniforms : LocalUniforms;\n\nstruct VertexOutput {\n    @builtin(position) position: vec4<f32>,\n    @location(0) vUV: vec2<f32>,\n    @location(1) vPositionOffset: vec2<f32>,\n    @location(2) vPosition: vec2<f32>,\n    @location(3) vColorTint: vec4<f32>\n};\n\n\n@vertex\nfn mainVert(\n    @location(0) aPosition : vec2<f32>,\n    @location(1) aUV : vec2<f32>,\n    @location(2) aColorTint : vec4<f32>,\n    @location(3) aPositionOffset : vec2<f32>,\n) -> VertexOutput {\n    var mvp = globalUniforms.uProjectionMatrix\n        * globalUniforms.uWorldTransformMatrix\n        * localUniforms.uTransformMatrix;\n\n    var output: VertexOutput;\n\n    output.position = vec4<f32>(mvp * vec3<f32>(aPosition+aPositionOffset, 1.0), 1.0);\n    output.vUV = aUV;\n    output.vPosition = aPosition;\n    output.vPositionOffset = aPositionOffset;\n    output.vColorTint = aColorTint;\n\n    return output;\n};\n\nstruct WaveUniforms {\n    time:f32,\n}\n\n@group(2) @binding(1) var uTexture : texture_2d<f32>;\n@group(2) @binding(2) var uSampler : sampler;\n@group(2) @binding(3) var<uniform> waveUniforms : WaveUniforms;\n\n@fragment\nfn mainFrag(\n    @location(0) vUV: vec2<f32>,\n    @location(1) vPositionOffset: vec2<f32>,\n    @location(2) vPosition: vec2<f32>,\n    @location(3) vColorTint: vec4<f32>\n) -> @location(0) vec4<f32> {\n    var a: f32 = ((vPositionOffset.y + vPosition.y)/1200.0) - 0.1;\n    let color: vec4<f32> = textureSample(uTexture, uSampler, vUV);\n    if (a > 1.0){\n        a = 1.0;\n    }\n    return (color*vColorTint)*a;\n};"},44160:function(e,t,i){i.r(t),t.default="in vec4 vColor;\nin vec2 vUV;\n\nuniform sampler2D uTexture;\nuniform float progress;\n\nvoid main() {\n    vec4 color = texture2D(uTexture, vUV);\n    float current = color.r;\n    float alpha = color.g;\n    gl_FragColor = current < progress ? vec4(vColor.rgb * alpha * alpha, alpha) : vec4(0);\n}\n"},26045:function(e,t,i){i.r(t),t.default="in vec2 aPosition;\nin vec4 aColor;\nin vec2 aUV;\n\nout vec4 vColor;\nout vec2 vUV;\n\nuniform mat3 uProjectionMatrix;\nuniform mat3 uWorldTransformMatrix;\n\nuniform mat3 uTransformMatrix;\n\n\nvoid main() {\n\n    mat3 mvp = uProjectionMatrix * uWorldTransformMatrix * uTransformMatrix;\n    gl_Position = vec4((mvp * vec3(aPosition, 1.0)).xy, 0.0, 1.0);\n\n    vColor = aColor;\n    vUV = aUV;\n}\n"},46110:function(e,t,i){i.r(t),t.default="struct GlobalUniforms {\n    uProjectionMatrix:mat3x3<f32>,\n    uWorldTransformMatrix:mat3x3<f32>,\n    uWorldColorAlpha: vec4<f32>,\n    uResolution: vec2<f32>,\n}\n\nstruct LocalUniforms {\n    uTransformMatrix:mat3x3<f32>,\n    uColor:vec4<f32>,\n    uRound:f32,\n}\n\n\n@group(0) @binding(0) var<uniform> globalUniforms : GlobalUniforms;\n@group(1) @binding(0) var<uniform> localUniforms : LocalUniforms;\n\nstruct VertexOutput {\n    @builtin(position) position: vec4<f32>,\n    @location(0) vUV: vec2<f32>,\n    @location(1) vColor: vec4<f32>,\n};\n\n\n@vertex\nfn mainVert(@location(0) aPosition : vec2<f32>, @location(1) aUV : vec2<f32>, @location(2) aColor: vec4<f32>\n) -> VertexOutput {\n    var mvp = globalUniforms.uProjectionMatrix\n        * globalUniforms.uWorldTransformMatrix\n        * localUniforms.uTransformMatrix;\n\n    var output: VertexOutput;\n\n    output.position = vec4<f32>(mvp * vec3<f32>(aPosition, 1.0), 1.0);\n    output.vUV = aUV;\n    output.vColor = aColor;\n\n    return output;\n};\n\nstruct ProgressUniform {\n    progress:f32\n}\n\n@group(2) @binding(1) var uTexture : texture_2d<f32>;\n@group(2) @binding(2) var uSampler : sampler;\n@group(2) @binding(3) var<uniform> uProgress : ProgressUniform;\n\n@fragment\nfn mainFrag(@location(0) vUV: vec2<f32>, @location(1) vColor: vec4<f32>) -> @location(0) vec4<f32> {\n    let color: vec4<f32> = textureSample(uTexture, uSampler, vUV);\n    let current: f32 = color.r;\n    let alpha: f32 = color.g;\n    var outColor: vec4<f32> = vec4<f32>(0.0);\n    if (current < uProgress.progress) {\n        outColor = vec4<f32>(vColor.rgb * alpha * alpha, alpha);\n    }\n    return outColor;\n};\n"}},i={};function n(e){var s=i[e];if(void 0!==s)return s.exports;var a=i[e]={id:e,loaded:!1,exports:{}};return t[e].call(a.exports,a,a.exports,n),a.loaded=!0,a.exports}n.m=t,e=[],n.O=function(t,i,s,a){if(!i){var o=1/0;for(c=0;c<e.length;c++){i=e[c][0],s=e[c][1],a=e[c][2];for(var r=!0,l=0;l<i.length;l++)(!1&a||o>=a)&&Object.keys(n.O).every((function(e){return n.O[e](i[l])}))?i.splice(l--,1):(r=!1,a<o&&(o=a));if(r){e.splice(c--,1);var u=s();void 0!==u&&(t=u)}}return t}a=a||0;for(var c=e.length;c>0&&e[c-1][2]>a;c--)e[c]=e[c-1];e[c]=[i,s,a]},n.d=function(e,t){for(var i in t)n.o(t,i)&&!n.o(e,i)&&Object.defineProperty(e,i,{enumerable:!0,get:t[i]})},n.hmd=function(e){return(e=Object.create(e)).children||(e.children=[]),Object.defineProperty(e,"exports",{enumerable:!0,set:function(){throw new Error("ES Modules may not assign module.exports or exports.*, Use ESM export syntax, instead: "+e.id)}}),e},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},function(){var e={179:0};n.O.j=function(t){return 0===e[t]};var t=function(t,i){var s,a,o=i[0],r=i[1],l=i[2],u=0;if(o.some((function(t){return 0!==e[t]}))){for(s in r)n.o(r,s)&&(n.m[s]=r[s]);if(l)var c=l(n)}for(t&&t(i);u<o.length;u++)a=o[u],n.o(e,a)&&e[a]&&e[a][0](),e[a]=0;return n.O(c)},i=self.webpackChunkkosu=self.webpackChunkkosu||[];i.forEach(t.bind(null,0)),i.push=t.bind(null,i.push.bind(i))}();var s=n.O(void 0,[151],(function(){return n(29820)}));s=n.O(s)}();
//# sourceMappingURL=game.306089bd99c736a5fd32.js.map