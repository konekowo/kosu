!function(){"use strict";var e,t={65918:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.MapAudio=t.Audio=void 0;class i{audio;timeStarted=0;source;id;isPlaying=!1;isPaused=!1;pausedTime=0;nodes=[];_connectedToContext=!1;Create(e){this.source=e.createBufferSource(),this.source.buffer=this.audio}AddAudioNode(e){if(!this.source)throw new Error("Source not created yet!");this.nodes.push(e)}GetNode(e){let t=this.nodes.filter((t=>t instanceof e));return t.length>0?t:null}ConnectToContext(e,t){if(!this.source)throw new Error("Source not created yet!");this._connectedToContext||(this._connectedToContext=!0,this.nodes.length>0?t?t(this.nodes,this.source):this.nodes.forEach(((t,i)=>{this.source.connect(t),t instanceof AnalyserNode||t.connect(e.destination)})):this.source.connect(e.destination))}Play(){if(!this.source)throw new Error("Source not created yet!");if(!this._connectedToContext)throw new Error("Not connected to audio context yet!");this.source.start(0,this.pausedTime),this.isPlaying=!0,this.isPaused=!1,this.timeStarted=Date.now()-this.pausedTime,this.pausedTime=0}Pause(){if(!this.source)throw new Error("Source not created yet!");if(!this._connectedToContext)throw new Error("Not connected to audio context yet!");this.pausedTime=Date.now()-this.timeStarted,this.source.stop(0),this.isPaused=!0,this.isPlaying=!1}Stop(){if(!this.source)throw new Error("Source not created yet!");if(!this._connectedToContext)throw new Error("Not connected to audio context yet!");this.source.stop(0),this.isPlaying=!1}RegisterEndCallBack(e){if(!this.source)throw new Error("Source not created yet!");this.source.onended=()=>{this.isPaused||this.isPlaying||e()}}}t.Audio=i;t.MapAudio=class extends i{beatmap;fadingOut=!1;fadeOutTimeout;playingCallback}},85437:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.AudioEngine=void 0;const s=i(14981),n=i(65918);t.AudioEngine=class{audioContext;_playingAudios;_musicQueue=[];_audioIdTicker=0;_changeCallbacks=[];constructor(){this.audioContext=new AudioContext,this._playingAudios=new s.PlayingAudios}Update(){this._musicQueue[0]&&(this._musicQueue[0].fadingOut||0!=this._musicQueue[0].timeStarted||(this._play(this._musicQueue[0]),this._changeCallbacks.forEach((e=>e()))),this._musicQueue[0].fadingOut&&this._musicQueue[1]&&this._musicQueue[1]&&(this._play(this._musicQueue[1]),this._changeCallbacks.forEach((e=>e()))))}addMusicChangeEventListener(e){this._changeCallbacks.push(e)}removeMusicChangeEventListener(e){this._changeCallbacks=this._changeCallbacks.filter((t=>t!=e))}GetCurrentPlayingMusic(){return this._musicQueue[0]}_play(e,t){if(e.Create(this.audioContext),"beatmap"in e&&e.beatmap){this._playingAudios.audios.forEach((e=>{if("beatmap"in e&&e.beatmap){clearTimeout(e.fadeOutTimeout),e.fadingOut=!0;let t=e.GetNode(GainNode);if(null==t)throw new Error("Gain Node doesn't exist on Audio Object!");t[0].gain.linearRampToValueAtTime(0,this.audioContext.currentTime+.4),setTimeout((()=>{e.Stop()}),400)}}));let t=this.audioContext.createGain();t.gain.value=0;let i=this.audioContext.createAnalyser();i.fftSize=1024;let s=this.audioContext.createBiquadFilter();s.type="lowpass",s.frequency.value=75,s.Q.value=1,e.AddAudioNode(i),e.AddAudioNode(t),e.AddAudioNode(s),e.ConnectToContext(this.audioContext,((e,t)=>{let i;e.forEach((e=>{e instanceof GainNode&&(t.connect(e),e.connect(this.audioContext.destination)),e instanceof AnalyserNode&&(i=e)})),e.forEach((e=>{e instanceof BiquadFilterNode&&(t.connect(e),e.connect(i))}))})),e.Play(),this._playingAudios.audios.push(e),e.playingCallback&&e.playingCallback(),t.gain.linearRampToValueAtTime(1,this.audioContext.currentTime+.4),e.fadeOutTimeout=setTimeout((()=>{t.gain.linearRampToValueAtTime(0,this.audioContext.currentTime+.4)}),1e3*(e.audio.duration-.4))}else e.ConnectToContext(this.audioContext),t&&e.source&&(e.source.playbackRate.value=t),e.Play(),this._playingAudios.audios.push(e);e.RegisterEndCallBack((()=>{e.isPlaying=!1,"beatmap"in e&&e.beatmap&&this._musicQueue[0]==e&&this._musicQueue.splice(0,1),this._playingAudios.audios.forEach(((t,i)=>{t!==e||this._playingAudios.audios.splice(i,1)})),this.Update()}))}PlayEffect(e,t){let i=new n.Audio;i.audio=e,i.id=this._audioIdTicker,this._play(i,t),this._audioIdTicker++}AddToMusicQueue(e,t,i){let s=new n.MapAudio;return s.audio=e,s.beatmap=t,s.id=this._audioIdTicker,i&&(s.playingCallback=i),this._musicQueue.push(s),this._audioIdTicker++,this.Update(),s.id}PlayMusicImmediately(e,t,i){this._musicQueue=[],this.AddToMusicQueue(e,t,i)}}},14981:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.PlayingAudios=void 0;t.PlayingAudios=class{audios=[]}},9611:function(e,t,i){var s=this&&this.__createBinding||(Object.create?function(e,t,i,s){void 0===s&&(s=i);var n=Object.getOwnPropertyDescriptor(t,i);n&&!("get"in n?!t.__esModule:n.writable||n.configurable)||(n={enumerable:!0,get:function(){return t[i]}}),Object.defineProperty(e,s,n)}:function(e,t,i,s){void 0===s&&(s=i),e[s]=t[i]}),n=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),a=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)"default"!==i&&Object.prototype.hasOwnProperty.call(e,i)&&s(t,e,i);return n(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.LogoVisualizer=void 0;const o=i(20825),r=a(i(58687)),u=i(5825);class d extends r.Container{static size=900;index_change=5;bar_length=5;bars_per_visualiser=200;visualiser_rounds=5;decay_per_millisecond=.0024;time_between_updates=50;amplitude_dead_zone=1/this.bar_length;alphaMultiplier=1;audio;analyzer;bufferLength;amplitudes;temporalAmplitudes=new Uint8Array(256);frequencyAmplitudes=new Uint8Array(256);audioData=new Uint8Array(256);graphics=new r.Graphics;indexOffset=0;start(){o.Main.AudioEngine.addMusicChangeEventListener((()=>this.initVisualizer())),this.graphics.blendMode="add",this.addChild(this.graphics),this.graphics.eventMode="none",this.eventMode="none",setInterval((()=>{this.updateAmplitudes()}),this.time_between_updates)}updateAmplitudes(){let e=this.amplitudes.length/2;this.amplitudes.slice(100,e+100);for(let e=3;e<this.amplitudes.length;e++)this.temporalAmplitudes[e]=this.amplitudes[e];for(let e=0;e<this.bars_per_visualiser;e++){let t=.5*this.temporalAmplitudes[(e+this.indexOffset)%this.bars_per_visualiser];t>this.frequencyAmplitudes[e]&&(this.frequencyAmplitudes[e]=t)}this.indexOffset=(this.indexOffset+this.index_change)%this.bars_per_visualiser}initVisualizer(){this.audio=o.Main.AudioEngine.GetCurrentPlayingMusic();const e=this.audio.GetNode(AnalyserNode);if(null==e)throw new Error("Couldn't find any AnalyzerNode on Audio Object!");this.analyzer=e[0],this.bufferLength=256,this.bars_per_visualiser=this.bufferLength,this.amplitudes=new Uint8Array(this.bufferLength)}draw(e){this.graphics.clear(),this.analyzer.getByteFrequencyData(this.amplitudes);let t=e.deltaMS*this.decay_per_millisecond;for(let e=0;e<this.bars_per_visualiser;e++)this.frequencyAmplitudes[e]-=t*(this.frequencyAmplitudes[e]+.03),this.frequencyAmplitudes[e]<0&&(this.frequencyAmplitudes[e]=0);this.audioData=new Uint8Array(this.frequencyAmplitudes);for(let e=0;e<this.visualiser_rounds;e++)for(let t=0;t<this.bars_per_visualiser;t++){if(this.audioData[t]<this.amplitude_dead_zone)continue;let i=u.MathUtil.DegreesToRadians(t/this.bars_per_visualiser*360+360*e/this.visualiser_rounds),s=Math.cos(i),n=Math.sin(i),a={x:(s/2+.5)*d.size,y:(n/2+.5)*d.size},o={x:d.size*Math.sqrt(2*(1-Math.cos(u.MathUtil.DegreesToRadians(360/this.bars_per_visualiser))))/2,y:this.bar_length*this.audioData[t]},r={x:s*o.y,y:n*o.y};this.graphics.moveTo(a.x,a.y),this.graphics.lineTo(a.x+r.x,a.y+r.y),this.graphics.stroke({color:"rgba(255, 255, 255, "+.2*this.alphaMultiplier+")",width:10})}}}t.LogoVisualizer=d},8211:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.MenuLogoVisualizer=void 0;const s=i(9611);class n extends s.LogoVisualizer{draw(e){super.draw(e)}}t.MenuLogoVisualizer=n},49323:function(e,t,i){var s=this&&this.__createBinding||(Object.create?function(e,t,i,s){void 0===s&&(s=i);var n=Object.getOwnPropertyDescriptor(t,i);n&&!("get"in n?!t.__esModule:n.writable||n.configurable)||(n={enumerable:!0,get:function(){return t[i]}}),Object.defineProperty(e,s,n)}:function(e,t,i,s){void 0===s&&(s=i),e[s]=t[i]}),n=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),a=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)"default"!==i&&Object.prototype.hasOwnProperty.call(e,i)&&s(t,e,i);return n(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.LoadAnim=void 0;const o=a(i(58687)),r=i(23360);class u extends o.Container{bg;arc;arcContainer;animInterval;container;bgContainer;bgRotation=0;constructor(e,t){super(),this.pivot.set(.5,.5),this.container=new o.Container,this.container.alpha=0,this.rotation=2.5*Math.PI,this.bgContainer=new o.Container,this.bg=new o.Graphics,this.bg.roundRect(-50,-50,100,100,25),this.bg.fill(e),this.arcContainer=new o.Container,this.arc=new o.Graphics,this.arc.arc(0,0,27,Math.PI+.26,2.92*Math.PI),this.arc.stroke({width:8,color:t,cap:"round"}),this.arc.scale.set(-1,1),this.container.scale.set(.5,.5),this.bgContainer.addChild(this.bg),this.arcContainer.addChild(this.arc),this.bgContainer.addChild(this.arcContainer),this.container.addChild(this.bgContainer),this.addChild(this.container),r.ease.add(this.container,{alpha:1,scale:1},{duration:400,ease:"easeInOutQuad"}),this.doAnims(),this.animInterval=setInterval((()=>{this.doAnims()}),800)}doAnims(){this.bgRotation+=90,r.ease.add(this.bgContainer,{angle:this.bgRotation},{duration:600,ease:"easeInOutQuad"})}getWidth(){return 100*this.scale.x}getHeight(){return 100*this.scale.y}draw(e){this.arcContainer.angle+=3*e.deltaTime}destroy(e){r.ease.add(this.container,{alpha:0,scale:.5},{duration:400,ease:"easeInOutQuad"}),setTimeout((()=>{clearInterval(this.animInterval),super.destroy(e)}),400)}}t.LoadAnim=u},16982:function(e,t,i){var s=this&&this.__createBinding||(Object.create?function(e,t,i,s){void 0===s&&(s=i);var n=Object.getOwnPropertyDescriptor(t,i);n&&!("get"in n?!t.__esModule:n.writable||n.configurable)||(n={enumerable:!0,get:function(){return t[i]}}),Object.defineProperty(e,s,n)}:function(e,t,i,s){void 0===s&&(s=i),e[s]=t[i]}),n=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),a=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)"default"!==i&&Object.prototype.hasOwnProperty.call(e,i)&&s(t,e,i);return n(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.Menu=void 0;const o=a(i(58687)),r=i(23360);class u extends o.Container{menuBG=new o.Graphics;isOpened=!1;openAnim;constructor(){super(),this.menuBG.rect(0,-62.5,1,125),this.menuBG.fill({color:"rgb(50,50,50)"}),this.menuBG.scale.set(1,0),this.menuBG.alpha=0,this.addChild(this.menuBG)}Open(){this.isOpened=!0,this.openAnim=r.ease.add(this.menuBG,{scaleY:1,alpha:1},{duration:400,ease:"easeOutQuint"})}Close(){this.isOpened=!1,this.openAnim&&this.openAnim.remove(),r.ease.add(this.menuBG,{scaleY:0,alpha:0},{duration:300,ease:"easeInSine"})}isOpen(){return this.isOpened}onResize(){this.position.set(-window.innerWidth,0),this.menuBG.width=2*window.innerWidth}}t.Menu=u},54349:function(e,t,i){var s=this&&this.__createBinding||(Object.create?function(e,t,i,s){void 0===s&&(s=i);var n=Object.getOwnPropertyDescriptor(t,i);n&&!("get"in n?!t.__esModule:n.writable||n.configurable)||(n={enumerable:!0,get:function(){return t[i]}}),Object.defineProperty(e,s,n)}:function(e,t,i,s){void 0===s&&(s=i),e[s]=t[i]}),n=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),a=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)"default"!==i&&Object.prototype.hasOwnProperty.call(e,i)&&s(t,e,i);return n(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.OsuCircle=void 0;const o=a(i(58687)),r=i(44961),u=i(23360),d=i(20825),l=i(12235),h=i(16982),c=i(8211),p=i(9611);class g extends o.Container{outline;visualizer=new c.MenuLogoVisualizer;triangles=new r.Triangles;beatContainer=new o.Container;hoverContainer=new o.Container;moveContainer=new o.Container;parallaxContainer=new o.Container;menu=new h.Menu;isBeingHovered=!1;defaultVisualizerAlpha=.5;timeElapsedSinceLastBeat=0;visualizerAnimationDummy=new o.Container;constructor(){super(),this.visualizer.start(),this.outline=o.Sprite.from("mainMenu.logoOutline"),this.outline.anchor.set(.5,.5);let e=.6;this.visualizer.position.set(-p.LogoVisualizer.size/3.35,-p.LogoVisualizer.size/3.35),this.visualizer.scale.set(e),this.visualizer.alphaMultiplier=this.defaultVisualizerAlpha,this.beatContainer.addChild(this.visualizer);let t=o.Sprite.from("mainMenu.logoMask");t.anchor.set(.5,.5),t.scale=e;let i=o.Sprite.from("mainMenu.logoMask");i.anchor.set(.5,.5),i.scale=e,i.blendMode="add",i.alpha=0,this.outline.scale.set(e),this.triangles.scale.set(e),this.triangles.position.set(-this.outline.width/2,-this.outline.height/2),this.triangles.mask=t,this.parallaxContainer.addChild(this.menu),this.beatContainer.addChild(this.triangles),this.beatContainer.addChild(t),this.beatContainer.addChild(i),this.beatContainer.addChild(this.outline),this.hoverContainer.addChild(this.beatContainer),this.moveContainer.addChild(this.hoverContainer),this.parallaxContainer.addChild(this.moveContainer),this.addChild(this.parallaxContainer),this.hoverContainer.eventMode="dynamic",this.hoverContainer.hitArea=new o.Circle(0,0,300);let s=l.Loader.GetAudio("mainMenu.osuLogo.select"),n=l.Loader.GetAudio("mainMenu.osuLogo.backToLogo");const a=()=>{this.isBeingHovered=!0,u.ease.add(this.hoverContainer,{scale:1.1},{duration:500,ease:"easeOutElastic"})};let r;this.hoverContainer.hitArea.contains(d.Main.mousePos.x,d.Main.mousePos.y)&&a(),this.hoverContainer.addEventListener("mouseenter",(()=>{a()})),this.hoverContainer.addEventListener("mouseleave",(()=>{this.isBeingHovered=!1,u.ease.add(this.hoverContainer,{scale:1},{duration:500,ease:"easeOutElastic"})})),this.hoverContainer.addEventListener("mousedown",(()=>{r=u.ease.add(this.hoverContainer,{scale:.9},{duration:1e3,ease:"easeOutSine"})}));const h=()=>{r&&r.remove(),u.ease.add(this.hoverContainer,{scale:this.isBeingHovered?1.1:1},{duration:500,ease:"easeOutElastic"})};let c,g,m,f;this.hoverContainer.addEventListener("mouseup",(()=>{h()})),this.hoverContainer.addEventListener("click",(()=>{this.menu.isOpen()||(this.isBeingHovered=!1),h(),this.menu.isOpen()||(m&&m.remove(),f&&f.remove()),i.alpha=.4,u.ease.add(i,{alpha:0},{duration:1500,ease:"easeOutExpo"}),this.menu.isOpen()||(d.Main.AudioEngine.PlayEffect(s),c=u.ease.add(this.moveContainer,{position:{x:-250,y:0}},{duration:200,ease:"easeInSine"}).once("complete",(()=>{this.menu.Open()})),g=u.ease.add(this.moveContainer,{scale:.5},{duration:200,ease:"easeInSine"}))})),window.addEventListener("keyup",(e=>{"Escape"!=e.key&&"`"!=e.key||this.menu.isOpen()&&(c.remove(),g.remove(),d.Main.AudioEngine.PlayEffect(n),this.menu.Close(),m=u.ease.add(this.moveContainer,{position:{x:0,y:0}},{duration:800,ease:"easeOutExpo"}),f=u.ease.add(this.moveContainer,{scale:1},{duration:800,ease:"easeOutExpo"}))}))}onNewBeat(){let e=0;this.visualizer.audioData.forEach((t=>{e<t&&(e=t)}));let t=Math.min(1,.4+e);u.ease.add(this.beatContainer,{scale:1-.02*t},{ease:"linear",duration:60}).once("complete",(()=>{u.ease.add(this.beatContainer,{scale:1},{ease:"easeOutQuint",duration:750})})),u.ease.add(this.triangles.flash,{alpha:.2*t},{duration:60,ease:"linear"}).once("complete",(()=>{u.ease.add(this.triangles.flash,{alpha:0},{duration:375})})),u.ease.add(this.visualizerAnimationDummy,{alpha:1.8*this.defaultVisualizerAlpha*t},{duration:60,ease:"linear"}).on("each",(()=>{this.visualizer.alphaMultiplier=this.visualizerAnimationDummy.alpha})).once("complete",(()=>{u.ease.add(this.visualizerAnimationDummy,{alpha:this.defaultVisualizerAlpha},{duration:375,ease:"linear"}).on("each",(()=>{this.visualizer.alphaMultiplier=this.visualizerAnimationDummy.alpha}))}))}onResize(){this.menu.onResize()}draw(e){this.visualizer.draw(e),this.triangles.draw(e),this.menu.isOpen()?this.parallaxContainer.position.set(d.Main.mousePos.x/120,d.Main.mousePos.y/120):this.parallaxContainer.position.set(0,0),this.timeElapsedSinceLastBeat+=e.deltaMS,this.timeElapsedSinceLastBeat>=375&&(this.onNewBeat(),this.timeElapsedSinceLastBeat=0)}}t.OsuCircle=g},44961:function(e,t,i){var s=this&&this.__createBinding||(Object.create?function(e,t,i,s){void 0===s&&(s=i);var n=Object.getOwnPropertyDescriptor(t,i);n&&!("get"in n?!t.__esModule:n.writable||n.configurable)||(n={enumerable:!0,get:function(){return t[i]}}),Object.defineProperty(e,s,n)}:function(e,t,i,s){void 0===s&&(s=i),e[s]=t[i]}),n=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),a=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)"default"!==i&&Object.prototype.hasOwnProperty.call(e,i)&&s(t,e,i);return n(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.Triangles=void 0;const o=a(i(58687));class r extends o.Container{bgGradient;triangles=[];triangleGenInterval;graphics=new o.Graphics;flash;constructor(){super();let e=[16737963,13390473];function t(e,t){return Math.random()*(t-e)+e}function i(){let e=1-t(0,1),i=1-t(0,1),s=Math.sqrt(-2*Math.log(e))*Math.sin(2*Math.PI*i);return Math.max(.5+.16*s,.1)}this.bgGradient=new o.FillGradient(0,0,0,1024),e.forEach(((t,i)=>{const s=i/e.length;this.bgGradient.addColorStop(s,t)}));for(let e=0;e<15;e++)this.triangles.push({x:t(0,1024),y:t(0,1024),velocity:i()});this.triangleGenInterval=setInterval((()=>{document.hasFocus()&&this.triangles.push({x:t(0,1024),y:974,velocity:i()})}),800),this.graphics.rect(0,0,1024,1024),this.graphics.fill(this.bgGradient),this.addChild(this.graphics),this.flash=o.Sprite.from("mainMenu.logoMask"),this.flash.alpha=0,this.flash.blendMode="add",this.addChild(this.flash)}destroy(e){super.destroy(e)}draw(e){this.destroyed||document.hasFocus()&&(this.graphics.clear(),this.graphics.rect(0,0,1024,1024),this.graphics.fill(this.bgGradient),this.triangles.forEach(((t,i)=>{t.y-=e.deltaTime*t.velocity*4,this.graphics.moveTo(t.x,t.y),this.graphics.lineTo(t.x-250,t.y+400),this.graphics.lineTo(t.x+250,t.y+400),this.graphics.lineTo(t.x,t.y);let s=1;t.y+50<300&&(s=(t.y+50)/300),s=Math.min(Math.max(s,0),1),this.graphics.stroke({color:new o.Color("rgba(182, 52, 111, "+s.toFixed(6)+")"),width:4}),t.y+400<0&&this.triangles.splice(i,1)})))}}t.Triangles=r},55686:function(e,t,i){var s=this&&this.__createBinding||(Object.create?function(e,t,i,s){void 0===s&&(s=i);var n=Object.getOwnPropertyDescriptor(t,i);n&&!("get"in n?!t.__esModule:n.writable||n.configurable)||(n={enumerable:!0,get:function(){return t[i]}}),Object.defineProperty(e,s,n)}:function(e,t,i,s){void 0===s&&(s=i),e[s]=t[i]}),n=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),a=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)"default"!==i&&Object.prototype.hasOwnProperty.call(e,i)&&s(t,e,i);return n(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.MenuCursor=void 0;const o=a(i(58687)),r=i(20825),u=i(23360),d=i(12235),l=i(5825);class h extends o.Container{mouseCursor=o.Sprite.from("menu.cursor");mouseCursorAdditive=o.Sprite.from("menu.cursor.additive");mouseContainer=new o.Container;animContainer=new o.Container;animRotationContainer=new o.Container;mouseDownScaleAnim;mouseDownAdditiveAnim;mouseUpScaleAnim;mouseUpAdditiveAnim;mouseRotationAnim;dragRotationState=c.NotDragging;lastDragRotationState=c.NotDragging;mouseHideContainer=new o.Container;hideScaleAnim;hideAlphaAnim;posMouseDown={x:0,y:0};mouseIsDown=!1;cursorTapSample=d.Loader.GetAudio("menu.cursor.sample.tap");mouseButtonClicked=-9999;constructor(e){super(),this.updateMouse(),this.mouseContainer.scale.set(.07),this.mouseCursorAdditive.alpha=0,this.mouseCursorAdditive.blendMode="add",this.mouseCursorAdditive.tint="0xFF66AA",this.mouseContainer.addChild(this.mouseCursor),this.mouseContainer.addChild(this.mouseCursorAdditive),this.animContainer.addChild(this.mouseContainer),this.animRotationContainer.addChild(this.animContainer),this.mouseHideContainer.addChild(this.animRotationContainer),this.addChild(this.mouseHideContainer),e||(this.mouseHideContainer.scale.set(.6),this.mouseHideContainer.alpha=0,this.animRotationContainer.angle=0),this.zIndex=999999,this.eventMode="none",r.Main.app.stage.addChild(this),this.addEventListeners()}addEventListeners(){r.Main.app.stage.addEventListener("mousedown",(e=>{this.mouseButtonClicked=e.button,this.visible&&(this.posMouseDown={x:r.Main.mousePos.x,y:r.Main.mousePos.y},this.mouseIsDown=!0,this.dragRotationState=c.DragStarted,this.mouseUpScaleAnim&&this.mouseUpAdditiveAnim&&(this.mouseUpScaleAnim.remove(),this.mouseUpAdditiveAnim.remove()),this.mouseDownScaleAnim=u.ease.add(this.animContainer,{scale:.9},{ease:"easeOutQuint",duration:800}),this.mouseDownAdditiveAnim=u.ease.add(this.mouseCursorAdditive,{alpha:1},{ease:"easeOutQuint",duration:800}),r.Main.AudioEngine.PlayEffect(this.cursorTapSample))})),r.Main.app.stage.addEventListener("mouseup",(e=>{this.visible&&e.button==this.mouseButtonClicked&&(this.mouseIsDown=!1,this.mouseDownScaleAnim&&this.mouseDownAdditiveAnim&&(this.mouseDownAdditiveAnim.remove(),this.mouseDownScaleAnim.remove()),this.mouseUpScaleAnim=u.ease.add(this.animContainer,{scale:1},{ease:"easeOutElastic",duration:500}),this.mouseUpAdditiveAnim=u.ease.add(this.mouseCursorAdditive,{alpha:0},{ease:"easeOutQuint",duration:500}),this.dragRotationState!=c.NotDragging&&(this.dragRotationState==c.Rotating&&(this.mouseRotationAnim=u.ease.add(this.animRotationContainer,{angle:0},{ease:"easeOutElastic",duration:800*(.5+Math.abs(this.animRotationContainer.angle/960))})),this.dragRotationState=c.NotDragging),r.Main.AudioEngine.PlayEffect(this.cursorTapSample,.8))}))}PopIn(){this.mouseRotationAnim&&this.mouseRotationAnim.remove(),this.hideAlphaAnim&&this.hideScaleAnim&&(this.hideAlphaAnim.remove(),this.hideScaleAnim.remove()),this.visible=!0,this.hideAlphaAnim=u.ease.add(this.mouseHideContainer,{alpha:1},{duration:250,ease:"easeOutQuint"}),this.hideScaleAnim=u.ease.add(this.mouseHideContainer,{scale:1},{duration:400,ease:"easeOutQuint"}),this.mouseRotationAnim=u.ease.add(this.animRotationContainer,{angle:0},{duration:400,ease:"easeOutQuint"}),this.dragRotationState=c.NotDragging}PopOut(){this.mouseRotationAnim&&this.mouseRotationAnim.remove(),this.hideAlphaAnim&&this.hideScaleAnim&&(this.hideAlphaAnim.remove(),this.hideScaleAnim.remove()),this.hideAlphaAnim=u.ease.add(this.mouseHideContainer,{alpha:0},{duration:250,ease:"easeOutQuint"}),this.hideScaleAnim=u.ease.add(this.mouseHideContainer,{scale:.6},{duration:250,ease:"easeOutQuint"}),this.mouseRotationAnim=u.ease.add(this.animRotationContainer,{angle:0},{duration:400,ease:"easeOutQuint"}),this.hideAlphaAnim.once("complete",(()=>{this.visible=!1})),this.dragRotationState=c.NotDragging}updateMouse(){if(this.position.set(r.Main.mousePos.x,r.Main.mousePos.y),this.dragRotationState!=c.NotDragging&&this.visible){let e=Math.sqrt((2^Math.abs(this.posMouseDown.x-r.Main.mousePos.x))+(2^Math.abs(this.posMouseDown.y-r.Main.mousePos.y)));if(this.dragRotationState==c.DragStarted&&e>15&&(this.dragRotationState=c.Rotating,this.lastDragRotationState!=this.dragRotationState&&(this.posMouseDown={x:r.Main.mousePos.x,y:r.Main.mousePos.y})),this.dragRotationState==c.Rotating&&e>0){this.mouseRotationAnim&&this.mouseRotationAnim.remove();let e=r.Main.mousePos.x-this.posMouseDown.x,t=r.Main.mousePos.y-this.posMouseDown.y,i=l.MathUtil.RadiansToDegrees(Math.atan2(-e,t))+24.3,s=(i-this.animRotationContainer.angle)%360;s<-180&&(s+=360),s>180&&(s-=360),i=this.animRotationContainer.angle+s,this.mouseRotationAnim=u.ease.add(this.animRotationContainer,{angle:i},{duration:120,ease:"easeOutQuint"})}}this.lastDragRotationState=this.dragRotationState}}var c;t.MenuCursor=h,function(e){e[e.NotDragging=0]="NotDragging",e[e.DragStarted=1]="DragStarted",e[e.Rotating=2]="Rotating"}(c||(c={}))},36721:function(e,t,i){var s=this&&this.__createBinding||(Object.create?function(e,t,i,s){void 0===s&&(s=i);var n=Object.getOwnPropertyDescriptor(t,i);n&&!("get"in n?!t.__esModule:n.writable||n.configurable)||(n={enumerable:!0,get:function(){return t[i]}}),Object.defineProperty(e,s,n)}:function(e,t,i,s){void 0===s&&(s=i),e[s]=t[i]}),n=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),a=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)"default"!==i&&Object.prototype.hasOwnProperty.call(e,i)&&s(t,e,i);return n(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.RandomBackground=void 0;const o=a(i(58687)),r=i(12235),u=i(84283),d=i(23360),l=i(20825);class h extends u.Screen{bgContainer=new o.Container;parallaxMultiplier=60;start(){this.bgContainer.pivot.set(.5,.5),this.bgContainer.position.set((l.Main.mousePos.x-this.getScreenWidth()/2)/this.parallaxMultiplier,(l.Main.mousePos.y-this.getScreenHeight()/2)/this.parallaxMultiplier),this.addChild(this.bgContainer),this.newRandomBG(),l.Main.AudioEngine.addMusicChangeEventListener((()=>{this.newRandomBG()}))}setBG(e){if(0==this.bgContainer.children?.length)this.bgContainer.addChild(e);else{let t=this.bgContainer.children[0];e.zIndex=-1,this.bgContainer.addChild(e),d.ease.add(t,{alpha:0},{duration:800,ease:"linear"}).once("complete",(()=>{e.zIndex=0,t.destroy()}))}e.anchor.set(.5,.5),this.onResize()}newRandomBG(){let e=r.Loader.seasonalBackgroundsNum>0,t=(i=1,s=e?r.Loader.seasonalBackgroundsNum:r.Loader.defaultBackgroundsNum,Math.round(Math.random()*(s-i)+i));var i,s;this.setBG(o.Sprite.from((e?"seasonal_bg":"default_bg")+t))}draw(e){this.bgContainer.position.set((l.Main.mousePos.x-this.getScreenWidth()/2)/this.parallaxMultiplier,(l.Main.mousePos.y-this.getScreenHeight()/2)/this.parallaxMultiplier)}onClose(){return Promise.resolve(this)}onResize(){this.bgContainer.children.forEach((e=>{if(e instanceof o.Sprite){let t,i=e.texture.width,s=e.texture.height;t=window.innerWidth>window.innerHeight?window.innerWidth/i:window.innerHeight/s,s*t<window.innerHeight?t=window.innerHeight/s:window.innerWidth,e.scale.set(t+.05),e.position.set(this.getScreenWidth()/2-this.getScreenWidth()/(2*this.parallaxMultiplier),this.getScreenHeight()/2-this.getScreenHeight()/(2*this.parallaxMultiplier))}}))}}t.RandomBackground=h},12235:function(e,t,i){var s=this&&this.__createBinding||(Object.create?function(e,t,i,s){void 0===s&&(s=i);var n=Object.getOwnPropertyDescriptor(t,i);n&&!("get"in n?!t.__esModule:n.writable||n.configurable)||(n={enumerable:!0,get:function(){return t[i]}}),Object.defineProperty(e,s,n)}:function(e,t,i,s){void 0===s&&(s=i),e[s]=t[i]}),n=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),a=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)"default"!==i&&Object.prototype.hasOwnProperty.call(e,i)&&s(t,e,i);return n(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.Loader=void 0;const o=a(i(58687));t.Loader=class{static loadList=[];static loadedList=[];static defaultBackgroundsNum=8;static seasonalBackgroundsNum=0;static addToLoadList(){this.loadList.push({id:"introTrianglesTrack",url:"assets/osu-assets/osu.Game.Resources/Tracks/triangles.osz"}),this.loadList.push({id:"sample_dialog_ok",url:"assets/osu-assets/osu.Game.Resources/Samples/UI/dialog-ok-select.wav",isAudio:!0}),this.loadList.push({id:"TorusRegular",url:"assets/fonts/TorusRegular.otf",pixiBundleName:"fonts"}),this.loadList.push({id:"TorusLight",url:"assets/fonts/TorusLight.otf",pixiBundleName:"fonts"}),this.loadList.push({id:"TorusThin",url:"assets/fonts/TorusThin.otf",pixiBundleName:"fonts"}),this.loadList.push({id:"icon_ruleset_std",url:"assets/icons/ruleset-standard.png",pixiBundleName:"textures"}),this.loadList.push({id:"icon_ruleset_mania",url:"assets/icons/ruleset-mania.png",pixiBundleName:"textures"}),this.loadList.push({id:"icon_ruleset_taiko",url:"assets/icons/ruleset-taiko.png",pixiBundleName:"textures"}),this.loadList.push({id:"icon_ruleset_ctb",url:"assets/icons/ruleset-ctb.png",pixiBundleName:"textures"}),this.loadList.push({id:"intro_triangles_osuLogo_anim_highlight",url:"assets/osu-assets/osu.Game.Resources/Textures/Intro/Triangles/logo-highlight.png",pixiBundleName:"textures"}),this.loadList.push({id:"intro_triangles_osuLogo_anim_background",url:"assets/osu-assets/osu.Game.Resources/Textures/Intro/Triangles/logo-background.png",pixiBundleName:"textures"}),this.loadList.push({id:"mainMenu.logoOutline",url:"assets/osu-assets/osu.Game.Resources/Textures/Menu/logo.png",pixiBundleName:"textures"}),this.loadList.push({id:"mainMenu.logoMask",url:"assets/menu/logo-mask.png",pixiBundleName:"textures"}),this.loadList.push({id:"mainMenu.osuLogo.select",url:"assets/osu-assets/osu.Game.Resources/Samples/Menu/osu-logo-select.wav",isAudio:!0}),this.loadList.push({id:"mainMenu.osuLogo.backToLogo",url:"assets/osu-assets/osu.Game.Resources/Samples/Menu/back-to-logo.wav",isAudio:!0}),this.loadList.push({id:"webgl:shaders/logoAnimation.frag",url:"assets/shaders/webgl/logoAnimation.frag",isText:!0}),this.loadList.push({id:"webgl:shaders/logoAnimation.vert",url:"assets/shaders/webgl/logoAnimation.vert",isText:!0}),this.loadList.push({id:"menu.cursor",url:"assets/osu-assets/osu.Game.Resources/Textures/Cursor/menu-cursor.png",pixiBundleName:"textures"}),this.loadList.push({id:"menu.cursor.additive",url:"assets/osu-assets/osu.Game.Resources/Textures/Cursor/menu-cursor-additive.png",pixiBundleName:"textures"}),this.loadList.push({id:"menu.cursor.sample.tap",url:"assets/osu-assets/osu.Game.Resources/Samples/UI/cursor-tap.wav",isAudio:!0})}static Get(e){let t;if(this.loadedList.forEach((i=>{i.id==e&&(t=i.data)})),!t)throw new Error("Asset not found!");return t}static GetString(e){let t;if(this.loadedList.forEach((i=>{i.id==e&&(t=i.dataString)})),!t)throw new Error("Asset not found or is not a string!");return t}static GetAudio(e){let t;if(this.loadedList.forEach((i=>{i.id==e&&(t=i.dataAudio)})),!t)throw new Error("Asset not found or was not marked as audio during loading!");return t}static addBackgrounds(){return new Promise((e=>{for(let e=1;e<this.defaultBackgroundsNum+1;e++)this.loadList.push({id:"default_bg"+e,url:"assets/osu-assets/osu.Game.Resources/Textures/Menu/menu-background-"+e+".jpg",pixiBundleName:"textures"});fetch("https://corsproxy.io/?"+encodeURIComponent("https://osu.ppy.sh/api/v2/seasonal-backgrounds")).then((e=>e.json())).then((t=>{t.backgrounds.forEach(((e,t)=>{this.loadList.push({id:"seasonal_bg"+(t+1),url:"https://corsproxy.io/?"+encodeURIComponent(e.url),pixiBundleName:"textures",loadParser:"loadTextures"}),this.seasonalBackgroundsNum=t+1})),e()})).catch((t=>{console.warn("Could not fetch seasonal backgrounds.",t),e()}))}))}static Load(e){return this.addToLoadList(),new Promise((t=>{this.addBackgrounds().then((()=>{let i=[],s=[],n=[],a=0,r=0;this.loadList.forEach((e=>{e.pixiBundleName?s.push(e):i.push(e)})),s.forEach((e=>{let t=!1;n.forEach((i=>{i.length>0&&i[0].pixiBundleName==e.pixiBundleName&&(i.push(e),t=!0)})),t||n.push([e])}));const u=e=>{e?r++:a++,r+a>=this.loadList.length&&t()};i.forEach((t=>{fetch(t.url).then((e=>e.blob())).then((i=>{t.isText||t.isAudio?t.isText?i.text().then((e=>{u(),this.loadedList.push({id:t.id,data:i,dataString:e})})):t.isAudio&&i.arrayBuffer().then((t=>e.decodeAudioData(t))).then((e=>{u(),this.loadedList.push({id:t.id,data:i,dataAudio:e})})):(u(),this.loadedList.push({id:t.id,data:i}))})).catch((e=>{u(!0),console.warn("Asset '"+t.id+"' failed to load: "+e)}))})),n.forEach((e=>{if(e.length>0){if(!e[0].pixiBundleName)throw new Error("wtf????");let t=[];e.forEach((e=>{e.loadParser?t.push({alias:e.id,src:e.url,loadParser:e.loadParser}):t.push({alias:e.id,src:e.url})})),o.Assets.addBundle(e[0].pixiBundleName,t),o.Assets.loadBundle(e[0].pixiBundleName).then((()=>{e.forEach((()=>{u()}))}))}}))}))}))}}},25373:function(e,t,i){var s=this&&this.__createBinding||(Object.create?function(e,t,i,s){void 0===s&&(s=i);var n=Object.getOwnPropertyDescriptor(t,i);n&&!("get"in n?!t.__esModule:n.writable||n.configurable)||(n={enumerable:!0,get:function(){return t[i]}}),Object.defineProperty(e,s,n)}:function(e,t,i,s){void 0===s&&(s=i),e[s]=t[i]}),n=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),a=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)"default"!==i&&Object.prototype.hasOwnProperty.call(e,i)&&s(t,e,i);return n(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.InteractScreen=void 0;const o=i(84283),r=a(i(58687)),u=i(20825),d=i(94433),l=i(23360);class h extends o.Screen{text;introTrack;clickSound;clickArea=new r.Graphics;constructor(e,t){super(),this.introTrack=e,this.clickSound=t,this.text=new r.Text({text:"Click anywhere to play!",style:{fontFamily:"TorusRegular",fontSize:36,fill:"white"}})}start(){this.text.anchor.set(.5,.5),this.text.scale.set(.5,.5),this.text.alpha=0,this.text.position.set(this.getScreenWidth()/2,this.getScreenHeight()/2),this.addChild(this.text),this.clickArea.rect(0,0,1,1),this.clickArea.fill("rgba(0,0,0,0)"),this.clickArea.width=this.getScreenWidth(),this.clickArea.height=this.getScreenHeight(),this.clickArea.position.set(0,0),this.addChild(this.clickArea),this.clickArea.eventMode="static",this.clickArea.cursor="pointer";const e=()=>{this.clickArea.eventMode="none",u.Main.AudioEngine.PlayEffect(this.clickSound),u.Main.switchScreen(new d.IntroScreen(this.introTrack)),u.Main.pointerLock()};this.clickArea.onclick=()=>{e()},this.clickArea.ontap=()=>{e()},l.ease.add(this.text,{alpha:1,scale:1},{duration:400,ease:"easeOutQuad"})}onClose(){return new Promise((e=>{l.ease.add(this.text,{alpha:0,scale:.5},{duration:200,ease:"easeInOutQuad"}),setTimeout((()=>{e(this)}),200)}))}draw(e){}onResize(){this.text.position.set(this.getScreenWidth()/2,this.getScreenHeight()/2),this.clickArea.width=this.getScreenWidth(),this.clickArea.height=this.getScreenHeight(),this.clickArea.position.set(0,0)}}t.InteractScreen=h},88662:function(e,t,i){var s=this&&this.__createBinding||(Object.create?function(e,t,i,s){void 0===s&&(s=i);var n=Object.getOwnPropertyDescriptor(t,i);n&&!("get"in n?!t.__esModule:n.writable||n.configurable)||(n={enumerable:!0,get:function(){return t[i]}}),Object.defineProperty(e,s,n)}:function(e,t,i,s){void 0===s&&(s=i),e[s]=t[i]}),n=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),a=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)"default"!==i&&Object.prototype.hasOwnProperty.call(e,i)&&s(t,e,i);return n(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.GlitchingTriangles=void 0;const o=a(i(58687)),r=i(23360);class u extends o.Container{constructor(e){super();let t=new o.Graphics,i=s(.2,1.2);function s(e,t){return Math.random()*(t-e)+e}t.moveTo(0,0),t.lineTo(-50*i,100*i),t.lineTo(50*i,100*i),t.lineTo(0,0),Math.random()<.5?t.fill("white"):t.stroke({color:"white",width:1});let n=s(e.x1,e.x2),a=s(e.y1,e.y2);t.position.set(n,a),r.ease.add(t,{alpha:0},{duration:200,ease:"linear"}),setTimeout((()=>{this.destroy()}),200),this.addChild(t)}}t.GlitchingTriangles=u},94433:function(e,t,i){var s=this&&this.__createBinding||(Object.create?function(e,t,i,s){void 0===s&&(s=i);var n=Object.getOwnPropertyDescriptor(t,i);n&&!("get"in n?!t.__esModule:n.writable||n.configurable)||(n={enumerable:!0,get:function(){return t[i]}}),Object.defineProperty(e,s,n)}:function(e,t,i,s){void 0===s&&(s=i),e[s]=t[i]}),n=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),a=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)"default"!==i&&Object.prototype.hasOwnProperty.call(e,i)&&s(t,e,i);return n(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.IntroScreen=void 0;const o=i(84283),r=i(53931),u=i(20825),d=a(i(58687)),l=i(88662),h=i(23360),c=i(58940),p=i(55402),g=i(17898),m=i(9752);class f extends o.Screen{introTrackUrl;doTextSpacingAnim=!1;triangles=new d.Container;ruleSetContainer=new d.Container;flash=new d.Graphics;logoContainerContainer=new d.Container;logoContainer=new d.Container;lazerLogo=new p.LazerLogo;flashed=!1;mainMenu;welcomeText=new d.Text({text:"",style:{fontFamily:"TorusThin",fontSize:42,fill:"white",letterSpacing:5}});constructor(e){super(),this.introTrackUrl=URL.createObjectURL(e)}start(){this.logoContainer.addChild(this.lazerLogo),this.logoContainer.scale.set(1.2),this.logoContainerContainer.position.set(this.getScreenWidth()/2,this.getScreenHeight()/2),this.logoContainerContainer.pivot.set(.5,.5),this.logoContainerContainer.addChild(this.logoContainer),this.flash.rect(0,0,1,1),this.flash.fill("white"),this.flash.position.set(0,0),this.flash.width=this.getScreenWidth(),this.flash.height=this.getScreenHeight(),this.flash.blendMode="add",this.welcomeText.anchor.set(.5,.5),this.welcomeText.position.set(this.getScreenWidth()/2,this.getScreenHeight()/2),setTimeout((async()=>{const{entries:e}=await(0,r.unzip)(this.introTrackUrl);for(const[t,i]of Object.entries(e))"audio.mp3"==t&&i.arrayBuffer().then((e=>u.Main.AudioEngine.audioContext.decodeAudioData(e))).then((e=>{u.Main.AudioEngine.PlayMusicImmediately(e,new g.BeatmapData,(()=>{this.afterAudioPlay(),this.mainMenu=new c.MainMenu}))})),t.endsWith(".osu")&&i.text().then((e=>{let t=m.BeatmapParser.parse(e);console.log(t)}))}),0)}afterAudioPlay(){let e;this.addChild(this.welcomeText),setTimeout((()=>{this.welcomeText.text="wel",this.onResize()}),200),setTimeout((()=>{this.welcomeText.text="welcome",this.onResize()}),400),setTimeout((()=>{this.welcomeText.text="welcome to",this.onResize()}),700),this.triangles.position.set(this.getScreenWidth()/2,this.getScreenHeight()/2),this.addChild(this.triangles),setTimeout((()=>{this.welcomeText.text="welcome to kosu!",this.doTextSpacingAnim=!0,e=setInterval((()=>{let e=new l.GlitchingTriangles({x1:-this.welcomeText.width/2-100,x2:this.welcomeText.width/2+100,y1:-this.welcomeText.height/2-150,y2:this.welcomeText.height/2+100});this.triangles.addChild(e)}),30),this.onResize()}),900);let t=d.Sprite.from("icon_ruleset_std"),i=d.Sprite.from("icon_ruleset_taiko"),s=d.Sprite.from("icon_ruleset_ctb"),n=d.Sprite.from("icon_ruleset_mania");t.anchor.set(.5,.5),t.scale.set(.4),this.ruleSetContainer.addChild(t),i.anchor.set(.5,.5),i.scale.set(.4),this.ruleSetContainer.addChild(i),s.anchor.set(.5,.5),s.scale.set(.4),this.ruleSetContainer.addChild(s),n.anchor.set(.5,.5),n.scale.set(.4),this.ruleSetContainer.addChild(n),setTimeout((()=>{this.doTextSpacingAnim=!1,this.onResize(),clearInterval(e),this.welcomeText.destroy(),this.triangles.destroy(),this.ruleSetContainer.position.set(this.getScreenWidth()/2,this.getScreenHeight()/2),this.addChild(this.ruleSetContainer);t.position.set(-375,0),i.position.set(-125,0),s.position.set(125,0),n.position.set(375,0),h.ease.add(this.ruleSetContainer,{scale:.8},{duration:1e3,ease:"linear"})}),1450),setTimeout((()=>{t.position.set(-240,0),i.position.set(-75,0),s.position.set(75,0),n.position.set(240,0),t.scale.set(1),i.scale.set(1),s.scale.set(1),n.scale.set(1)}),1650),setTimeout((()=>{t.position.set(-350,0),i.position.set(-120,0),s.position.set(120,0),n.position.set(350,0),t.scale.set(2),i.scale.set(2),s.scale.set(2),n.scale.set(2),h.ease.add(this.ruleSetContainer,{scale:1.3},{duration:1e3,ease:"linear"})}),1850),setTimeout((()=>{this.ruleSetContainer.visible=!1,this.lazerLogo.start(),this.addChild(this.logoContainerContainer),this.logoContainerContainer.scale.set(1.2),h.ease.add(this.logoContainerContainer,{scale:1},{duration:920,ease:"easeInQuad"}),setTimeout((()=>{h.ease.add(this.logoContainer,{scale:1.2-.8},{duration:276,ease:"easeInQuint"})}),644)}),2080),setTimeout((()=>{this.addChild(this.flash),this.flash.eventMode="none",this.flashed=!0,this.logoContainerContainer.visible=!1,h.ease.add(this.flash,{alpha:0},{duration:1e3,ease:"easeOutQuad"}),null==this.mainMenu&&(this.mainMenu=new c.MainMenu),u.Main.switchScreen(this.mainMenu),u.Main.cursor.PopIn()}),3e3)}draw(e){this.doTextSpacingAnim&&(this.welcomeText.style.letterSpacing+=.15*e.deltaTime,this.onResize())}onClose(){return new Promise((e=>{setTimeout((()=>{e(this)}),1e3)}))}onResize(){this.welcomeText.destroyed||this.welcomeText.position.set(this.getScreenWidth()/2,this.getScreenHeight()/2),this.triangles.destroyed||this.triangles.position.set(this.getScreenWidth()/2,this.getScreenHeight()/2),this.ruleSetContainer.destroyed||this.ruleSetContainer.position.set(this.getScreenWidth()/2,this.getScreenHeight()/2),!this.flash.destroyed&&this.flashed&&(this.flash.position.set(0,0),this.flash.width=this.getScreenWidth(),this.flash.height=this.getScreenHeight()),this.logoContainerContainer.destroyed||this.logoContainerContainer.position.set(this.getScreenWidth()/2,this.getScreenHeight()/2)}}t.IntroScreen=f},55402:function(e,t,i){var s=this&&this.__createBinding||(Object.create?function(e,t,i,s){void 0===s&&(s=i);var n=Object.getOwnPropertyDescriptor(t,i);n&&!("get"in n?!t.__esModule:n.writable||n.configurable)||(n={enumerable:!0,get:function(){return t[i]}}),Object.defineProperty(e,s,n)}:function(e,t,i,s){void 0===s&&(s=i),e[s]=t[i]}),n=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),a=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)"default"!==i&&Object.prototype.hasOwnProperty.call(e,i)&&s(t,e,i);return n(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.LazerLogo=void 0;const o=a(i(58687)),r=i(12235),u=i(23360);class d extends o.Container{shaderHighlight;shaderBackground;textureHighlight=o.Texture.from("intro_triangles_osuLogo_anim_highlight");textureBackground=o.Texture.from("intro_triangles_osuLogo_anim_background");constructor(){super();const e=r.Loader.GetString("webgl:shaders/logoAnimation.frag"),t=r.Loader.GetString("webgl:shaders/logoAnimation.vert");this.shaderHighlight=o.Shader.from({gl:{vertex:t,fragment:e},resources:{uTexture:this.textureHighlight.source,uProgress:{progress:{value:0,type:"f32"}}}}),this.shaderBackground=o.Shader.from({gl:{vertex:t,fragment:e},resources:{uTexture:this.textureBackground.source,uProgress:{progress:{value:0,type:"f32"}}}})}start(){const e=new o.Geometry({attributes:{aPosition:[-this.textureHighlight.width/2,-this.textureHighlight.height/2,this.textureHighlight.width/2,-this.textureHighlight.height/2,this.textureHighlight.width/2,this.textureHighlight.width/2,-this.textureHighlight.width/2,this.textureHighlight.width/2],aUV:[0,0,1,0,1,1,0,1],aColor:[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1]},indexBuffer:[0,1,2,0,2,3]}),t=new o.Mesh({geometry:e,shader:this.shaderHighlight});this.addChild(t);const i=new o.Geometry({attributes:{aPosition:[-this.textureBackground.width/2,-this.textureBackground.height/2,this.textureBackground.width/2,-this.textureBackground.height/2,this.textureBackground.width/2,this.textureBackground.width/2,-this.textureBackground.width/2,this.textureBackground.width/2],aUV:[0,0,1,0,1,1,0,1],aColor:[.5,.5,.5,1,.5,.5,.5,1,.5,.5,.5,1,.5,.5,.5,1]},indexBuffer:[0,1,2,0,2,3]}),s=new o.Mesh({geometry:i,shader:this.shaderBackground});this.addChild(s);let n=new o.Container;n.scale.set(0,0),u.ease.add(n,{scale:1},{duration:920,ease:"linear"}).on("each",(()=>{this.shaderHighlight.resources.uProgress.uniforms.progress=n.scale.x,this.shaderBackground.resources.uProgress.uniforms.progress=n.scale.x}))}}t.LazerLogo=d},76969:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.LoadScreen=void 0;const s=i(84283),n=i(49323),a=i(58293);class o extends s.Screen{loadAnim;start(){this.loadAnim=new n.LoadAnim("rgba(255,255,255,0.7)","black");let e=a.Settings.getRangeSetting("UI scaling").getValue();this.loadAnim.scale.set(.8*e,.8*e),this.loadAnim.position.set(this.getScreenWidth()-this.loadAnim.getWidth()-15,this.getScreenHeight()-this.loadAnim.getHeight()-15),this.addChild(this.loadAnim)}draw(e){this.loadAnim?.draw(e)}onClose(){return new Promise((e=>{null!=this.loadAnim&&this.loadAnim.destroy(),setTimeout((()=>{e(this)}),400)}))}onResize(){null!=this.loadAnim?.position&&this.loadAnim.position.set(this.getScreenWidth()-this.loadAnim.getWidth()-20,this.getScreenHeight()-this.loadAnim.getHeight()-20)}}t.LoadScreen=o},58940:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.MainMenu=void 0;const s=i(84283),n=i(36721),a=i(54349);class o extends s.Screen{bg=new n.RandomBackground;osuCircle=new a.OsuCircle;start(){this.bg.start(),this.addChild(this.bg),this.addChild(this.osuCircle)}draw(e){this.bg.draw(e),this.osuCircle.draw(e)}onClose(){return new Promise((e=>{this.bg.onClose().then((()=>{e(this)}))}))}onResize(){this.osuCircle.position.set(this.getScreenWidth()/2,this.getScreenHeight()/2),this.bg.onResize(),this.osuCircle.onResize()}}t.MainMenu=o},84283:function(e,t,i){var s=this&&this.__createBinding||(Object.create?function(e,t,i,s){void 0===s&&(s=i);var n=Object.getOwnPropertyDescriptor(t,i);n&&!("get"in n?!t.__esModule:n.writable||n.configurable)||(n={enumerable:!0,get:function(){return t[i]}}),Object.defineProperty(e,s,n)}:function(e,t,i,s){void 0===s&&(s=i),e[s]=t[i]}),n=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),a=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)"default"!==i&&Object.prototype.hasOwnProperty.call(e,i)&&s(t,e,i);return n(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.Screen=void 0;const o=a(i(58687));class r extends o.Container{constructor(){super()}getScreenWidth(){return window.innerWidth}getScreenHeight(){return window.innerHeight}}t.Screen=r},75341:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.SettingsCategory=t.Setting=void 0;const s=i(58293);var n;t.Setting=class{constructor(e){s.Settings.register({setting:this,data:e})}},function(e){e.General="General",e.Skin="Skin",e.Input="Input",e.UserInterface="User Interface",e.Gameplay="Gameplay",e.Rulesets="Rulesets",e.Audio="Audio",e.Graphics="Graphics",e.Online="Online",e.Maintenance="Maintenance",e.Debug="Debug"}(n||(t.SettingsCategory=n={}))},74975:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.DropdownSetting=void 0;const s=i(75341);class n extends s.Setting{value;getValue(){if(!this.value)throw new Error("Value is undefined!");return this.value}setValue(e){this.value=e}}t.DropdownSetting=n},78642:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.RangeSetting=void 0;const s=i(75341);class n extends s.Setting{value=0;getValue(){return this.value}setValue(e){this.value=e}}t.RangeSetting=n},58293:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.Settings=void 0;const s=i(64681),n=i(78642),a=i(44256),o=i(74975);t.Settings=class{static settingsList=[];constructor(){new a.Renderer,new s.UIScale}static register(e){this.settingsList.push(e)}static getRangeSetting(e){let t=!1;if(this.settingsList.forEach((i=>{if(i.data.name==e&&i.setting instanceof n.RangeSetting)return t=!0,i.setting})),!t)throw new Error("Invalid Setting Name!");return new s.UIScale}static getDropDownSetting(e){let t=!1;if(this.settingsList.forEach((i=>{if(i.data.name==e&&i.setting instanceof o.DropdownSetting)return t=!0,i.setting})),!t)throw new Error("Invalid Setting Name!");return new a.Renderer}static getList(){return this.settingsList}}},44256:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.Renderer=void 0;const s=i(75341),n=i(74975);class a extends n.DropdownSetting{list=[];webglOption={displayName:"WebGL",value:"webgl"};defaultValue=this.webglOption;constructor(){super({name:"Renderer",category:s.SettingsCategory.Graphics}),this.value=this.defaultValue}}t.Renderer=a},64681:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.UIScale=void 0;const s=i(78642),n=i(75341);class a extends s.RangeSetting{maxValue=.8;minValue=1.6;increment=.1;defaultValue=1;constructor(){super({name:"UI scaling",category:n.SettingsCategory.Graphics}),this.value=this.defaultValue}}t.UIScale=a},17898:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.BeatmapData=void 0;const s=i(85932),n=i(20352),a=i(32007),o=i(78878),r=i(54611);t.BeatmapData=class{General=new s.GeneralData;Editor=new n.EditorData;Metadata=new a.Metadata;Difficulty=new o.DifficultyData;Events=new r.EventsData}},78878:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.DifficultyData=void 0;t.DifficultyData=class{HPDrainRate;CircleSize;OverallDifficulty;ApproachRate;SliderMultiplier;SliderTickRate}},20352:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.EditorData=void 0;t.EditorData=class{Bookmarks=[];DistanceSpacing;BeatDivisor;GridSize;TimelineZoom}},54611:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.EventsData=void 0;t.EventsData=class{Events=[]}},37940:function(e,t){var i;Object.defineProperty(t,"__esModule",{value:!0}),t.Countdown=void 0,function(e){e[e.NoCountdown=0]="NoCountdown",e[e.Normal=1]="Normal",e[e.Half=2]="Half",e[e.Double=3]="Double"}(i||(t.Countdown=i={}))},85932:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.GeneralData=void 0;const s=i(37940),n=i(41080),a=i(90857),o=i(45274);t.GeneralData=class{AudioFileName;AudioLeadIn=0;AudioHash;PreviewTime=-1;Countdown=s.Countdown.Normal;SampleSet=n.SampleSet.Normal;StackLeniency=.7;Mode=a.Mode.OSU;LetterboxInBreaks=!1;StoryFireInFront=!0;UseSkinSprites=!1;AlwaysShowPlayfield=!1;OverlayPosition=o.OverlayPosition.NoChange;SkinPreference;EpilepsyWarning=!1;CountdownOffset=0;SpecialStyle=!1;WidescreenStoryboard=!1;SamplesMatchPlaybackRate=!1}},90857:function(e,t){var i;Object.defineProperty(t,"__esModule",{value:!0}),t.Mode=void 0,function(e){e[e.OSU=0]="OSU",e[e.TAIKO=1]="TAIKO",e[e.CATCH=2]="CATCH",e[e.MANIA=3]="MANIA"}(i||(t.Mode=i={}))},45274:function(e,t){var i;Object.defineProperty(t,"__esModule",{value:!0}),t.OverlayPosition=void 0,function(e){e.NoChange="NoChange",e.Below="Below",e.Above="Above"}(i||(t.OverlayPosition=i={}))},41080:function(e,t){var i;Object.defineProperty(t,"__esModule",{value:!0}),t.SampleSet=void 0,function(e){e.Normal="Normal",e.Soft="Soft",e.Drum="Drum"}(i||(t.SampleSet=i={}))},32007:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.Metadata=void 0;t.Metadata=class{Title;TitleUnicode;Artist;ArtistUnicode;Creator;Version;Source;Tags;BeatmapID;BeatmapSetID}},9752:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.BeatmapParser=void 0;const s=i(17898);t.BeatmapParser=class{static parse(e,t){return new s.BeatmapData}}},5825:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.MathUtil=void 0;class i{static RadiansToDegrees(e){return 180*e/Math.PI}static DegreesToRadians(e){return e*Math.PI/180}static clamp(e,t,i){return Math.min(Math.max(i,e),t)}static clamp01(e){return i.clamp(0,1,e)}}t.MathUtil=i},29820:function(e,t,i){i(11307);const s=i(58687),n=i(20825),a=i(58293),o=window.innerWidth,r=window.innerHeight,u=new s.Application;window.onload=async()=>{new a.Settings;let e=a.Settings.getDropDownSetting("Renderer").getValue().value;u.init({backgroundColor:"black",width:o,height:r,antialias:!0,preference:e,resolution:window.devicePixelRatio,autoDensity:!0}).then((()=>{new n.Main(u)}))}},20825:function(e,t,i){var s=this&&this.__createBinding||(Object.create?function(e,t,i,s){void 0===s&&(s=i);var n=Object.getOwnPropertyDescriptor(t,i);n&&!("get"in n?!t.__esModule:n.writable||n.configurable)||(n={enumerable:!0,get:function(){return t[i]}}),Object.defineProperty(e,s,n)}:function(e,t,i,s){void 0===s&&(s=i),e[s]=t[i]}),n=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),a=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)"default"!==i&&Object.prototype.hasOwnProperty.call(e,i)&&s(t,e,i);return n(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.Main=void 0;const o=i(76969),r=a(i(58687)),u=i(25373),d=i(12235),l=i(55686),h=i(85437);class c{static app;static currentScreen;static allScreens=[];static clickArea=new r.Graphics;static mousePos={x:0,y:0};static pointerLockExitTime;static doPointerLock=!1;static cursor;static AudioEngine=new h.AudioEngine;constructor(e){c.app=e,document.body.appendChild(c.app.canvas),this.doResize(),window.addEventListener("resize",this.doResize),c.app.stage.eventMode="static",c.app.stage.addEventListener("mousemove",(e=>{c.mousePos.x=e.clientX,c.mousePos.y=e.clientY,c.cursor&&c.cursor.updateMouse()})),document.addEventListener("pointerlockchange",this.pointerLockChanged,!1),c.switchScreen(new o.LoadScreen),navigator.mediaSession.setActionHandler("play",(function(){})),navigator.mediaSession.setActionHandler("pause",(function(){})),navigator.mediaSession.setActionHandler("stop",(function(){})),navigator.mediaSession.setActionHandler("seekbackward",(function(){})),navigator.mediaSession.setActionHandler("seekforward",(function(){})),navigator.mediaSession.setActionHandler("previoustrack",(function(){})),navigator.mediaSession.setActionHandler("nexttrack",(function(){})),d.Loader.Load(c.AudioEngine.audioContext).then((()=>{c.cursor=new l.MenuCursor(!1);let e=d.Loader.GetAudio("sample_dialog_ok"),t=d.Loader.Get("introTrianglesTrack");c.switchScreen(new u.InteractScreen(t,e))}))}doResize(){c.app.renderer.resize(window.innerWidth,window.innerHeight),c.app.stage.scale.x=1,c.app.stage.scale.y=1,c.clickArea.destroyed||(c.clickArea.width=window.innerWidth,c.clickArea.height=window.innerHeight,c.clickArea.position.set(0,0)),c.allScreens.forEach((e=>{e.onResize()}))}pointerLockChanged(){!document.pointerLockElement&&c.doPointerLock?(r.EventSystem.isPointerLocked=!1,c.pointerLockExitTime=Date.now(),c.clickArea=new r.Graphics,c.clickArea.rect(0,0,1,1),c.clickArea.fill("rgba(0,0,0,0.1)"),c.clickArea.width=window.innerWidth,c.clickArea.height=window.innerHeight,c.clickArea.position.set(0,0),c.app.stage.addChild(c.clickArea),c.clickArea.eventMode="static",c.clickArea.cursor="pointer",c.cursor.PopOut(),c.clickArea.zIndex=9999999,c.clickArea.onclick=()=>{Date.now()-c.pointerLockExitTime<1500||(c.clickArea.removeFromParent(),c.clickArea.destroy(),c.pointerLock(),c.cursor.PopIn())}):r.EventSystem.isPointerLocked=!0}static pointerLock(){this.doPointerLock=!0,c.app.canvas.requestPointerLock({unadjustedMovement:!0})}static exitPointerLock(){this.doPointerLock=!1,c.app.canvas.exitPointerLock()}static switchScreen(e){null!=this.currentScreen&&(this.currentScreen.zIndex=1,this.currentScreen.onClose().then((e=>{for(let t=0;t<this.allScreens.length;t++)this.allScreens[t]==e&&this.allScreens.splice(t,1);c.app.ticker.remove(e.draw),c.app.stage.removeChild(e),e.destroy()}))),c.app.stage.addChild(e),this.allScreens.push(e),this.currentScreen=e,e.start(),e.onResize(),c.app.ticker.add(e.draw,e)}}t.Main=c},11307:function(e,t,i){i.r(t)}},i={};function s(e){var n=i[e];if(void 0!==n)return n.exports;var a=i[e]={id:e,loaded:!1,exports:{}};return t[e].call(a.exports,a,a.exports,s),a.loaded=!0,a.exports}s.m=t,e=[],s.O=function(t,i,n,a){if(!i){var o=1/0;for(l=0;l<e.length;l++){i=e[l][0],n=e[l][1],a=e[l][2];for(var r=!0,u=0;u<i.length;u++)(!1&a||o>=a)&&Object.keys(s.O).every((function(e){return s.O[e](i[u])}))?i.splice(u--,1):(r=!1,a<o&&(o=a));if(r){e.splice(l--,1);var d=n();void 0!==d&&(t=d)}}return t}a=a||0;for(var l=e.length;l>0&&e[l-1][2]>a;l--)e[l]=e[l-1];e[l]=[i,n,a]},s.d=function(e,t){for(var i in t)s.o(t,i)&&!s.o(e,i)&&Object.defineProperty(e,i,{enumerable:!0,get:t[i]})},s.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),s.hmd=function(e){return(e=Object.create(e)).children||(e.children=[]),Object.defineProperty(e,"exports",{enumerable:!0,set:function(){throw new Error("ES Modules may not assign module.exports or exports.*, Use ESM export syntax, instead: "+e.id)}}),e},s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},s.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},function(){var e={179:0};s.O.j=function(t){return 0===e[t]};var t=function(t,i){var n,a,o=i[0],r=i[1],u=i[2],d=0;if(o.some((function(t){return 0!==e[t]}))){for(n in r)s.o(r,n)&&(s.m[n]=r[n]);if(u)var l=u(s)}for(t&&t(i);d<o.length;d++)a=o[d],s.o(e,a)&&e[a]&&e[a][0](),e[a]=0;return s.O(l)},i=self.webpackChunkpixi_typescript_boilerplate=self.webpackChunkpixi_typescript_boilerplate||[];i.forEach(t.bind(null,0)),i.push=t.bind(null,i.push.bind(i))}();var n=s.O(void 0,[507],(function(){return s(29820)}));n=s.O(n)}();